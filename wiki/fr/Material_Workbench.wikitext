<languages/>

{{Docnav/fr
|[[Inspection_Workbench/fr|Atelier Inspection]]
|[[Mesh_Workbench/fr|Atelier Mesh]]
|IconL=Workbench_Inspection.svg
|IconR=Workbench_Mesh.svg
}}

[[Image:Workbench_Material.svg|thumb|128px|Icône de l'atelier Material]]

== Introduction ==

{{Version/fr|1.0}}

L'[[Material_Workbench/fr|atelier Material]] [[Image:Workbench_Material.svg|24px]]  gère le système des matériaux de FreeCAD.

<span id="Tools"></span>
== Outils ==

* [[Image:Material_Edit.svg|32px]] [[Material_Edit/fr|Éditeur de matériaux]] : ouvre l'éditeur de matériaux.

<span id="Related_tools"></span>
=== Outils connexes ===

Bien qu'ils ne soient pas fournis par l'atelier Material, ces outils liés aux matériaux sont inclus dans le noyau de FreeCAD et peuvent être utilisés sans charger l'atelier :

* [[Image:Std_SetMaterial.svg|32px]] [[Std_SetMaterial/fr|Matériau]] : Attribue un matériau aux objets sélectionnés.

* [[Image:Std_SetAppearance.svg|32px]] [[Std_SetAppearance/fr|Apparence]] : Définit les propriétés d'affichage des objets sélectionnés. Souvent utilisé après l'application d'un matériau, lorsqu'un matériau donné ne définit pas les propriétés d'apparence.

<span id="Preferences"></span>
==Préférences==

* [[File:Preferences-material.svg|32px]] [[Material_Preferences/fr|Préférences]] : préférences de l'atelier Material.

<span id="Working_with_materials"></span>
== Travailler avec des matériaux ==

Ce guide explique les concepts fondamentaux et les workflows (flux de travail) pour utiliser le système de matériaux dans FreeCAD. Il couvre les différents outils, propriétés et détails techniques clés pour une utilisation interactive et scriptée.

<span id="Material_tools"></span>
=== Outils matériaux ===

<span id="Material_Editor"></span>
==== Éditeur de matériaux ====

* '''Utilisation :''' Cliquez sur le bouton {{Button|[[Image:Material_Edit.svg|16px]] [[Material_Edit/fr|Modifier]]}} dans l'atelier Material.
* '''Objectif :''' L'éditeur de matériaux est un outil permettant de '''définir et gérer les matériaux'''. Sa seule fonction est de créer de nouveaux matériaux, de modifier les propriétés de ceux qui existent déjà et de les organiser.
* '''Comportement :'''
** Il est déconnecté de votre modèle 3D ; la sélection d'un objet dans votre document n'a aucun effet sur l'éditeur.
** '''Vous ne pouvez pas attribuer de matériau à un objet à partir de cette fenêtre.''' Cliquer sur {{Button|OK}} ferme simplement l'éditeur.

<span id="Material_Selector"></span>
==== Sélecteur de matériaux ====

* '''Utilisation :''' Sélectionnez un ou plusieurs objets dans la [[3D_View/fr|vue 3D]] ou la [[Tree_View/fr|vue arborescente]], puis sélectionnez l'option {{MenuCommand|[[Image:Std_SetMaterial.svg|16px]] [[Std_SetMaterial/fr|Matériau]]}} dans le menu contextuel.
* '''Objectif :''' Cet outil sert à '''attribuer un matériau à des objets'''.
* '''Comportement :'''
** Il ouvre un panneau de tâches contenant une arborescence de navigateur de matériaux.
** Le bouton {{Button|Lancer l'éditeur}} lance l'éditeur de matériaux pour modifier ou créer un matériau.
** La sélection d'un matériau dans l'arborescence du navigateur de matériaux applique immédiatement ses propriétés aux objets sélectionnés. Il s'agit de l'étape requise pour lier les données physiques d'un matériau à une pièce.

<span id="Physical_vs._appearance_properties"></span>
=== Propriétés physiques vs propriétés esthétiques ===

Dans FreeCAD, un matériau est défini par deux ensembles distincts de propriétés :

* '''Propriétés physiques :''' elles définissent les caractéristiques techniques d'un matériau, qui sont utilisées pour les calculs et les simulations (par exemple, dans l'[[FEM_Workbench/fr|atelier FEM]]). Parmi les exemples, on peut citer {{Incode|Density}}, {{Incode|YoungsModulus}} et {{Incode|PoissonRatio}}.
* '''Propriétés d'apparence :''' elles définissent l'aspect visuel d'un matériau à des fins de rendu. Parmi les exemples, citons {{Incode|DiffuseColor}}, {{Incode|Shininess}} et {{Incode|Transparency}}.

Un matériau n'est pas tenu de posséder les deux. Certains matériaux peuvent être définis uniquement à des fins d'analyse (avec uniquement des propriétés physiques), tandis que d'autres peuvent être définis uniquement à des fins de visualisation (avec uniquement des propriétés d'apparence).

<span id="Override_material_appearance"></span>
=== Remplacer l'apparence du matériau ===

L'apparence finale d'un objet est déterminée par une hiérarchie. Les propriétés visuelles définies dans un matériau peuvent être remplacées par des paramètres locaux sur l'objet lui-même.

<div class="mw-translate-fuzzy">
* '''Comment remplacer :''' Sélectionnez l'option {{MenuCommand|[[Image:Std_SetAppearance.svg|16px]] [[Std_SetAppearance/fr|Apparence]]}} depuis le menu [[Tree_View/fr|Arborescence]] de l'objet ou dans la [[3D_View/fr|Vue 3D]]. Toutes les modifications que vous effectuez ici, auront priorité sur les propriétés d'apparence du matériau attribué.
* '''Avertissements :''' Cela peut être source de confusion. Si vous avez attribué un matériau à un objet mais que sa couleur ne change pas, c'est probablement parce que l'objet a un remplacement d'apparence locale. Il n'y a pas d'indicateur visuel clair dans l'interface utilisateur pour montrer qu'une substitution est active. Pour restaurer l'apparence du matériau, vous pouvez utiliser le panneau de tâches [[Image:Std_SetAppearance.svg|16px]] Apparence pour appliquer les visuels du matériau, mais il est plus facile d'appliquer temporairement un matériau différent, puis d'appliquer à nouveau le matériau d'origine.
</div>

<span id="Properties"></span>
=== Propriétés ===

Lorsque vous attribuez un matériau, FreeCAD relie les données à l'objet et à son fournisseur de vue à l'aide de deux propriétés.

* {{PropertyData|Shape Material}} : Il s'agit de la propriété la plus importante. Elle est ajoutée à l'objet « Document ». Elle contient un lien vers un objet {{Incode|Materials::Material}} complet, donnant accès à toutes ses données physiques et d'apparence pour les calculs et les scripts. Il s'agit d'une [[Property_View/fr#Menu contextuel|propriété cachée]].
* {{PropertyView|Shape Appearance}} : cette propriété existe sur le « fournisseur de vue » de l'objet. Il s'agit d'une liste qui contrôle le rendu final de l'objet dans la vue 3D et qui est modifiée lorsque vous utilisez le panneau de tâches [[Image:Std_SetAppearance.svg|16px]] Apparence.

=== Expressions ===

Vous pouvez accéder aux valeurs des propriétés des matériaux à l'aide d'expressions, ce qui est particulièrement puissant dans l'[[Spreadsheet_Workbench/fr|atelier Spreadsheet]]. Pour vous assurer d'obtenir une quantité numérique utilisable, plutôt qu'une chaîne de texte, vous devez utiliser le dictionnaire {{Incode|PropertyObjects}}.

* ❌ Méthode incorrecte (renvoie du texte) : l'utilisation du dictionnaire {{Incode|PhysicalProperties}} renvoie une chaîne avec des unités, qui ne peut pas être utilisée dans les formules suivantes.

: {{Code|lang=text|code=
=<<MyBody>>.ShapeMaterial.PhysicalProperties[<<Density>>]
}}

: ''→ Renvoie "7850 kg/m^3"''

* ✅ '''Méthode correcte (renvoie une quantité) :''' l'utilisation du dictionnaire {{Incode|PropertyObjects}} et l'accès à son attribut {{Incode|Value}} renvoient un objet Quantity complet qui peut être utilisé directement dans les calculs.

: {{Code|lang=text|code=
=<<MyBody>>.ShapeMaterial.PropertyObjects[<<Density>>].Value
}}

: '' → Renvoie un objet Quantity que la feuille de calcul peut utiliser numériquement. ''

: Si cette valeur se trouve dans la cellule {{Incode|A1}} de votre feuille de calcul, vous pouvez alors écrire une formule dans la cellule {{Incode|A2}} telle que {{Incode|<nowiki>=</nowiki> A1 * 10}}, et elle fonctionnera correctement.

<span id="Scripting"></span>
=== Scriptage ===

Vous pouvez obtenir et définir les propriétés des matériaux à l'aide de scripts Python. Les principales méthodes sont {{Incode|.getPhysicalValue()}} et {{Incode|.setPhysicalValue()}}.

{{Code|lang=python|code=
import FreeCAD
import FreeCADGui

# Get a reference to your object (e.g., a PartDesign Body)
obj = App.ActiveDocument.getObject("Body")

# --- Check for and get a property ---
if obj.ShapeMaterial.hasPhysicalProperty("Density"):
    
    # Get the value. This returns a FreeCAD.Quantity object.
    density_quantity = obj.ShapeMaterial.getPhysicalValue("Density")
    
    print(f"The material is: {obj.ShapeMaterial.Name}")
    print(f"The density is: {density_quantity}")
    print(f"Numerical value: {density_quantity.Value}")

else:
    print("The selected material does not have a 'Density' property.")


# --- Set a property ---
# The value can be a string with units or a FreeCAD.Quantity object.
try:
    obj.ShapeMaterial.setPhysicalValue("Density", "8000 kg/m^3")
    App.ActiveDocument.recompute()
    print("Density successfully updated.")

except Exception as e:
    print(f"Failed to set property: {e}")
}}


{{Docnav/fr
|[[Inspection_Workbench/fr|Atelier Inspection]]
|[[Mesh_Workbench/fr|Atelier Mesh]]
|IconL=Workbench_Inspection.svg
|IconR=Workbench_Mesh.svg
}}

[[Category:Material{{#translation:}}]]
{{Userdocnavi{{#translation:}}}}
[[Category:Workbenches{{#translation:}}]]