<languages/>

{{Docnav/fr
|[[Draft_Label/fr|Étiquette]]
|[[Draft_Move/fr|Déplacer]]
|[[Draft_Workbench/fr|Atelier Draft]]
|IconL=Draft_Label.svg 
|IconR=Draft_Move.svg 
|IconC=Workbench_Draft.svg
}}

{{GuiCommand/fr
|Name=Draft AnnotationStyleEditor
|Name/fr=Draft Éditer le style des annotations
|MenuLocation=Draft : Annotation → Éditer le style des annotations...<br><br>BIM : Gestion → Éditer le style des annotations...
|Workbenches=[[Draft_Workbench/fr|Draft]], [[BIM_Workbench/fr|BIM]]
|SeeAlso=[[Draft_Text/fr|Draft Texte]], [[Draft_Label/fr|Draft Étiquette]], [[Draft_Dimension/fr|Draft Dimension]]
|Version=0.19
}}

==Description==

La commande [[Image:Draft_AnnotationStyleEditor.svg|24px]] '''Draft Éditer le style des annotations''' vous permet de définir les styles qui affectent les propriétés visuelles des objets annotation, comme ceux créés par les commandes [[Draft_Text/fr|Draft Texte]], [[Draft_Dimension/fr|Draft Dimension]] et [[Draft_Label/fr|Draft Étiquette]].

[[File:Draft_AnnotationStyleEditor_Dialog.png]]
<div class="mw-translate-fuzzy">
{{Caption|La fenêtre de dialogue de l'Éditeur du style des annotations}}
</div>

<span id="Usage"></span>
== Utilisation ==

# Il existe plusieurs façons de lancer la commande :
#* [[Draft_Workbench/fr|Draft]]: appuyez sur le bouton {{Button|[[Image:Draft_AnnotationStyleEditor.svg|16px]] [[Draft_AnnotationStyleEditor/fr|Éditer le style des annotations...]]}}.
#* Draft : sélectionnez l'option {{MenuCommand|Annotation → [[Image:Draft_AnnotationStyleEditor.svg|16px]] Éditer le style des annotations...}} du menu.
#* [[BIM_Workbench/fr|BIM]] : sélectionnez l'option {{MenuCommand|Gestion → [[Image:Draft_AnnotationStyleEditor.svg|16px]] Éditer le style des annotations...}} du menu.
# La boîte de dialogue {{MenuCommand|Éditeur du style des annotations}} s'ouvre.
# Sélectionnez un style dans la liste déroulante {{MenuCommand|Nom du style}} ou choisissez {{Value|Ajouter nouveau...}} pour définir un nouveau style.
# Vous pouvez également ajuster les propriétés du style.
# Vous pouvez également appuyer sur le bouton {{Button|[[File:Accessories-text-editor.svg|16px]] Renommer}} pour renommer le style.
# Vous pouvez également appuyer sur le bouton {{Button|[[File:Edit_Cancel.svg|16px]] Supprimer}} pour supprimer le style.
# Vous pouvez également appuyer sur le bouton {{Button|[[File:Std_Import.svg|16px]]}} pour importer tous les styles d'un fichier {{FileName|.json}}. Cela écrasera les styles existants portant le même nom.
# Vous pouvez également appuyer sur le bouton {{Button|[[File:Std_Export.svg|16px]]}} pour exporter tous les styles vers un fichier {{FileName|.json}}.
# Appuyez sur le bouton {{Button|OK}} pour fermer la boîte de dialogue et terminer la commande.

<span id="Apply"></span>
== Application ==

Pour appliquer un style d'annotation, modifiez la propriété {{PropertyView|Annotation Style}} des objets d'annotation. Cette propriété se trouve dans l'onglet {{MenuCommand|Vue}} de l'[[Property_editor/fr|éditeur de propriétés]].

[[File:Draft_AnnotationStyleEditor_Apply.png]]
{{Caption|Sélection d'un style d'annotation}}

<span id="Scripting"></span>
== Script ==

Voir aussi : [https://freecad.github.io/SourceDoc/ Autogenerated API documentation] et [[FreeCAD_Scripting_Basics/fr|FreeCAD Débuter avec les scripts]].

Les styles d'annotation sont enregistrés en tant que dictionnaires sérialisés dans l'attribut {{incode|Meta}} du document. Cet attribut est inspecté par l'éditeur de style d'annotation lorsqu'il est ouvert.

{{Code|code=
>>> print(App.ActiveDocument.Meta["Draft_Style_Text red"])
{"ArrowSize": 2.0, "ArrowType": 0, "Decimals": 2, "DimOvershoot": 4.0, "ExtLines": 0.0, "ExtOvershoot": 4.0, "FontName": "DejaVu Sans", "FontSize": 10.0, "LineColor": 255, "LineSpacing": 1.0, "LineWidth": 2, "ScaleMultiplier": 1.0, "ShowLine": true, "ShowUnit": false, "TextColor": 4278190335, "TextSpacing": 3.0, "UnitOverride": ""}
}}

Chaque style qui apparaît dans l'éditeur est enregistré en interne avec le nom de style préfixé par {{incode|Draft_Style_}}. Cela empêchera des conflits de noms avec d'autres clés qui peuvent être enregistrées dans {{incode|Meta}} et qui peuvent contenir des informations arbitraires.

Vous pouvez définir tout nouveau style en ajoutant les informations nécessaires à une clé commençant par {{incode|Draft_Style_}}. La valeur correspondante de cette clé doit être un dictionnaire sérialisé à l'aide de {{incode|json}}.

{{Code|code=
import json

meta = App.ActiveDocument.Meta
props = {"ArrowSize": 7.0, "LineWidth": 6}
meta["Draft_Style_Thick_lines"] = json.dumps(props)
App.ActiveDocument.Meta = meta
}}

Les propriétés non saisies seront remplies automatiquement lorsque ce style sera sélectionné dans l'éditeur de style et que le bouton {{Button|OK}} sera activé.

De la même manière, tout dictionnaire sérialisé peut être décompressé pour l'édition.

{{Code|code=
import json

meta = App.ActiveDocument.Meta
new_dict = json.loads(meta["Draft_Style_Thick_lines"])
}}

Les propriétés doivent avoir les types suivants :

Les chaînes de caractères :

{{Code|code=
props = {
    "FontName": "DejaVu Sans",
    "UnitOverride": ""
}
}}

Les valeurs flottantes (doivent être fournies avec un point décimal) :

{{Code|code=
props = {
    "ArrowSize": 2.0,
    "DimOvershoot": 4.0,
    "ExtLines": 0.0,
    "ExtOvershoot": 4.0
    "FontSize": 10.0,
    "LineSpacing": 1.0,
    "ScaleMultiplier": 1.0,
    "TextSpacing": 3.0
}
}}

Les entiers :

{{Code|code=
props = {
    "ArrowType": 0,
    "Decimals": 2,
    "LineColor": 255,
    "LineWidth": 2,
    "TextColor": 4278190335
}
}}

{{Incode|TextColor}} et {{Incode|LineColor}} correspondent à un entier de 32 bits, dont on peut extraire chacunr des valeurs RGBA. {{Incode|ArrowType}} est un énumérateur.

Booléens :

{{Code|code=
props = {
    "ShowLine": true
    "ShowUnit": false,
}
}}


{{Docnav/fr
|[[Draft_Label/fr|Étiquette]]
|[[Draft_Move/fr|Déplacer]]
|[[Draft_Workbench/fr|Atelier Draft]]
|IconL=Draft_Label.svg 
|IconR=Draft_Move.svg 
|IconC=Workbench_Draft.svg
}}

{{Draft Tools navi{{#translation:}}}}
{{Userdocnavi{{#translation:}}}}