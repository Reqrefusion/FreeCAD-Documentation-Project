<languages/>

{{Docnav/fr
|[[Pivy/fr|Pivy]]
|[[Interface_creation/fr|Création d'interface]]
}}

{{TOCright}}

<span id="Introduction"></span>
== Introduction ==

La bibliothèque [[PySide/fr|PySide]] est un wrapper Python pour la boîte à outils d'interface utilisateur graphique (GUI) multiplateforme Qt. FreeCAD utilise Qt comme principale boîte à outils GUI. Qt est plus qu'une simple boîte à outils GUI, c'est une collection de bibliothèques C++ à des fins diverses. On peut par exemple faire du réseautage avec les composants de la bibliothèque Qt, tous accessibles en Python via PySide. Toute interface graphique pouvant être créée en C++ peut également être créée et modifiée en Python. L'avantage d'utiliser Python est que les interfaces Qt peuvent être développées et testées en direct, car il n'est pas nécessaire de compiler les fichiers source.

La méthode recommandée pour importer PySide (quelle que soit la version) dans FreeCAD est la suivante :

{{Code|code=
from PySide import QtCore, QtGui, QtWidgets
}}

<span id="Qt_&amp;_PySide_versions"></span>
==Versions Qt & PySide==

* La version 1.0 de Qt a été lancée au milieu des années 1990.
* La version 4.0 de Qt a été lancée en 2005 et la série 4.x a été officiellement retirée en 2015.
** Le wrapper Python pour Qt4.x s'appelle PySide.
* La version 5.0 de Qt a été publiée en 2012 et la série 5.x a été officiellement retirée en 2020.
** Le wrapper Python pour Qt5.x s'appelle PySide2.
* La version 6.0 de Qt a été publiée en 2020, il s'agit de la série de versions actuelle.
** Le wrapper Python pour Qt6.x s'appelle PySide6. 

[[File:PySideScreenSnapshot1.jpg]] [[File:PySideScreenSnapshot2.jpg]]
{{Caption|Exemples créés avec PySide. À gauche: un simple dialogue. À droite: un dialogue plus complexe avec des graphiques.}}
{{Top}}
<span id="FreeCAD_and_PySide"></span>
==FreeCAD et PySide==

L'idée initiale derrière FreeCAD était de réunir Cas.CADE (noyau géométrique), Qt (boîte à outils graphique) et Python afin de créer un programme de CAO paramétrique 3D libre avec un moteur de script intégré. C'était au début des années 2000, c'est-à-dire avant l'existence de PySide, et c'est pourquoi un autre wrapper, PyQt, a été utilisé pendant les dix premières années d'existence de FreeCAD. PySide a été créé pour résoudre les problèmes de licence avec PyQt, et le passage de FreeCAD à PySide a été effectué en 2013 ([https://github.com/FreeCAD/FreeCAD/commit/1dc122dc9a commit 1dc122dc9a]).

Si vous souhaitez connaître la version de Qt utilisée par votre installation, la boîte de dialogue [[Std_About/fr|À propos]] contient une liste des versions dans laquelle Qt est inclus.

Pour plus d'informations, consultez :
*[https://fr.wikipedia.org/wiki/PySide Wikipédia : PySide]
* [https://wiki.qt.io/Differences_Between_PySide_and_PyQt Différences entre PySide et PyQt]

Lorsque vous installez FreeCAD, vous obtenez à la fois Qt et PySide correspondant dans le cadre du paquet. Si vous effectuez vous-même la [[Compiling/fr|compilation]], vous devez vérifier que les versions correspondantes de ces deux bibliothèques sont installées afin que FreeCAD fonctionne correctement. Bien sûr, PySide ne fonctionnera que si Qt est présent.
{{Top}}
<span id="Multi_version_compatibility"></span>
==Compatibilité multi-versions==

La principale différence entre les bibliothèques PySide, PySide2 et PySide6 réside dans l'espace de noms. PySide (Qt4) dispose des espaces de noms principaux {{incode|QtGui}} et {{incode|QtCore}}, tandis que PySide2 (Qt5) et PySide6 (Qt6) ont introduit l'espace de noms supplémentaire {{incode|QtWidgets}}, où se trouvent désormais tous les widgets, qui se trouvaient auparavant dans l'espace de noms QtGui.

L'approche de FreeCAD pour gérer les différentes versions de Qt/PySide consiste à les appeler toutes les PySide, ce qui devrait en réalité être considéré comme PySideX. Peu importe la version de Qt/PySide installée, elles sont toutes importées avec PySide.

Un [https://en.wikipedia.org/wiki/Shim_(computing) shim] gère les différences entre les versions. Ce shim {{incode|PySide}} se trouve dans le répertoire {{incode|Ext/}} d'une installation de FreeCAD compilée pour Qt5/Qt6.

{{Code|code=
/usr/share/freecad/Ext/PySide
}}

Ce module importe simplement les classes nécessaires depuis {{incode|PySide2/6}} et les place dans l'espace de noms {{incode|PySide}}. Cette approche a été choisie pour sa capacité à assurer la rétrocompatibilité du point de vue de Qt4.

{{Code|code=
PySide2.QtCore -> PySide.QtCore
PySide2.QtGui -> PySide.QtGui
PySide2.QtWidgets -> PySide.QtWidgets
PySide2.QtSvg -> PySide.QtSvg
PySide2.QtUiTools -> PySide.QtUiTools
}}

C'est pourquoi les classes {{incode|PySide2.QtWidgets}} sont également placées dans l'espace de noms {{incode|PySide.QtGui}}.

{{Code|code=
PySide2.QtWidgets.QCheckBox -> PySide.QtGui.QCheckBox
}}

Mais la méthode actuellement recommandée consiste à utiliser l'espacement moderne.

{{Code|code=
from PySide import QtCore, QtGui, QtWidgets

my_check_box = QtWidgets.QCheckBox()
}}
{{Top}}
<span id="Examples_of_PySide_use"></span>
== Exemples d'utilisation de PySide ==

* [[PySide_Beginner_Examples/fr|Exemples PySide Débutant]], bonjour le monde, annonces, entrez du texte, entrez un numéro.
* [[PySide_Intermediate_Examples/fr|Exemples intermédiaires PySide]], dimensionnement de la fenêtre, masquage des widgets, menus contextuels, position de la souris, événements de la souris.
* [[PySide_Advanced_Examples/fr|Exemples avancés de PySide]], de nombreux widgets.

Les exemples de PySide sont divisés en 3 parties, différenciées par niveau d'exposition à PySide, Python et les composants internes de FreeCAD. La première page a un aperçu sur PySide; les deuxième et troisième pages sont pour la plupart des exemples de code à différents niveaux.

On s'attend à ce que ces exemples soient utiles pour commencer et par la suite l'utilisateur peut consulter d'autres ressources en ligne ou la documentation officielle.
{{Top}}
==Documentation==

Il existe certaines différences dans la gestion des widgets entre les différentes versions. Les programmeurs doivent être conscients de ces incompatibilités et consulter la documentation officielle si quelque chose ne fonctionne pas comme prévu sur une plateforme donnée. Bien que cela soit rare, il peut parfois être nécessaire d'effectuer des appels versionnés via des clauses if.

La documentation PySide fait référence aux classes de style Python; cependant, puisque Qt est à l'origine une bibliothèque C++, les mêmes informations devraient être disponibles dans la référence C++ correspondante.
* [https://doc.qt.io/qtforpython/modules.html Modules Qt] disponibles sur PySide6 (Qt5/Qt6).
* [https://doc.qt.io/qt-5/modules-cpp.html Toutes les classes Qt par module] dans Qt5 pour C++.
* [https://pyside.readthedocs.io/en/latest/ Modules Qt] disponibles auprès de PySide (Qt4).
{{Top}}

{{Docnav/fr
|[[Pivy/fr|Pivy]]
|[[Interface_creation/fr|Création d'interface]]
}}

{{Powerdocnavi{{#translation:}}}}
[[Category:Developer Documentation{{#translation:}}]]
[[Category:Python Code{{#translation:}}]]