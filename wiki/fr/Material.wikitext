<languages/>
{{UnfinishedDocu{{#translation:}}}}

{{VeryImportantMessage|Cette page documente les formats et les décisions de conception liés à la mise en œuvre du nouveau système Material pendant le cycle de développement de FreeCAD 1.0. Elle n'est pas à jour et est conservée pour des raisons historiques. La plupart des utilisateurs préféreront consulter la documentation utilisateur de l'[[Material_Workbench/fr|atelier Material]] à la place.}}

<span id="Overview"></span>
== Présentation ==

{{TOCright}}

Cette page vous renseigne sur le système de données des matériaux dans FreeCAD.

Il est actuellement en cours de révision afin de refléter les modifications apportées au système de matériaux actuellement en cours de développement.

<span id="Abstract"></span>
== Résumé ==

Contrairement aux versions précédentes, les matériaux ne sont plus implémentés sous la forme d'un simple dictionnaire. Le système précédent présentait l'avantage d'être simple, mais avait pour inconvénient d'offrir une gamme limitée pour décrire les propriétés des matériaux.

Dans le nouveau système, les propriétés sont définies séparément sous forme d'une série de fichiers YAML. Elles sont ensuite combinées dans une description de propriété avec des valeurs spécifiées pour les propriétés requises. Les nouveaux types de données, tels que les tableaux, signifient qu'il n'est plus possible d'y accéder à l'aide de simples dictionnaires. Une API est plutôt utilisée pour accéder aux propriétés matérielles et aux valeurs des données. Cela permet d'obtenir des capacités supérieures à celles qui étaient possibles auparavant.

<span id="Tools"></span>
== Outils ==

Il existe plusieurs ressources utiles pour faciliter la gestion des matériaux :
* [http://www.dimensionengine.com/ Calculateur d'unités] pour obtenir les informations sur vos matériaux dans les unités requises par FreeCAD
* [http://www.matweb.com/ http://www.matweb.com/] [http://matweb.com/reference/terms.aspx gratuit] Base de données de matériaux contenant des milliers de valeurs
* [https://www.uuidgenerator.net/ Générateur d'UUID] pour créer des UUID uniques pour les nouveaux modèles. Un UUID de version 4 est recommandé.

<span id="Properties"></span>
== Propriétés ==

Contrairement à la norme précédente, les propriétés des matériaux sont clairement définies. Elles ont été conçues pour être granulaires et extensibles. Les propriétés peuvent hériter de plusieurs propriétés, en ajoutant uniquement ce qui est différent. Cela améliorera la recherche et simplifiera la mise en œuvre.

Actuellement, il n'existe pas d'éditeur dédié aux propriétés. Elles peuvent être modifiées à l'aide de n'importe quel outil YAML ou d'un éditeur simple tel que nano ou Notepad.

Les fichiers de définition des propriétés sont appelés modèles.

<span id="Example_Property_Model_YAML_file"></span>
=== Exemple de fichier modèle des propriétés YAML ===

{{Code|code=
Model:
  Name: 'Linear Elastic'
  UUID: '7b561d1d-fb9b-44f6-9da9-56a4f74d7536'
  URL: 'https://en.wikipedia.org/wiki/Linear_elasticity'
  Description: >
    Materials that are linearly elastic obey Hooke's law i.e. the stress and
    strain relationship is linear
  DOI: "10.1016/j.ijplas.2004.06.004"
  Inherits:
    - Density:
      UUID: '454661e5-265b-4320-8e6f-fcf6223ac3af'
    - IsotropicLinearElastic:
      UUID: 'f6f9e48c-b116-4e82-ad7f-3659a9219c50'
  AngleOfFriction:
    Type: 'Quantity'
    Units: 'deg'
    URL: 'https://en.wikipedia.org/wiki/Friction#Angle_of_friction'
    Description: >
      Further information can be found at
      https://en.wikipedia.org/wiki/Mohr%E2%80%93Coulomb_theory
  CompressiveStrength:
    Type: 'Quantity'
    Units: 'kPa'
    URL: 'https://en.wikipedia.org/wiki/Compressive_strength'
    Description: "Compressive strength in [FreeCAD Pressure unit]"
}}

Plutôt que d'un grand fichier de définition monolithique, les propriétés sont granulaires, généralement axées sur une tâche spécifique. Les modèles se divisent en deux catégories de base :
* Modèles physiques : identifiés par le mot-clé « Model » comme indiqué ici, ils définissent les propriétés physiques du matériau
* Modèles d'apparence : identifiés par le mot-clé « AppearanceModel », ils définissent la manière dont le matériau sera affiché.

Chaque modèle possède un identifiant unique, ou UUID, qui est utilisé pour le référencer en interne. La cohérence de cet UUID est importante, car le modifier pour un document peut également affecter d'autres documents. En règle générale, les ajouts à la définition ne nécessitent pas de changement d'identifiant, car ils peuvent toujours être utilisés dans d'autres documents, mais les changements de valeur nécessiteraient un nouvel UUID.

Une URL facultative peut renvoyer vers une description détaillée de la propriété du matériau décrite. Étant donné qu'il s'agit d'une description de la propriété et non du matériau lui-même, elle doit être assez générique à ce stade. Une description plus courte, généralement d'une ou deux lignes, peut également être incluse dans la description du modèle.

Chaque document peut également inclure un DOI (Digital Object Identifier) qui renvoie, via https://www.doi.org/, à une publication scientifique ou à un élément similaire présentant un intérêt.

<span id="Inheritance"></span>
=== Héritage ===

L'héritage est une nouvelle fonction. Il existe deux principaux cas d'utilisation.

Un cas d'utilisation consiste à offrir la possibilité de modifier des modèles sans endommager d'autres documents. Par exemple, dans les cas où un type de propriété est différent, vous pouvez définir un modèle de propriété dérivé qui ne modifie que cette propriété spécifique sans endommager les documents existants qui y font référence.

Un deuxième cas d'utilisation consiste à regrouper les propriétés de manière à pouvoir les rechercher. Par exemple, tous les objets physiques ont une densité, et dans de nombreux cas, ce sera la seule information disponible pour ce matériau. Dans les cas où les propriétés d'élasticité linéaire sont disponibles, nous souhaiterions également les inclure. Dans un autre exemple où l'élasticité est différente selon les directions, comme le bois, nous pouvons définir un autre modèle dérivé de la densité. Les informations ne sont pas dupliquées dans les trois modèles de propriétés. De plus, nous pouvons effectuer une recherche sur les matériaux qui ont la propriété de densité et renvoyer les trois modèles.

L'exemple ci-dessus hérite de deux autres définitions de propriétés. Pour ce faire, il spécifie le mot-clé « Inherits » suivi d'une liste des noms et identifiants des modèles. S'il n'y a pas d'héritage, cette section peut être omise.

<span id="Properties"></span>
=== Propriétés ===

Les propriétés sont définies en fournissant le nom de la propriété, suivi d'une série de descripteurs. Le descripteur « Type » est toujours obligatoire. Les autres descripteurs ne sont obligatoires que pour compléter les informations relatives au type. L'URL et la description sont facultatives, mais recommandées dans la mesure du possible.

{| class="wikitable" style="width:80%;"
|+ Descripteurs de propriété
|-
! Name
! Description
|-
| Type
| Type de propriété. Voir la section suivante.
|-
| Columns
| Colonnes dans des tableaux 2D ou 3D. Voir la description ci-dessous.
|-
| Units
| Unités associées au type Quantity.
|-
| URL
| Lien vers une description détaillée de la propriété.
|-
| Description
| Brève description de la propriété.
|}

<span id="Property_Types"></span>
===Types de propriétés===

{| class="wikitable" style="width:80%;"
|+ Types de propriétés
|-
! Type Name
! Description
|-
| String
| Chaîne de caractères.
|-
| Integer
| Un entier non signé.
|-
| Float
| Un nombre à virgule flottante.
|-
| URL
| Une URL telle que https://www.freecad.org.
|-
| Quantity
| Une quantité FreeCAD qui comprend une valeur numérique à virgule flottante et des unités appropriées à la propriété.
|-
| Color
| Une chaîne sous la forme (r,g,b,a) ou (r,g,b) où r=rouge, g=vert, b=bleu, a=alpha sous forme de valeurs à virgule flottante comprises entre 0 et 1.
|-
| File
| Chemin d'accès à un fichier.
|-
| FileList
| Une liste de chemins d'accès à des fichiers. Voir la description ci-dessous.
|-
| Image
| Fichier image intégré enregistré au format Base64. Cela peut entraîner un fichier de carte de matériau très volumineux.
|-
| ImageList
| Une liste de fichiers image intégrés enregistrés au format Base64. Cela peut entraîner un fichier de carte de matériau très volumineux. Voir la description ci-dessous.
|-
| List
| Liste de valeurs de chaîne.
|-
| MultiLineString
| Chaîne de caractères s'étendant sur plusieurs lignes.
|-
| 2DArray
| Tableau à deux dimensions. Voir la description ci-dessous.
|-
| 3DArray
| Tableau à trois dimensions. Voir la description ci-dessous.
|}

<div lang="en" dir="ltr" class="mw-content-ltr">
=== Lists ===
</div>

<div lang="en" dir="ltr" class="mw-content-ltr">
There are three list types: 'List', 'FileList', and 'ImageList'. In reality, all three are the same except that they use different editors. For the 'FileList', each entry has a file chooser. Similarly, the 'ImageList' opens the image editor. 'ImageList' is different in that it is a very large string representation of an image and may produce extremely large material card files. Use with caution.
</div>

<div lang="en" dir="ltr" class="mw-content-ltr">
=== 2D Arrays ===
</div>

<div lang="en" dir="ltr" class="mw-content-ltr">
Arrays have some unique properties compared to other property types. Each of the array columns needs to be described, necessitating the addition of the 'Columns' property. The columns property is then a list of properties describing each column.
</div>

<div lang="en" dir="ltr" class="mw-content-ltr">
2D arrays have a minimum of 2 columns and only support the 'Quantity' property type. This may be expanded to other property types in the future.
</div>

<div lang="en" dir="ltr" class="mw-content-ltr">
Values in the array are specified by providing a value from the first column.
</div>

{{Code|code=
TestArray2D3Column:
  Type: '2DArray'
  Columns:
    Temperature:
      Type: 'Quantity'
      Units: 'C'
      URL: ''
      Description: "Temperature"
    Density:
      Type: 'Quantity'
      Units: 'kg/m^3'
      URL: 'https://en.wikipedia.org/wiki/Density'
      Description: "Density in [FreeCAD Density unit]"
    InitialYieldStress:
      Type: 'Quantity'
      Units: 'kPa'
      URL: ''
      Description: >
        Saturation stress for Voce isotropic hardening [FreeCAD Pressure unit]
  URL: ''
  Description: >
    2 Dimensional array showing density and initial yield stress with temperature
}}

<div lang="en" dir="ltr" class="mw-content-ltr">
=== 3D Arrays ===
</div>

<div lang="en" dir="ltr" class="mw-content-ltr">
3D arrays are similar in implementation to 2D arrays described in the previous sections. There is a 'Columns' keyword followed by a list of properties to describe the columns. The first column describes the depth or 3rd dimension of the array, with the remaining columns describing the remaining columns. This can be thought of as an indexed list of 2-dimensional arrays.
</div>

<div lang="en" dir="ltr" class="mw-content-ltr">
Since a 2-dimensional array requires a minimum of 2 dimensions, this will require a minimum of 3 columns.
</div>

<div lang="en" dir="ltr" class="mw-content-ltr">
Values in the array are accessed by first specifying the depth, then the value from the first column of the 2D array (the second column here).
</div>

{{Code|code=
TestArray3D:
  Type: '3DArray'
  Columns:
    Temperature:
      Type: 'Quantity'
      Units: 'C'
      URL: ''
      Description: "Temperature"
    Stress:
      Type: 'Quantity'
      Units: 'MPa'
      URL: ''
      Description: "Stress"
    Strain:
      Type: 'Quantity'
      Units: 'MPa'
      URL: ''
      Description: "Strain"
  URL: ''
  Description: >
    3 Dimensional array showing stress and strain as
    a function of temperature
}}

<div lang="en" dir="ltr" class="mw-content-ltr">
=== A note about arrays ===
</div>

<div lang="en" dir="ltr" class="mw-content-ltr">
These are a new feature, not previously available. Many capabilities may be added in the future that aren't currently implemented. For example, arrays with columns of strings are potentially useful but not currently implemented.
</div>

<div lang="en" dir="ltr" class="mw-content-ltr">
Interpolation is an important feature that isn't currently implemented. For example, an array with row entry values of 1 and 2 will only return exact matches. So a lookup of 1.5 will return an error. In the future, the arrays will determine an approximate value by interpolating from available data.
</div>

<div lang="en" dir="ltr" class="mw-content-ltr">
== Material Database ==
</div>

<div lang="en" dir="ltr" class="mw-content-ltr">
Given that the above standard is implemented, it wouldn't make sense to store all the properties again and again to objects. Basically, we can build up a Material database with the Name as a primary key. So if you have no special needs for your material, you just define e.g. Name=Steel, and FreeCAD can retrieve all properties from that DB. Every additional property you set in the map overrides the one from the DB.
</div>

<div lang="en" dir="ltr" class="mw-content-ltr">
In the future, we can host that database somewhere on the Web and build up a general open-source material database.
</div>

<div lang="en" dir="ltr" class="mw-content-ltr">
At the moment, I think of a database compiled in a mini dataset with a set of "basic" materials and its basic properties, and a SQLite-based full version.
</div>

<div lang="en" dir="ltr" class="mw-content-ltr">
== Material.py ==
</div>

<div lang="en" dir="ltr" class="mw-content-ltr">
Since handling material properties is tedious work, we should implement a Python front-end module called {{FileName|Material.py}} [[https://github.com/FreeCAD/FreeCAD/blob/master/src/Mod/Material/Material.py source]]. This will be the place to implement all kinds of helper methods for material handling.
* Calculation of mass out of volume and density
* Translation in different unit systems
* Calculation needed in a special application (such as FEM)
* And anything else we don't know yet
</div>

<div lang="en" dir="ltr" class="mw-content-ltr">
The module should be implemented in such a way that it can run in FreeCAD or stand alone on the command line (material-property-map has to be given as a Python map).
</div>

<div lang="en" dir="ltr" class="mw-content-ltr">
== The FreeCAD material card file format ==
</div>

<div lang="en" dir="ltr" class="mw-content-ltr">
Working with materials often involves importing/exporting material definitions. Therefore, a file format is needed. Since we have only a key/value form, we can use a simple and easy-to-read to read and parse file format. Therefore, the [https://en.wikipedia.org/wiki/INI_file ini-file] format is chosen. It's standardized, and there are already parsers available. For example, the [https://docs.python.org/2/library/configparser.html Config parser module in Python].
</div>

<div lang="en" dir="ltr" class="mw-content-ltr">
Each material definition resides in a file with the ending {{FileName|.FCMat}}. Some of these files are part of the FreeCAD source and get compiled into the binary. This is to save overhead in distribution and access. But also, files can be placed and searched in different places to allow additional non-standard material definitions.
</div>

<div lang="en" dir="ltr" class="mw-content-ltr">
=== Example .FCMat file ===
</div>

{{Code|code=
; last modified 1 April 2001 by John Doe

Name=Steel_Cast
Father=Steel
Source=Some material book everyone knows (or not); Some comment

[EN10027]
; steel standard EN 10027-1
Name=S235JR+AR

[Graphic]
EmissiveColor = 255,255,255
}}

<div lang="en" dir="ltr" class="mw-content-ltr">
== Material properties ==
</div>

<div lang="en" dir="ltr" class="mw-content-ltr">
Here's the description of the agreed material properties. Feel free to add a subsection for the material properties of your field of expertise.
</div>

<div lang="en" dir="ltr" class="mw-content-ltr">
=== General ===
</div>

<div lang="en" dir="ltr" class="mw-content-ltr">
{| class="wikitable" style="width:80%;"
|+ General material properties
|-
! Property name
! Description
! Unit/Data-Type
|-
| Name
| Unique name of the property, following the rules described above || ASCII string 7-bit
|-
| Father
| Name of the material group this material belongs to. If defined, this material inherits all the father's properties. Thus, if not defined, the father's properties will be used. || ASCII string 7-bit
|-
| Description
| A placeholder for a longer description of the material || ASCII string 7-bit
|-
| SpecificWeight
| The specific weight (also known as the unit weight) is the weight per unit volume of a material. see: [https://en.wikipedia.org/wiki/Specific_weight Specific weight]  || N/m^3
|-
| Vendor
| Specifies the brand or vendor of the material || ASCII string 7-bit
|-
| ProductURL
| An URL where to find more information about the material || ASCII string 7-bit
|-
| SpecificPrice
| The price per unit of this material. Units can vary a lot (USD/m<math>^3</math>, EUR/piece, etc.) || ASCII string 7-bit
|}
</div>

<div lang="en" dir="ltr" class="mw-content-ltr">
'''ToDos:''' add some properties with an ordering system for materials (metal, alloy, mineral, wood, ...)
</div>

<div lang="en" dir="ltr" class="mw-content-ltr">
=== Mechanical ===
</div>

<div lang="en" dir="ltr" class="mw-content-ltr">
{| class="wikitable" style="width:80%;"
|+ Material properties used in mechanical or structural engineering
|-
! Property name
! Description
! Unit/Data-Type
|-
| Young's Modulus
| Young's modulus, also known as the tensile modulus or elastic modulus, is a measure of the stiffness of an elastic material and is a quantity used to characterize materials. See: [https://en.wikipedia.org/wiki/Young%27s_modulus Young's modulus]
|| N/(mm^2) (MPa)
|-
| Poisson's Ratio
| The lateral contraction of materials under tension as a fraction of their elongation. See: [https://en.wikipedia.org/wiki/Poisson%27s_ratio Poisson's Ratio]
|| dimensionless (-)
|-
| Yield Strength
| The stress at which a ductile material (like steel) starts to develop plastic (irreversible) deformation. See: [https://en.wikipedia.org/wiki/Yield_(engineering) Yield Strength]
|| N/(mm^2) (MPa)
|-
| Ultimate Tensile Strength (UTS)
| The stress at which the material ruptures. For ductile materials, this may be after experiencing significant plastic deformation (see Yield Strength). For brittle materials, Yield strength and Ultimate Tensile Strength coincide. See: [https://en.wikipedia.org/wiki/Ultimate_tensile_strength UTS]
|| N/(mm^2) (MPa)
|-
| Yield Points
| Used in a FEM non-linear material object to describe a ductile uniaxial stress-strain curve of a material. The values are entered as (yield stress, plastic strain) tuples, where the first combination is (Yield Strength, 0) and the last (UTS, Fracture Strain). See: [https://en.wikipedia.org/wiki/Work_hardening YieldPoints]
|| (N/(mm^2) (MPa), dimensionless (-)
|-
| Uniaxial Compressive Strength (FCK)
| The compressive strength of concrete, defined as the strength of a 150 mm cube tested for 28 days. See [http://eurocodes.jrc.ec.europa.eu/doc/WS2008/EN1992_1_Walraven.pdf FCK]
|| N/(mm^2) (MPa)
|-
| Friction Angle (PHI)
| The angle of internal friction of a granular material like sand or concrete, as used in the Mohr-Coulomb yield criterion. See [https://en.wikipedia.org/wiki/Mohr%E2%80%93Coulomb_theory PHI]
|| °
|-
| Hardness
| A measure of the material's resistance to localized plastic (permanent) deformations caused by indentation (pressing) or scratching (abrasion). See [https://en.wikipedia.org/wiki/Hardness Hardness]
|| no dedicated units in FreeCAD
|-
| EN-10027-1
| In the case of steel materials, the [https://en.wikipedia.org/wiki/Steel_grades Steel grade] as defined in the [https://en.wikipedia.org/wiki/European_Committee_for_Standardization European standard] No. 10027-1. || string ASCII 7-bit
|}
</div>

<div lang="en" dir="ltr" class="mw-content-ltr">
'''ToDos:''' add further properties needed for mechanical design.
</div>

<div lang="en" dir="ltr" class="mw-content-ltr">
=== Graphical ===
</div>

<div lang="en" dir="ltr" class="mw-content-ltr">
This section defines material properties that are related to the visual appearance of the material.
</div>

<div lang="en" dir="ltr" class="mw-content-ltr">
{| class="wikitable" style="width:80%;"
|+ visual appearance
|-
! Property name
! Description
! Unit/Data-Type
|-
| AmbientColor
| Ambient color in the Coin3D color model|| float,float,float range: 0.0-1.0
|-
| DiffuseColor
| Diffuse color in the Coin3D color model|| float,float,float range: 0.0-1.0
|-
| SpecularColor
| Specular color in the Coin3D color model|| float,float,float range: 0.0-1.0
|-
| EmissiveColor
| Emissive color in the Coin3D color model|| float,float,float range: 0.0-1.0
|-
| SectionColor
| Color shown when the material is cut in the Coin3D color model|| float,float,float range: 0.0-1.0
|-
| Shininess
| Ambient color in the Coin3D color model|| float range: 0.0-1.0
|-
| Transparency
| Ambient color in the Coin3D color model|| float range: 0.0-1.0
|-
| VertxShader
| Vertex shader program as defined in [http://en.wikipedia.org/wiki/OpenGL_Shading_Language GLSL] || multi line string ASCII 7-bit
|-
| FragmentShader
| Fragment shader program as defined in [http://en.wikipedia.org/wiki/OpenGL_Shading_Language GLSL] || multi line string ASCII 7-bit
|}
</div>

<div lang="en" dir="ltr" class="mw-content-ltr">
=== Thermal ===
</div>

<div lang="en" dir="ltr" class="mw-content-ltr">
{| class="wikitable" style="width:80%;"
|+ Thermal properties
|-
! Property name
! Description
! Unit/Data-Type
|-
| ThermalConductivity
| The [https://en.wikipedia.org/wiki/Thermal_conductivity thermal conductivity (R or lambda coefficient)] indicating the material's ability to transfer heat. || W/(m*K)
|-
| ThermalExpansionCoefficient
| The [https://en.wikipedia.org/wiki/Thermal_expansion Thermal expansion coefficient] describing the material's increase in size due to an increase in temperature. || µm/(m*K)
|-
| SpecificHeat
| The [https://en.wikipedia.org/wiki/Specific_heat_capacity Specific heat capacity] indicating the amount of heat needed to increase the temperature of one unit of mass of the material by one unit. || J/(kg*K)
|}
</div>

<div lang="en" dir="ltr" class="mw-content-ltr">
=== Architecture and BIM ===
</div>

<div lang="en" dir="ltr" class="mw-content-ltr">
{| class="wikitable" style="width:80%;"
|+ Material properties used in architectural design
|-
! Property name
! Description
! Unit/Data-Type
|-
| StandardCodeXXXX
| Where XXXX is the name of the standard (for example, taken from [https://github.com/Moult/IfcClassification/tree/master/ifc the BlenderBIM standards repository]). For example, StandardCodeUniclass2. The value is the specific code of this material in the given standard. This property can appear several times, each with a different standard code|| string ASCII 7-bit
|-
| FireStandard
| The fire rating standard used in the material|| string ASCII 7-bit
|-
| FireClass
| The [https://en.wikipedia.org/wiki/Fire-resistance_rating fire resistance class] of the material in the above standard|| string ASCII 7-bit
|-
| SoundTransmissionClass
| The sound transmission class of this material || string ASCII 7-bit
|-
| Finish
| The type of finishing/coating of this material|| string ASCII 7-bit
|-
| Color
| The color specification of this material. This is not necessarily the color to display in the viewport, but might be, for example, the color name specified in the supplier's catalog|| string ASCII 7-bit
|-
| UnitsArea
| The number of units of this material necessary to fill a certain area. For example, in the case of a brick, 45 bricks/m²|| units/m^2
|}
</div>

<div lang="en" dir="ltr" class="mw-content-ltr">
== TODO ==
</div>

<div lang="en" dir="ltr" class="mw-content-ltr">
* add sustainability & LEED properties
</div>


[[Category:Developer{{#translation:}}]]
[[Category:Developer Documentation{{#translation:}}]]
[[Category:Roadmap{{#translation:}}]]
{{BIM Tools navi{{#translation:}}}}
{{FEM Tools navi{{#translation:}}}}
[[Category:BIM{{#translation:}}]]
{{Userdocnavi{{#translation:}}}}
[[Category:File_Formats{{#translation:}}]]