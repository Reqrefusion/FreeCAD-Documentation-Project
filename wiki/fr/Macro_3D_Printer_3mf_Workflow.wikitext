<languages/>
{{Macro/fr
|Name=Macro_3D_Printer_3mf_Workflow
|Name/fr=Macro_3D_Printer_3mf_Workflow
|Description=Macro de FreeCAD permettant d'exporter des fichiers 3MF lisses et de conserver tous les paramètres d'impression du slicer, avec un flux de travail automatique vers votre slicer préféré.
|Author=2cv001
|Version=00.02
|Date=2026-02-14
|FCVersion=Toutes
|Download=
[https://wiki.freecad.org/images/3/32/Macro_3D_Printer_3mf_Workflow.png Icône de la barre d'outils]
[https://raw.githubusercontent.com/2cv001/3D_printer_3mf_workflow/refs/heads/main/3D_Printer_3mf_Workflow.FCMacro Macro 3D_Printer_3mf_Workflow]
[https://raw.githubusercontent.com/2cv001/3D_printer_3mf_workflow/refs/heads/main/3D_Printer_3mf_Workflow_ConfigIni.FCMacro 3D_Printer_3mf_Workflow_ConfigIni.FCMacro]
}}

== Description ==

Macro de FreeCAD permettant d'exporter des fichiers 3MF lisses et de conserver tous les paramètres d'impression du slicer, avec un flux de travail automatique vers votre slicer préféré.

{{Codeextralink|https://raw.githubusercontent.com/2cv001/3D_printer_3mf_workflow/main/3D_Printer_3mf_Workflow.FCMacro}}

Description plus détaillée :

https://github.com/2cv001/3D_printer_3mf_workflow/blob/main/README.md

<span id="Purpose"></span>
=== Objectif ===

Cette macro automatise et améliore le flux de travail d'impression 3D depuis FreeCAD vers votre slicer en :
* Générant des impressions 3D lisses sans facettes visibles.
* '''Conservant les paramètres d'impression (température, supports, vitesse…)''' directement dans le projet FreeCAD.
* Lançant des programmes externes pour rationaliser l'ensemble du processus : FreeCAD → Slicer → Impression.

Cette macro est la remplaçante de la macro 3d_printer_workflow.

 La macro 3D_Printer_Workflow permettait déjà de produire des exports lisses, sans facettes. Sa principale limitation était qu’elle s’appuyait sur des fichiers STL, qui ne peuvent pas stocker les paramètres d’impression ou du slicer.

Cette macro utilise des fichiers .3mf, ce qui permet d’enregistrer et de réutiliser tous les paramètres d’impression.

Afin de conserver les fonctions essentielles de la macro précédente, cette version offre également une option d'exportation STL avec des paramètres de tessellation ajustables, permettant une génération fluide des maillages, comme auparavant.

<span id="Limitation"></span>
===Limitation===

La version actuelle ne permet d'exporter qu'un seul objet, mais vous pouvez contourner cette limitation en utilisant des liens (par exemple, un groupe simple) pour combiner plusieurs objets en un seul.

<span id="Principle_of_smoothing"></span>
=== Principe du lissage ===

[[File:Macro_3D_Printer_Workflow_With_Facets.png]]
{{Caption|Avec des facettes visibles}}

[[File:Macro_3D_Printer_Workflow_Without_Facets.png]]
{{Caption|Sans les facettes visibles}}

La macro exporte les objets sélectionnés vers un fichier 3MF à l'aide des paramètres de tessellation spécifiés (LinearDeflection et AngularDeflection). Elle génère des objets maillés temporaires pour le processus d'exportation, puis les supprime automatiquement par la suite.

<span id="Launching_other_programs_or_commands"></span>
=== Lancement d'autres programmes ou commandes === 

La macro vous permet de définir des commandes personnalisées qui seront exécutées automatiquement après la génération du fichier 3MF. Cette fonction est facultative et peut être utilisée pour automatiser des étapes supplémentaires dans votre flux de travail, telles que :
* copier le fichier 3MF généré vers un autre emplacement
* allumer votre imprimante 3D via une prise intelligente
* allumer une lumière
* préchauffer le plateau d'impression
* envoyer une requête HTTP à votre système domotique
* lancer un script ou un outil externe

<span id="Principle_diagram"></span>
== Schéma de principe ==

[[File:Principe Macro 3D Printer 3mf Workflow.png]]

<span id="Setup"></span>
== Installation ==

Une macro d'aide dédiée est fournie pour faciliter la configuration. Vos commandes sont stockées dans un fichier .ini utilisé par le flux de travail.

Le bouton ⚙️ dans la fenêtre d'options vous permet à la fois d'installer et d'ouvrir la macro de configuration (3D_Printer_3mf_Workflow_ConfigIni.FCMacro).
* Remplissez les champs dans la fenêtre de configuration
* Passez votre souris sur le titre d'une colonne pour afficher l'aide contextuelle
* Chaque commande que vous définissez sera exécutée dans l'ordre après la création du fichier 3MF.

[[File:Macro_3D_Printer_3mf_workflow_capture_écrant1.png|alt=Macro_3D_Printer_3mf_workflow capture écrant]]

<span id="Using_%PROJECT%,_%PROJECTDIR%,_and_%PROJECTNAME%_in_user_commands"></span>
=== Utilisation de %PROJECT%, %PROJECTDIR% et %PROJECTNAME% dans les commandes utilisateur ===

Lorsque vous définissez des commandes de post-traitement personnalisées dans le flux de travail, vous pouvez utiliser trois espaces réservés spéciaux. Ces espaces réservés sont automatiquement remplacés par des valeurs dérivées de votre fichier de projet FreeCAD.

<span id="Available_placeholders"></span>
== Emplacements disponibles ==

Emplacements et leur signification
* %PROJECT% : chemin d'accès complet du projet FreeCAD sans extension
* %PROJECTDIR% : dossier contenant le projet FreeCAD
* %PROJECTNAME% : nom du fichier de projet sans extension

<span id="Examples"></span>
== Exemples ==

Copiez le fichier 3MF généré à côté du projet :

<code>
copy "%PROJECT%.3mf" "%PROJECTDIR%/backup/%PROJECTNAME%.3mf"
</code>

Lancez un script stocké dans le dossier du projet :

<code>python "%PROJECTDIR%/scripts/postprocess.py" "%PROJECT%.3mf"</code>

Envoyez une requête HTTP en utilisant le nom du projet :

<code>
curl "http://myserver/api/start?job=%PROJECTNAME%"
</code>

Allumez une prise intelligente Shelly Gen 1

<code>
curl "http://192.168.xxx.xxx/relay/0?turn=on"
</code>

Gen2

<code>
http://192.168.xxx.xxx/rpc/Switch.Set?id=0&on=true
</code>

Ou si votre appareil est protégé par un mot de passe :

<code>
curl -u admin:yourpassword "http://192.168.xxx.xx/rpc/Switch.Set?id=0&on=true"
</code>

<span id="Usage"></span>
== Utilisation ==

Plus d'informations sur https://github.com/2cv001/3D_printer_3mf_workflow 

== Script == 

ToolBar Icon [[Image:Macro_3D_Printer_3mf_Workflow.png]]

=== Code ===

ver 00.02 2026/02/14 by 2cv001 '''3D_Printer_3mf_Workflow.FCMacro'''

<span id="Download"></span>
==== Téléchargement ====

{{CodeDownload|https://raw.githubusercontent.com/2cv001/3D_printer_3mf_workflow/main/3D_Printer_3mf_Workflow.FCMacro| Download latest version of the macro}}