<languages/>
{{Macro/fr
|Name=Macro_3D_Printer_3mf_Workflow
|Name/fr=Macro_3D_Printer_3mf_Workflow
|Description=Macro de FreeCAD permettant d'exporter des fichiers 3MF lisses et de conserver tous les paramètres d'impression du slicer, avec un flux de travail automatique vers votre slicer préféré.
|Author=2cv001
|Version=00.02
|Date=2026-02-14
|FCVersion=Toutes
|Download=
[https://wiki.freecad.org/images/3/32/Macro_3D_Printer_3mf_Workflow.png Icône de la barre d'outils]
[https://raw.githubusercontent.com/2cv001/3D_printer_3mf_workflow/refs/heads/main/3D_Printer_3mf_Workflow.FCMacro Macro 3D_Printer_3mf_Workflow]
[https://raw.githubusercontent.com/2cv001/3D_printer_3mf_workflow/refs/heads/main/3D_Printer_3mf_Workflow_ConfigIni.FCMacro 3D_Printer_3mf_Workflow_ConfigIni.FCMacro]
}}

== Description ==

Macro de FreeCAD permettant d'exporter des fichiers 3MF lisses et de conserver tous les paramètres d'impression du slicer, avec un flux de travail automatique vers votre slicer préféré.

{{Codeextralink|https://raw.githubusercontent.com/2cv001/3D_printer_3mf_workflow/main/3D_Printer_3mf_Workflow.FCMacro}}

Description plus détaillée :

https://github.com/2cv001/3D_printer_3mf_workflow/blob/main/README.md

<span id="Purpose"></span>
=== Objectif ===

Cette macro automatise et améliore le flux de travail d'impression 3D depuis FreeCAD vers votre slicer en :
* Générant des impressions 3D lisses sans facettes visibles.
* '''Conservant les paramètres d'impression (température, supports, vitesse…)''' directement dans le projet FreeCAD.
* Lançant des programmes externes pour rationaliser l'ensemble du processus : FreeCAD → Slicer → Impression.

Cette macro est la remplaçante de la macro 3d_printer_workflow.

Alors que la version précédente permettait des exportations lisses et des lancements de programmes, elle reposait sur des fichiers .stl et ne pouvaient pas stocker les paramètres d'impression.

Cette macro utilise des fichiers .3mf, ce qui permet de conserver et de réutiliser l'intégralité de la géométrie et de la configuration d'impression.

Afin de conserver les fonctions essentielles de la macro précédente, cette version offre également une option d'exportation STL avec des paramètres de tessellation ajustables, permettant une génération fluide des maillages, comme auparavant.

<span id="Limitation"></span>
===Limitation===

La version actuelle ne permet d'exporter qu'un seul objet, mais vous pouvez contourner cette limitation en utilisant des liens (par exemple, un groupe simple) pour combiner plusieurs objets en un seul.

<span id="Principle_of_smoothing"></span>
=== Principe du lissage ===

[[File:Macro_3D_Printer_Workflow_With_Facets.png]]
{{Caption|Avec des facettes visibles}}

[[File:Macro_3D_Printer_Workflow_Without_Facets.png]]
{{Caption|Sans les facettes visibles}}

La macro exporte les objets sélectionnés vers un fichier 3MF à l'aide des paramètres de tessellation spécifiés (LinearDeflection et AngularDeflection). Elle génère des objets maillés temporaires pour le processus d'exportation, puis les supprime automatiquement par la suite.

<span id="Launching_other_programs_or_commands"></span>
=== Lancement d'autres programmes ou commandes === 

La macro vous permet de définir des commandes personnalisées qui seront exécutées automatiquement après la génération du fichier 3MF. Cette fonction est facultative et peut être utilisée pour automatiser des étapes supplémentaires dans votre flux de travail, telles que :
* copier le fichier 3MF généré vers un autre emplacement
* allumer votre imprimante 3D via une prise intelligente
* allumer une lumière
* préchauffer le plateau d'impression
* envoyer une requête HTTP à votre système domotique
* lancer un script ou un outil externe

<span id="Principle_diagram"></span>
== Schéma de principe ==

[[File:Principe Macro 3D Printer 3mf Workflow.png]]

<div lang="en" dir="ltr" class="mw-content-ltr">
== Setup ==
</div>

<div lang="en" dir="ltr" class="mw-content-ltr">
A dedicated helper macro is provided to make configuration easy. Your commands are stored in an .ini file used by the workflow.
</div>

<div lang="en" dir="ltr" class="mw-content-ltr">
The ⚙️ button in the options window allows you to both install and open the configuration macro (3D_Printer_3mf_Workflow_ConfigIni.FCMacro).
* Fill in the fields in the configuration window
* Hover your mouse over a column title to display help tooltips
* Each command you define will be executed in order after the 3MF file is produced.
</div>

[[File:Macro_3D_Printer_3mf_workflow_capture_écrant1.png|alt=Macro_3D_Printer_3mf_workflow capture écrant]]

<div lang="en" dir="ltr" class="mw-content-ltr">
=== Using %PROJECT%, %PROJECTDIR%, and %PROJECTNAME% in user commands ===
</div>

<div lang="en" dir="ltr" class="mw-content-ltr">
When you define custom post‑processing commands in the workflow, you can use three special placeholders.
These placeholders are automatically replaced by values derived from your FreeCAD project file.
</div>

<div lang="en" dir="ltr" class="mw-content-ltr">
== Available placeholders ==
</div>

<div lang="en" dir="ltr" class="mw-content-ltr">
Placeholder	Meaning
%PROJECT%	Full path of the FreeCAD project without extension
%PROJECTDIR%	Folder containing the FreeCAD project
%PROJECTNAME%	Project file name without extension
</div>

<div lang="en" dir="ltr" class="mw-content-ltr">
== Examples ==
</div>

<div lang="en" dir="ltr" class="mw-content-ltr">
Copy the generated 3MF file next to the project :
</div>

<div lang="en" dir="ltr" class="mw-content-ltr">
<code>
copy "%PROJECT%.3mf" "%PROJECTDIR%/backup/%PROJECTNAME%.3mf"
</code>
</div>

<div lang="en" dir="ltr" class="mw-content-ltr">
Run a script stored in the project folder :
</div>

<div lang="en" dir="ltr" class="mw-content-ltr">
<code>python "%PROJECTDIR%/scripts/postprocess.py" "%PROJECT%.3mf"</code>
</div>

<div lang="en" dir="ltr" class="mw-content-ltr">
Send an HTTP request using the project name :
</div>

<div lang="en" dir="ltr" class="mw-content-ltr">
<code>
curl "http://myserver/api/start?job=%PROJECTNAME%"
</code>
</div>

<div lang="en" dir="ltr" class="mw-content-ltr">
Turn on a Shelly smart plug Gen 1
</div>

<div lang="en" dir="ltr" class="mw-content-ltr">
<code>
curl "http://192.168.xxx.xxx/relay/0?turn=on"
</code>
</div>

<div lang="en" dir="ltr" class="mw-content-ltr">
Gen2
</div>

<div lang="en" dir="ltr" class="mw-content-ltr">
<code>
http://192.168.xxx.xxx/rpc/Switch.Set?id=0&on=true
</code>
</div>

<div lang="en" dir="ltr" class="mw-content-ltr">
Or if your device have a password :
</div>

<div lang="en" dir="ltr" class="mw-content-ltr">
<code>
curl -u admin:yourpassword "http://192.168.xxx.xx/rpc/Switch.Set?id=0&on=true"
</code>
</div>

<div lang="en" dir="ltr" class="mw-content-ltr">
== Usage ==
</div>

<div lang="en" dir="ltr" class="mw-content-ltr">
More details at https://github.com/2cv001/3D_printer_3mf_workflow
</div> 

<div lang="en" dir="ltr" class="mw-content-ltr">
== Script ==
</div> 

ToolBar Icon [[Image:Macro_3D_Printer_3mf_Workflow.png]]

<div lang="en" dir="ltr" class="mw-content-ltr">
=== Code ===
</div>

ver 00.02 2026/02/14 by 2cv001 '''3D_Printer_3mf_Workflow.FCMacro'''

<div lang="en" dir="ltr" class="mw-content-ltr">
==== Download ====
</div>

{{CodeDownload|https://raw.githubusercontent.com/2cv001/3D_printer_3mf_workflow/main/3D_Printer_3mf_Workflow.FCMacro| Download latest version of the macro}}