<languages/>

{{Docnav/fr
|[[Draft_Split/fr|Scinder]]
|[[Draft_Downgrade/fr|Désagréger]]
|[[Draft_Workbench/fr|Atelier Draft]]
|IconL=Draft_Split.svg
|IconR=Draft_Downgrade.svg
|IconC=Workbench_Draft.svg
}}

{{GuiCommand/fr
|Name=Draft Upgrade
|Name/fr=Draft Agréger
|MenuLocation=Draft/BIM : Modification → Agréger
|Workbenches=[[Draft_Workbench/fr|Draft]], [[BIM_Workbench/fr|BIM]]
|Shortcut={{KEY|U}} {{KEY|P}}
|SeeAlso=[[Draft_Downgrade/fr|Draft Désagréger]]
}}

==Description==

La commande [[Image:Draft_Upgrade.svg|24px]] '''Draft Agréger''' agrège les objets sélectionnés. Le résultat dépend du nombre d'objets sélectionnés et de leur type. La commande peut par exemple fusionner des éléments et créer des faces. Il vaut la peine d'essayer d'agréger une sélection plusieurs fois pour voir si un meilleur résultat peut être obtenu. Voir l'exemple dans l'image. Notez que tous les objets ne peuvent pas être agrégés. Cette commande est le pendant de la commande [[Draft_Downgrade/fr|Draft Désagréger]].

[[Image:Draft_Upgrade_example.jpg|400px]]
{{Caption|Une polyligne ouverte non modifiable est transformée en polyligne fermée, puis en une face. Une polyligne carrée fermée non modifiable est également agrégée en face. Les deux faces sont ensuite agrégées pour créer un composé, qui est finalement agrégé en une polyligne Draft modifiable.}}

<span id="Usage"></span>
==Utilisation==

# Vous pouvez sélectionner un ou plusieurs objets.
# Il existe plusieurs façons de lancer la commande :
#* Appuyez sur le bouton {{Button|[[Image:Draft_Upgrade.svg|16px]] [[Draft_Upgrade/fr|Agréger]]}}.
#* [[Draft_Workbench/fr|Draft]] : sélectionnez l'option {{MenuCommand|Modification → [[Image:Draft_Upgrade.svg|16px]] Agréger}} du menu.
#* [[BIM_Workbench/fr|BIM]] : sélectionnez l'option {{MenuCommand|Modification → [[Image:Draft_Upgrade.svg|16px]] Agréger}} du menu.
#* Utilisez le raccourci clavier : {{KEY|U}} puis {{KEY|P}}.
# Si vous n'avez pas encore sélectionné d'objet : sélectionnez un objet dans la [[3D_view/fr|vue 3D]].

<span id="Notes"></span>
==Remarques==

* Les [[Draft_Line/fr|Draft Lignes]] et [[Draft_Wire/fr|Draft Polylignes]] peuvent être jointes avec cette commande, mais aussi avec la commande [[Draft_Join/fr|Draft Joindre]] ou la commande [[Draft_Wire/fr|Draft Polylignes]] .

<span id="Scripting"></span>
==Script==

Voir aussi : [https://freecad.github.io/SourceDoc/ Autogenerated API documentation] et [[FreeCAD_Scripting_Basics/fr|FreeCAD Débuter avec les scripts]].

Pour agréger des objets, utilisez la méthode {{incode|upgrade}} de l'atelier Draft.

{{Code|code=
upgrade_list = upgrade(objects, delete=False, force=None)
}}

* {{incode|objects}} contient les objets à agréger. Il s'agit soit d'un objet unique, soit d'une liste d'objets.
* Si {{incode|delete}} est {{incode|True}}, les objets sources sont supprimés.
* {{incode|force}} force une certaine manière d'agréger en appelant une fonction interne spécifique. Cela peut être : {{incode|"makeCompound"}}, {{incode|"closeGroupWires"}}, {{incode|"makeSolid"}}, {{incode|"closeWire"}}, {{incode|"turnToParts"}}, {{incode|"makeFusion"}}, {{incode|"makeShell"}}, {{incode|"makeFaces"}}, {{incode|"draftify"}}, {{incode|"joinFaces"}}, {{incode|"makeSketchFace"}}, {{incode|"makeWires"}} ou {{incode|"turnToLine"}}.
* {{incode|upgrade_list}} est retourné. C'est une liste contenant deux listes : une liste de nouveaux objets et une liste d'objets à supprimer. Si {{incode|delete}} est {{incode|True}}, la seconde liste est vide.

Exemple :

{{Code|code=
import FreeCAD as App
import Draft

doc = App.newDocument()

circle = Draft.make_circle(1000)
rectangle = Draft.make_rectangle(2000, 800)
doc.recompute()

add_list1, delete_list1 = Draft.upgrade([circle, rectangle], delete=False)

line1 = Draft.make_line(App.Vector(2000, 0, 0), App.Vector(2500, 1500, 0))
line2 = Draft.make_line(App.Vector(2500, 1500, 0), App.Vector(3000, -1000, 0))
doc.recompute()

add_list2, delete_list2 = Draft.upgrade([line1, line2], delete=False)

simple_wire = add_list2[0]
add_list3, delete_list3 = Draft.upgrade(simple_wire, delete=False)

closed_wire = add_list3[0]
add_list4, delete_list4 = Draft.upgrade(closed_wire, delete=False)

face = add_list4[0]
add_list5, delete_list5 = Draft.upgrade(face, delete=False)

doc.recompute()
}}


{{Docnav/fr
|[[Draft_Split/fr|Scinder]]
|[[Draft_Downgrade/fr|Désagréger]]
|[[Draft_Workbench/fr|Atelier Draft]]
|IconL=Draft_Split.svg
|IconR=Draft_Downgrade.svg
|IconC=Workbench_Draft.svg
}}

{{Draft Tools navi{{#translation:}}}}
{{Userdocnavi{{#translation:}}}}