<languages/>

{{TutorialInfo
|Topic=Ancrage
|Level=Débutant et intermédiaire
|Author=Bance
|Time=1 heure
|FCVersion= V0.17 ou au delà
|Files=[https://github.com/BanceFC/Examples/blob/master/AttachmentTutorial.FCStd Basic Attachment Tutorial.FCStd]
}}



[[File:Attachment_Model.png|frame|centre|Le modèle terminé]]



Ce tutoriel devrait servir d'introduction à [[Image:Part_EditAttachment.svg|24px]] [[Part_EditAttachment/fr|Part Ancrage]]. Il n'est pas exhaustif mais nous espérons qu'il aidera les utilisateurs à se familiariser avec.

<div class="mw-translate-fuzzy">
Ancrage est un utilitaire pour attacher un objet à un autre. Cela lie les propriétés de placement des deux objets, l'objet ancré suivra alors l'original (si son placement est modifié.) L'accent est mis sur l'atelier PartDesign et l'ancrage d'esquisses à d'autres esquisses. Il s'agit d'une méthode recommandée pour créer des modèles [[Feature_editing/fr#Conseils_pour_la_cr.C3.A9ation_de_mod.C3.A8les_robustes|''stables'']].<br/>
Ce tutoriel a été écrit pour la V0.19, mais devrait être valide pour toute version V0.17 et ultérieure. Cependant, les choses peuvent différer dans certains détails.<br/>
Le modèle original a été conçu par Md. Aminul Islam et téléchargé à partir d'ici : https://grabcad.com/library/50-cad-exercise-drawing-1 en tant que "Practice - 13".
</div>


<span id="Pre-requisites"></span>
==Prérequis==

<div class="mw-translate-fuzzy">
Avant de démarrer ce tutoriel l'utilisateur doit :
# Utiliser la version 0.17 ou supérieure.
# Être à l'aise pour naviguer dans la [[3D_view/fr|Vue 3D]].
# Être capable de créer et de contraindre une [[Sketcher_Workbench/fr|esquisse]].
# Avoir une connaissance de base de l'[[File:Workbench_PartDesign.svg|24px]] [[PartDesign Workbench/fr|Atelier PartDesign]].
# Avoir une connaissance de base des [[Expressions/fr|Expressions]].
</div>

<span id="Objectives"></span>
==Objectifs==

Le but de ce tutoriel est de montrer comment un modèle peut être construit en positionnant des esquisses par rapport à d'autres géométries à l'aide de certains des différents modes d'ancrage disponibles.

Bien qu'il soit possible d'utiliser la géométrie solide (sommets, arêtes et faces) pour la géométrie de référence, dans l'intérêt de ce qui est considéré comme une bonne pratique, ce tutoriel s'abstiendra de le faire. Voir [[Feature_editing/fr|Édition de fonctions]] pour plus d'explications.

<span id="Preliminaries"></span>
==Préliminaires==

<div class="mw-translate-fuzzy">
Avant de commencer, examinons comment nous devrions procéder pour construire ce modèle.
</div>

Quel que soit l'angle sous lequel nous le regardons, nous voyons un carré ou un rectangle avec un coin coupé.


[[File:AttachmentTD.png|frame|centre|La vue TechDraw]]


Il existe cependant un axe évident à partir duquel toutes les caractéristiques sont communes. 

Il est parfaitement possible de créer une géométrie de données ici et d'y attacher toutes les esquisses. Dans certains modèles, ce serait un choix judicieux, pour les besoins de ce tutoriel, nous nous limiterons Std Plans et aux esquisses.

Nous pourrions faire une esquisse sur n'importe lequel des grands plans. Nous pourrions inclure un coin coupé dans notre esquisse de base, mais laissons cela et incluons une esquisse et une poche supplémentaire, à des fins d'apprentissage.

[[File:CommonAxis.png|frame|centre|L'axe commun]]

<span id="Attachment"></span>
==Ancrage==

Nous commencerons par un bloc et nous enlèverons l'excédent à l'aide d'une cavité.

<div class="mw-translate-fuzzy">
Basculez vers l'atelier PartDesign, ouvrez un nouveau document, créez un corps et une nouvelle esquisse sur le plan XY.
</div>

Là, vous venez de faire un '''''ancrage'''''. Lorsque vous sélectionnez le plan sur lequel réaliser l'esquisse, c'est en fait ce qui est fait, le dialogue de sélection du plan n'est qu'une version simplifiée du dialogue d'ancrage, où tous les décalages sont fixés à zéro.

Sketch a rectangle. In version 0.17-0.21 the direction of the lines of the rectangle depends on how it is created. To get the same attachment results as in the images below, use the [[Sketcher_CreateRectangle_Center|centered rectangle]] tool, and for the first point pick the origin of the sketch, and for the second point the top-right corner of the rectangle. In version 1.0 and above the edges of rectangles have a fixed direction opposite to that in the images, which makes following this tutorial a little more challenging. This can be avoided by manually creating a clockwise rectangle with the [[Sketcher_CreatePolyline|polyline]] tool.

<div class="mw-translate-fuzzy">
Dessinez un rectangle, centrez-le sur l'origine, contraignez-le avec une longueur (horizontale) de 70 mm et nommez-le "length", contraignez-le encore avec une largeur (verticale) de 40 mm et nommez-le "width".
</div>

Sélectionner l'esquisse, presser le bouton {{Button|F2}} et le renommer "BaseSketch"


[[File:Sketch1.png|frame|centre|L'esquisse de base]]

[[#top|En haut]]

<span id="Attachment_offset"></span>
===Décalage de l'ancrage===

Si nous laissons l'esquisse où elle est, l'exemple serait trop facile, alors changeons la position de l'esquisse en modifiant le décalage de son ancrage.

<div class="mw-translate-fuzzy">
Dans la vue combinée (onglet Données), regardez dans la section Attachment du volet des propriétés, ici nous pouvons voir que BaseSketch a un support de XY_Plane et est attaché avec le mode Flat Face. Regardez plus bas et trouvez Attachment Offset (décalage d'ancrage) et développez-le, en cliquant sur le signe plus à côté.
</div>

Faire de même pour le sous-titre Position. Modifier le décalage X à 80 mm et le décalage Y à 90 mm.

[[File:comboview.png|frame|centre|Décalage d'ancrage]]

Le décalage d'ancrage est généralement utilisé en conjonction avec des expressions pour offrir une position paramétrique parallèle au plan, par exemple pour positionner une esquisse sur la face supérieure d'un bloc, en utilisant une expression (Pad.Length) pour le décalage axe Z.

L'esquisse peut maintenant être extrudée [[File:PartDesign_Pad.svg|24px]], supposons que la hauteur de l'extrusion doit être la même que la largeur de l'esquisse. Dans la boîte de dialogue '''Paramètres de protrusion''', sélectionnez la case '''Longueur''', appuyez sur {{KEY|<nowiki>=</nowiki>}} ou sélectionnez l'icône de fonction [[File:Bound-expression.svg|24px]] et tapez "'''Sketch.Constraints.width'''" ou "'''<<BaseSketch>>.Constraints.width'''", cette expression devrait donné "40 mm", puis cochez '''Symétrique au plan''' et appuyez sur la touche {{KEY|OK}}.


[[File:BasePad2.png|frame|centre|La protrusion de base]]


Faisons l'esquisse suivante, ce n'est pas vraiment important celle que nous choisissons, mais le plus facile est le triangle isocèle 20x20 qui empiète sur la longueur du bloc.

Faites une nouvelle esquisse, choisissez le plan que vous voulez (nous allons de toute façon changer son ancrage).

Dessinez le triangle, rendez les deux côtés égaux et contraignez sa longueur de la même manière que vous l'avez fait pour la longueur du pavé, mais cette fois, faites la formule "'''Sketch.Constraints.width/2'''" ou "'''<<BaseSketch>>.Constraints.width/2'''".

Il devrait rester deux degrés de liberté, à savoir la position par rapport à l'origine. Fixez l'un des coins à l'origine de sorte que l'esquisse ressemble à ceci:

[[File:IsoscelesSketch.png|frame|centre|Le premier triangle]]

[[#top|En haut]]

<span id="Changing_attachment"></span>
<div class="mw-translate-fuzzy">
===Changer l'ancrage===
</div>

Fermez l'esquisse. Renommez l'esquisse en l'appelant 'IsoscelesSketch'.
L'origine de l'esquisse est le point qui sera attaché dans le futur. Il est donc important de choisir comment l'esquisse est contrainte à l'origine. L'origine peut être considérée comme un crochet qui s'ancre à la référence. Nous pouvons ajuster la position de l'esquisse à l'aide de décalages, mais il est préférable de faire un choix judicieux dès le départ.

Nous allons maintenant changer le mode d'ancrage de l'esquisse dans notre modèle.

Sélectionnez la protrusion et rendez-la invisible, et rendez BaseSketch visible. Nous devons voir BaseSketch et nous voulons masquer la protrusion afin d'éviter de faire des sélections incorrectes.

La vue 3D devrait ressembler à quelque chose comme ceci :

[[File:TwoSketches.png|frame|centre|Deux esquisses]]

j'ai choisi XY comme plan de construction du triangle isocèle mais un autre plan peut être choisi.

Nous devons maintenant sélectionner IsoscelesSketch et accéder au volet des propriétés dans la vue Combo. Cliquez dans la case de valeur à côté de la propriété Map Mode, un bouton apparaît avec une ellipse {{Button|...}}.

[[File:MapModeSelect.png|frame|centre|Sélection du mode Map]]

Cliquez dessus et un volet de tâches s'ouvrira avec la boîte de dialogue Attachment.

[[File:AttachmentDialogue.png|frame|centre|Fenêtre de dialogue Ancrage]]


Maintenant on voit l'ancrage où l'esquisse a été créée (dans la boîte de dialogue sélection du plan).

Le bouton {{Button|Référence 1}} est en mode sélection, donc dans la vue 3D, sélectionnez l'un des côtés longs de l'esquisse de base.

<div class="mw-translate-fuzzy">
L'IsoscelesSketch s'attachera à la ligne que vous avez sélectionnée, et la fenêtre du mode d'attachement changera pour refléter les modes disponibles. Si le triangle pointe dans le mauvais sens, vous pouvez le corriger en cochant la case "Inverser les côtés" au bas de la boîte de dialogue (ou plus tard, après avoir fermé la boîte de dialogue, vous pouvez le modifier dans l'onglet de données des propriétés en réglant "Map Reversed" à "True").
</div>


[[File:NormalToEdgeIsosceles.png|frame|centre|Normale à l'arête isocèle]]


[[File:NormalToEdgeAttachment.png|frame|centre|Normale à l'arrête Attachment]]


Vous pouvez voir que l'IsocelesSketch a été attaché à la ligne sélectionnée au point que nous avons contraint à l'origine plus tôt. 

Cette notion de l'origine étant le point d'ancrage est importante, elle rend les modes d'attache très flexibles et peut être un outil puissant dans votre modélisation. 

Il peut être utilisé avec l'ajout de décalages pour positionner avec précision les esquisses sans dépendre de la géométrie générée et de tous les problèmes pouvant découler de leur utilisation.

FreeCAD essaie de prédire le mode d'ancrage pour vous et filtre les modes disponibles pour la sélection donnée.

Dans ce cas, les options sont "Désactivées", [[Part_EditAttachment/fr#Normal_.C3.A0_une_ar.C3.AAte|'''Normal à une arête''']] et [[Part_EditAttachment/fr#Inertie_2-3|Inertie 2-3]]. Normal à une arête est en gras et est considéré comme la sélection préférée. 

La zone de notification en haut de la boîte de dialogue affiche un message en vert indiquant le mode utilisé.

Les options grisées indiquent que d'autres sélections sont nécessaires pour les activer.

À ce stade, vous pouvez faire une autre sélection et voir la différence entre les modes. N'oubliez pas de revenir en mode "'''Normal To Edge'''" avant de poursuivre le tutoriel. 


L'IsocelesSketch est maintenant correctement positionné, confirmez et quittez le dialogue.

Vous pouvez maintenant [[PartDesign_Pocket/fr|découper]] l'esquisse. Choisissez le type ''À travers tous'' et selon l'orientation de votre esquisse l'option ''Inverser''.


[[File:Pocket.png|frame|centre|Découpe]]

[[#top|En haut]]

<span id="A_step_further"></span>
<div class="mw-translate-fuzzy">
===Un pas plus loin===
</div>


Créez l'esquisse suivante, les dimensions doivent être des expressions ("'''Sketch.Constraints.width'''","'''Sketch.Constraints.width/2'''" ou "'''<<BaseSketch>>.Constraints.width'''","'''<<BaseSketch>>.Constraints.width/2'''") et elle doit être contrainte à l'origine au sommet adjacent à l'hypoténuse et son côté le plus court. (Dans l'esquisse vide, si vous connaissez la {{Button|[[File:Sketcher CarbonCopy.svg|16px]] [[Sketcher_CarbonCopy/fr|Copie carbone]]}}, vous pouvez l'utiliser pour faire une copie de l'esquisse 'IsoscelesSketch' et modifiez ses paramètres en conséquence.)

Renommer l'esquisse RightAngleTriangleSketch.


[[File:FinalSketch.png|frame|centre|RightAngleTriangleSketch]]

<div class="mw-translate-fuzzy">
Encore une fois, nous devons masquer le solide, dans ce cas Pocket, et nous assurer que les deux esquisses sont visibles pour la sélection (laissez isocelesSketch invisible, cela ne fera que gêner!).
</div>

Sélectionner RightAngleTriangleSketch et ouvrer la boite de dialogue de l'ancrage.

Sélectionnez l'un des côtés courts des rectangles comme première référence.


[[File:RATNormalToEdge.png|frame|centre|RightAngleTriangleSketch mode Normal To Edge]]


<div class="mw-translate-fuzzy">
La vue 3D doit être similaire à l'image ci-dessus. Peu importe à quelle extrémité de la ligne le triangle est attaché (cela dépend de la façon dont le rectangle a été dessiné !)
</div>

Si vous avez choisi la mauvaise ligne, changez-la maintenant. Si le triangle pointe dans le mauvais sens, vous pouvez le corriger en cochant la case "Retourner les côtés" au bas de la fenêtre de dialogue (ou plus tard après avoir fermé la fenêtre de dialogue, il peut être modifié dans l'onglet des données des propriétés en définissant "Map Reversed" à "True").

Le RightAngleTriangleSketch est maintenant dans une position qui nous donnera la bonne géométrie après une opération de pocket, mais nous pouvons être un peu inventifs ici et positionner l'esquisse de manière à ce qu'il nous soit plus facile d'attacher plus tard la géométrie. Nous allons déplacer notre esquisse au milieu de la ligne afin qu'elle nous fournisse un sommet en haut du [[Glossary/fr#C|chanfrein]] d'angle.


Dans la boîte de dialogue d'attachement, nous allons changer le mode d'ancrage de [[Part_EditAttachment/fr#Normal_.C3.A0_une_ar.C3.AAte|'''Normal à une arête''']] à [[Part_EditAttachment/fr#Inertie_2-3|Inertie 2-3]]. Cela changera la position au centre de la ligne, cela dépasse le cadre de ce tutoriel pour décrire tous les modes d'ancrage, leurs descriptions peuvent être trouvées à la page [[File:Part_Attachment.svg|24px]] [[Part_EditAttachment/fr|Part Ancrage]]. Il est clair qu'inertia 2-3 utilise le centre de masse et fait l'affaire ici.

[[File:ADInertia.png|frame|centre|Boîte de dialogue Attachment en mode Inertia 2-3]]


[[File:3DInertia.png|frame|centre|RightAngleTriangleSketch mode Inertia 2-3]]


Le RightAngleTriangleSketch est maintenant correctement positionné, confirmez et quittez le dialogue.

Vous pouvez maintenant effectuer une opération de poche sur l'esquisse. Cette fois, utilisez Mirroir par rapport au plan.

[[File:2ndPocket.png|frame|centre|2ème poche]]

[[#top|En haut]]

<span id="Manipulating_attachment"></span>
<div class="mw-translate-fuzzy">
===Manipulation de l'ancrage===
</div>

En général il vaut mieux positionner nos esquisses simplement avec des modes d'ancrage. Mais il n'est pas toujours possible de positionner les esquisses exactement là où nous en avons besoin sans modifier le mode d'ancrage d'une manière ou d'une autre.

FreeCAD fournit un certain nombre de moyens de le faire.

<div class="mw-translate-fuzzy">
# [[Part_Part2DObject/fr#Property_Attachment_Offset|Attachment Offset]] permet le positionnement par rapport aux coordonnées locales du point d'ancrage. (où l'origine de l'esquisse positionnée est attachée).
# [[Part_Part2DObject/fr#Property_Map_Path|Map Path]] (Propriété dans l'onglet Données avec l'option Afficher tout activée) : permet le positionnement le long d'une arête sélectionnée.
# [[Part_Part2DObject/fr#Property_Map_Reversed|Flip Sides/Map Reversed]]. Miroir effectif de l'esquisse.
</div>

Pour notre esquisse finale, nous l'attacherons arbitrairement et corrigerons sa position à l'aide des modificateurs répertoriés ci-dessus.

Créez l'esquisse finale, les dimensions doivent être des expressions ("'''Sketch.Constraints.width'''","'''Sketch.Constraints.width/2'''" ou "'''<<BaseSketch>>.Constraints.width'''" , "'''<<BaseSketch>>.Constraints.width/2'''") et elle doit être contrainte à l'origine au sommet adjacent à l'hypothénuse et à son côté le plus court.

Renommer le sketch FinalSketch.

[[File:RightAngleTriangle.png|frame|centre|FinalSketch]]


Notez que FinalSketch a été contrainte à l'origine différemment. Sinon, nous aurions pu utiliser {{Button|[[File:Sketcher CarbonCopy.svg|16px]] [[Sketcher_CarbonCopy/fr|Copie carbone]]}} mais l'esquisse ne contient que trois lignes et cinq contraintes.

Une fois encore, nous devons masquer le solide, dans ce cas Pocket001, et nous assurer que les deux esquisses sont visibles pour la sélection (BaseSketch et FinalSketch).

Sélectionnez FinalSketch et ouvrez la boîte de dialogue d'ancrage, sélectionnez l'un des côtés courts des rectangles comme première référence.

[[File:NormalToEdgeFinal.png|frame|centre|FinalSketchAttachment]]


<div class="mw-translate-fuzzy">
La vue 3D doit être similaire à l'image ci-dessus. Peu importe à quelle extrémité de la ligne le triangle est attaché (cela dépend de la façon dont le rectangle a été dessiné !)
</div>

Maintenant, nous devons l'inverser, le translater de 90&deg; et le décaler vers le coin.

Au bas de la boîte de dialogue d'ancrage se trouve une case à cocher intitulée "Flip Sides", cochez cette case.

Le FinalSketch se réfléchit lui-même.

Nous allons maintenant translater de 90&deg;. À partir de l'illustration FinalSketch ci-dessus, nous pouvons voir que l'axe de révolution devrait être l'axe X. Dans le Wiki, cela s'appelle [[Tasks_Placement/fr#Roll|"Roulis"]]. N'oubliez pas que ceci est relatif au système de coordonnées local. Entrez 90&deg; dans la case "around X-axis" de la section décalage de la boîte de dialogue d'ancrage.


[[File:FSFlipRot.png|frame|centre|FinalSketch retourné et pivoté]]


[[File:FSFlipRotAD.png|frame|centre|Boîte de dialogue d'ancrage de FinalSketch]]

Nous pourrions utiliser le décalage de la direction Z - qui correspond maintenant à la direction Y opposée dans le système de coordonnées global - pour déplacer FinalSketch vers le coin, mais je voudrais démontrer une autre fonctionnalité.

Alors validons et fermons le dialogue pour l'instant.

[[#top|En haut]]

<span id="Map_Path_Parameter"></span>
===Paramètre Map Path===

Sélectionnez FinalSketch et regardez dans la vue combinée, le volet des propriétés dans la section attachment, juste en dessous de la propriété Map Mode se trouve le paramètre Map Path.


[[File:FinalSketchProperties.png|frame|centre|Panneau des propriétés de FinalSketch]]


Le paramètre par défaut est 0.0. Si nous le changeons en 1, l'esquisse sera mappée à l'autre extrémité de la ligne et 0.5 nous donne la moitié du chemin. Entrez 0.5 dans la colonne de valeur.

La combinaison de 'Normal To Edge' et le paramètre Map Path est très utile pour positionner les esquisses pour les lissages ou les balayages.


[[File:FinalSketchPosition.png|frame|centre|Position de FinalSketch]]

Vous pouvez maintenant effectuer une opération de poche sur l'esquisse. N'oubliez pas d'utiliser Mirroir par rapport au plan.


[[File:3rdPocket.png|frame|centre|3ème poche]]

[[#top|En haut]]

<span id="A_different_selection_mode"></span>
<div class="mw-translate-fuzzy">
===Un mode de sélection différent===
</div>

Jusqu'à présent, nous avons vu comment positionner des esquisses avec des modes d'attachement et des décalages, mais nous aurions pu utiliser des plans standard car le positionnement relatif était assez simple.

Maintenant, nous sommes confrontés à un problème plus difficile, comment pouvons-nous couper ce morceau qui reste ?


[[File:3rdPocketMarked.png|frame|centre|Résidus de coupe]]


Nous pouvons voir qu'il y a un plan qui passe par les coins du triangle rouge, ce serait simple si nous pouvions simplement le découper là.

Eh bien parce que nous avons fait attention à la façon dont nous avons positionné nos esquisses plus tôt, nous le pouvons!

Tout d'abord, rendez le solide invisible, en fait, rendez tout invisible sauf RightAngleTriangleSketch et FinalSketch.

Sélectionnez maintenant les trois points qui forment le plan, N'oubliez pas de maintenir la touche {{KEY|Ctrl}} (CMD sur un Mac) pendant la sélection.

[[File:TwoTriangles.png|frame|centre|Sélection]]

Lorsque vous appuyez sur {{Button|[[Image:PartDesign_Plane.svg|16px]] [[PartDesign_Plane/fr|Créer un plan de référence]]}}, le dialogue d'ancrage s'ouvrira montrant les trois points que vous avez sélectionnés comme références 1-3 et un mode 'Plane By 3 Points'.


[[File:DPAttachDia.png|frame|centre|Fenêtre de dialogue Ancrage]]

Confirmez et fermez la boîte de dialogue. Nous pouvons maintenant utiliser le plan de référence pour créer une esquisse, mais il n'est pas nécessaire d'utiliser le plan directement pour effectuer le pocket du matériau en excès.
Assurez-vous que le plan de référence est sélectionné et cliquez sur pocket, dans le dialogue de pocket sélectionnez "A travers tout" et "inversé". Fermez le dialogue et nous avons tous terminé.


[[File:FinishedArticle.png|frame|centre|L'objet fini]]

[[#top|En haut]]

<span id="Temporarily_attaching_to_a_generated_plane"></span>
===Ancrage temporaire à un plan généré===

Parfois, il est difficile de déterminer comment aligner l'esquisse ou le plan de référence sur la face générée sans réellement s'y attacher, ce qui, comme indiqué ci-dessus, peut être problématique. Une solution consiste à attacher à la géométrie générée, puis à modifier l'ancrage à l'un des plans de coordonnées. FreeCAD conservera intactes la position et l'orientation existantes mais la référencera désormais à des plans stables, évitant ainsi les problèmes de renommage topologique. Cependant, le coût de cette opération est que le lien paramétrique avec la géométrie générée est perdu. Si le modèle sous-jacent est modifié, tout ne s'effondrera pas comme cela arrive souvent lors de l'ancrage à la géométrie générée mais l'ancrage ne suivra pas les changements et devra être ajusté en répétant l'astuce d'ancrage temporaire. 

La méthode précédente est plus robuste mais plus abstraite et complexe à réaliser. L'astuce de l'ancrage temporaire est rapide et facile à mettre en œuvre, plus robuste que l'ancrage à la géométrie générée, mais perd un certain degré de liaison dans le processus de modélisation paramétrique.

==Conclusion==

Part Ancrage ne garantit pas un modèle robuste. La clé est d'éviter d'ancrer ou de placer des esquisses sur la géométrie générée comme les faces ou les bords des protrusions et des poches. 

Il existe de nombreux modes d'ancrage disponibles pour les utilisateurs, seules les bases sont couvertes ici.

Une chose importante à retenir de ce tutoriel, c'est l'importance de l'origine qui est le "crochet". Rappelez-vous également que l'orientation se fait dans le système de coordonnées locales.

Happy Attaching!

[[#top|En haut]]

{{PartDesign_Tools_navi{{#translation:}}}}
{{Sketcher_Tools_navi{{#translation:}}}}
{{Userdocnavi{{#translation:}}}}