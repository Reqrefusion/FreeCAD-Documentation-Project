<languages/>

{{Docnav/de
|[[FEM_SolverElmer/de|LöserElmer]]
|[[FEM_SolverZ88/de|LöserZ88]]
|[[FEM_Workbench/de|FEM]]
|IconL=FEM_SolverElmer.svg
|IconR=FEM_SolverZ88.svg
|IconC=Workbench_FEM.svg
}}

{{GuiCommand/de
|Name=FEM SolverMystran
|Name/de=FEM LöserMystran
|MenuLocation=Lösen → Löser Mystran
|Workbenches=[[FEM_Workbench/de|FEM]]
|Shortcut={{KEY|S}} {{KEY|M}}
|Version=0.20
|SeeAlso=[[FEM_tutorial/de|FEM Tutorium]]
}}

<span id="Description"></span>
==Beschreibung==

Der Befehl [[FEM_SolverMystran/de|LöserMystran]] command ermöglicht die Verwendung des Lösers [https://www.mystran.com MYSTRAN]. Es kann verwendet werden für:
# Einstellung der Analyseparameter.
# Arbeitsverzeichnis auswählen.
# Ausführen des MYSTRAN-Lösers.

==Installation==

<span id="Windows"></span>
===Windows===

Die ausführbare Datei von Mystran kann man [https://github.com/MYSTRANsolver/MYSTRAN/releases hier] herunterladen. Den Ordner dort ablegen, wo man ihn ablegen möchte. {{FileName|mystran.exe}} (Die ausführbare Datei muss genau diesen Namen haben – den restlichen Teil des Standardnamens entfernen) in der Windows PATH-Variable oder die Datei einfach im {{FileName|FreeCAD\bin}}-Ordner ablegen. Falls notwendig, unter {{MenuCommand|Einstellungen → FEM → Mystran}} angeben.

Der [[FEM_SolverMystran/de|LöserMystran]] braucht zusätzlich zwei Pakete:
* [https://github.com/SteveDoyle2/pyNastran pyNastran] - zum Schreiben der Fall-Datei.
* [https://github.com/ceanwang/hfcMystran hfcMystran] - zum Lesen in Mystrans NEU Ergebnisdatei.

pyNastran kann via pip installiert werden:
# Eine Befehlszeile im {{FileName|FreeCAD\bin}}-Ordner öffnen. 
# Eingabe: {{Incode|python -m pip install pyNastran}}
# Es wird in dem Ordner {{FileName|FreeCAD\bin\lib\site-packages}} installiert.

hfcMystran kann von der GitHub-Website als ZIP-Datei heruntergeladen werden (''Code → Download ZIP''). Entpacke es und lege es in den Ordner Ordner{{FileName|FreeCAD\Mod}}.

<span id="Linux"></span>
===Linux===

Die Installation unter Linux ist ähnlich, allerdings gibt es ein paar Unterschiede. 

Nachdem die ausführbare Datei von Mystran heruntergeladen wurde, benennt man sie wie oben beschrieben um und lässt sie ausführen. (''Rechtsklick → Eigenschaften → Berechtigungen → Ausführen der Datei als Programm zulassen'') und legt sie in das {{FileName|usr/bin}}-Verzeichnis von FreeCAD. 

Für die Installation von pyNastran die folgenden Befehle in der [[Python_Console|Python-Konsole]] in FreeCAD eingeben:

{{Code|code=
import subprocess
subprocess.run(['pip', 'install', 'pyNastran'])
}}

Lade schließlich hfcMystran herunter, entpacke es und lege es im Verzeichnis {{FileName|usr/Mod}} von FreeCAD ab.

<span id="Quick_test"></span>
==Schnelle Überprüfung==

Nach der Installation kann  {{MenuCommand|Werkzeuge → FEM-Beispiele öffnen}} im Arbeitsbereich FEM ausgewählt werden. Unter {{MenuCommand|Löser → Mystran}} findet man einige funktionierende Mystran-Beispiele.

<span id="Usage"></span>
==Anwendung==

# Einen [[Image:FEM_Analysis.svg|16px|link=FEM_Analysis/de]] [[FEM_Analysis/de|Analyse-Container]] erstellen.
# Es gibt mehrere Möglichkeiten, den Befehl aufzurufen:
#* Aus dem Menü die Option {{MenuCommand|Lösen → [[Image:FEM_SolverMystran.svg|x16px]] Löser Mystran}} auswählen.
#* Die Tastenkombination: {{KEY|S}} und anschließend {{KEY|M}} verwenden.
# Das [[Image:FEM_SolverMystran.svg|x16px]] SolverMystran-Objekt doppelklicken.
# Die Schaltfläche {{Button|Schreiben}} drücken.
# Die Schaltfläche {{Button|Ausführen}} drücken.

<span id="Limitations"></span>
==Einschränkungen==

* Derzeit sind nur Verschiebungen als Konturdiagramme aus Analysen mit diesem Löser verfügbar. Um die Spannungen anzuzeigen, wechselt man zum Externen Arbeitsbereich  hfcMystran, öffnet diesen Fall und dessen F06-Datei. Mit der pyNastran-GUI können alle Ergebnisse grafisch dargestellt werden.
* Derzeit werden nur die folgenden Elementtypen unterstützt: Tetraeder erster und zweiter Ordnung, dreieckige und viereckige Schalen erster Ordnung sowie Balken erster Ordnung. Wenn mit Gmsh andere Elemente generiert werden, zeigt der Mystran-Löser eine Fehlermeldung an.

<span id="File_function"></span>
==Datei-Funktionen==

Unter Mod\Fem\femsolver\mystran, befinden sich diese Dateien:

{{Code|code=
add_con_displacement.py
add_con_fixed.py
add_con_force.py
add_femelement_geometry.py
add_femelement_material.py
add_mesh.py
add_solver_control.py
writer.py
solver.py
tasks.py
}}

Die Funktion jeder Datei ist:

writer.py - Haupt-Steuerungs-Datei

{{Code|code=
model = BDF()
model = add_solver_control.add_solver_control(pynasf, model, self)
model = add_femelement_geometry.add_femelement_geometry(pynasf, model, self)
model = add_mesh.add_mesh(pynasf, model, self)
model = add_femelement_material.add_femelement_material(pynasf, model, self)
model = add_con_fixed.add_con_fixed(pynasf, model, self)
model = add_con_displacement.add_con_displacement(pynasf, model, self)
model = add_con_force.add_con_force(pynasf, model, self)
}}

BDF() - Erzeuge einen leeren Andwendungsfall-Datei.

{{Code|code=
$pyNastran: version=msc
$pyNastran: punch=False
$pyNastran: encoding=utf-8
$pyNastran: nnodes=0
$pyNastran: nelements=0
ENDDATA
}}

add_solver_control.py - Hinzufügen von EXECUTIVE CONTROL DECK und CASE CONTROL DECK.

{{Code|code=
$EXECUTIVE CONTROL DECK
SOL 101
CEND
$CASE CONTROL DECK
ECHO = NONE
TITLE = pyNastran for generating solverinput for for Mystran
SUBCASE 1
    DISPLACEMENT(SORT1,REAL) = ALL
    LOAD = 1
    SPC = 1
    SPCFORCES(SORT1,REAL) = ALL
    STRESS(SORT1,REAL,VONMISES,BILIN) = ALL
    SUBTITLE = Default
BEGIN BULK
$PARAMS
PARAM       POST      -1
}}

add_femelement_geometry.py - GRID-Karten hinzufügen

add_mesh.py - Elementkarten hinzufügen

add_femelement_material.py - MAT1-Karte hinzufügen

add_con_fixed.py - Hinzufügen von SPCADD- und SPC1-Karten

add_con_displacement.py - Hinzufügen von SPCADD- und SPC1-Karten

add_con_force.py - Hinzufügen von FORCE-Karten


{{Docnav/de
|[[FEM_SolverElmer/de|LöserElmer]]
|[[FEM_SolverZ88/de|LöserZ88]]
|[[FEM_Workbench/de|FEM]]
|IconL=FEM_SolverElmer.svg
|IconR=FEM_SolverZ88.svg
|IconC=Workbench_FEM.svg
}}

{{FEM_Tools_navi{{#translation:}}}}
{{Userdocnavi{{#translation:}}}}