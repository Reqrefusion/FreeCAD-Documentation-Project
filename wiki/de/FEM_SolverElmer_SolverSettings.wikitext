<languages/>
{{TOCright}}

Auf dieser Seite werden die möglichen Einstellungen für den [[FEM_SolverElmer|Löser Elmer]] beschrieben.

<span id="General"></span>
==Allgemein==

Elmer ist ein multiphysikalischer Löser. Daher können mehrere Hauptgleichungen zur Lösung von Problemen verwendet werden. Die verschiedenen Gleichungen sind [[FEM_SolverElmer/de#About_Equations|hier]] aufgelistet.

Es gibt Löser-Einstellungen, die für alle Gleichungen verfügbar sind. Diese werden hier beschrieben. Einstellungen, die nur für eine bestimmte Gleichung verfügbar sind, werden auf den Seiten der entsprechenden Gleichung beschrieben.

Elmer bietet die [[#Type|Lösungstypen]] ''stationärer Zustand'' und ''vorrübergehend'' und zwei weitere Lösungssysteme, [[#Linear_System|lineares System]] und [[#Nonlinear_System|nichtlineares System]]. Das nichtlineare System wird verwendet für die [[Image:FEM_EquationFlow.svg|24px]] [[FEM_EquationFlow/de|Strömungsgleichung]] and [[Image:FEM_EquationHeat.svg|24px]] [[FEM_EquationHeat/de|Wärmegleichung]].

<span id="Editing_Settings"></span>
=Einstellungen bearbeiten=

Die Löser-Einstellungen findet man in dem [[Property_editor/de|Eigenschaften-Editor]] nachdem man auf eine Gleichung in der [[Tree_view/de|Baumansicht]] geklickt hat. Dort können sie wie jede andere Eigenschaft direkt bearbeitet werden.

<span id="Solver"></span>
==Löser==

<span id="Coordinate_System"></span>
===Koordinatensystem===

Das Standardkoordinatensystem ist „Kartesisch 3D“. Bei einigen Gleichungen können nicht alle Koordinatensysteme verwendet werden. Dies ist auf den Wiki-Seiten der entsprechenden Gleichungen vermerkt.

<span id="Timestepping_(transient_analyses)"></span>
===Zeitschritte (Transienten-Analysen)===

'''Hinweis''': FreeCAD 0.20.x bietet bereits die folgenden Einstellungen, aber es wird nur das letzte Zeit-Ergebnis ausgegeben. Ab FreeCAD 0.21 erhält man eine Ausgabe für die verschiedenen Zeiten.

Für transiente Analysen müssen die Zeitschritte definiert werden. Dies erfolgt über die folgenden Einstellungen:

* {{PropertyData/de|BDFOrder}}: Reihenfolge der Methode ''BDF'' ([https://de.wikipedia.org/wiki/BDF-Verfahren BDF-Verfahren (Backward Differentiation Formula)]). Es wird empfohlen, die Standardeinstellung von ''2'' zu verwenden.
* {{PropertyData/de|Output Intervals}}: Eine Anordnung von Intervallen. Bei jedem Intervall-Zeitschritt wird eine Löser-Ergebnisdatei ausgegeben. Wenn beispielsweise bei jedem dritten Zeitschritt eine Ergebnisdatei ausgegeben werden soll, den Wert auf ''3'' setzen. Die Anordnung entspricht den {{PropertyData/de|Timestep Intervals}}. Um beispielsweise Ergebnisse nach 25 % der Gesamtzeit zu erhalten und wenn das letzte Ergebnis die Endzeit sein soll, setzen man {{PropertyData/de|Output Intervals}} auf ''5'' und {{PropertyData/de|Timestep Intervals}} auf ''21''. {{Version/de|0.21}}
* {{PropertyData/de|Timestep Intervals}}: Eine Anordnung von Zeitintervallen (Anzahl der Zeitschritte). Der Löser führt die Zeitintervalle nacheinander aus. Wenn der Löser beispielsweise die ersten 10 Sekunden in Schritten von 0,1 Sekunden berechnen soll, dann 50 Sekunden in Schritten von 1 Sekunde und dann anhalten soll, müssen man die Zeitschrittintervalle [100, 50] und die Zeitschrittgrößenintervalle [0,1, 1,0] einstellen.
* {{PropertyData/de|Timestep Sizes}}: Eine Anordnung von Zeitschrittgrößen. Die Zeiteinheit ist die Sekunde. Die Anordnung entspricht den {{PropertyData/de|Timestep Intervals}}.

'''Hinweis:'''
* Um die gewünschte Gesamtzeit einer Transientenanalyse zu erreichen, legt man die richtige Anzahl und Größe der Zeitschritte fest. Um beispielsweise 50 Sekunden eines Prozesses in Schritten von 10 Sekunden zu simulieren, benötigt man 5 solcher Zeitschritte. Man setzt daher die Zeitschrittintervalle auf [5] und die Zeitschrittgrößen auf [10].
* Obwohl die Begriffe "Zeiten" und "Sekunden" verwendet werden, handelt es sich bei den Zeiten tatsächlich um Löser-Fortschritte, wenn die Analyse nicht zeitabhängig ist.

Informationen zur Visualisierung der Ergebnisse findet man unter [[FEM_SolverElmer/de#Visualisierung|Elmer-Visualisierung]].

<span id="Type"></span>
===Typ===

* {{PropertyData/de|Simulation type}}: Wenn die Simulation „Steady state” (stationär), „Transient” (transient) oder einfach „Scanning” (Scannen) ist. Transient bedeutet, dass die Entwicklung über die Solver-Zeit berechnet wird. Die erforderlichen Einstellungen findet man im Abschnitt [[#Timestepping_(transient_analyses)|Timestepping]] (Zeitschritte).
* {{PropertyData/de|Steady State Max Iterations}}: Die maximale Anzahl von Löser-Läufen im stationären Zustand.
* {{PropertyData/de|Steady State Min Iterations}}: Die Mindestanzahl der Steady-State-Solver-Durchläufe.

<span id="Equation"></span>
==Gleichung==

<span id="Base"></span>
===Basis===

Alle Gleichungen haben diese Eigenschaften:
* {{PropertyData|Bezeichnung}}: Name der Gleichung in der Baumansicht.
* {{PropertyData|Priorität}}: Zahl, die die Priorität dieser Gleichung gegenüber den anderen Gleichungen in der Analyse bestimmt. Die Gleichung mit der höchsten Zahl in der Analyse wird zuerst gelöst. Wenn zwei Gleichungen dieselbe Prioritätszahl haben, wird diejenige zuerst gelöst, die in der Baumansicht an erster Stelle steht.
* {{PropertyData|Stabilisieren}}: Wenn auf "true" gesetzt, verwendet der Solver die stabilisierte Finite-Elemente-Methode zur Lösung der Wärmeleitungsgleichung mit einem Konvektionsterm. Wenn auf "false" gesetzt, wird stattdessen die Residual Free Bubble (RFB)-Stabilisierung verwendet. Wenn die Konvektion dominiert, muss die Stabilisierung verwendet werden, um die Gleichung erfolgreich zu lösen.

<span id="Linear_System"></span>
===Lineares System===

Dieses System hat folgende Eigenschaften:
* {{PropertyData/de|BiCGstabl Degree}}: Polynomialgrad für die iterative Lösungsmethode ''BiCGStabl''. Dies hat nur dann Auswirkungen, wenn {{PropertyData/de|Linear Solver Type}} auf ''Iterative'' und {{PropertyData/de|Linear Iterative Method}} auf ''BiCGStabl'' gesetzt ist. Es wird empfohlen, mit dem Standardwert 2 zu beginnen.
* {{PropertyData/de|Idrs Parameter}}: Parameter für die iterative Lösungsmethode ''Idrs''. Dies hat nur dann eine Auswirkung, wenn {{PropertyData/de|Linear Solver Type}} auf ''Iterative'' und {{PropertyData/de|Linear Iterative Method}} auf ''Idrs'' gesetzt ist. Es wird empfohlen, mit dem Standardwert 2 zu beginnen. Durch Setzen des Parameters auf 3 kann die Lösungsgeschwindigkeit etwas erhöht werden. Bei Strömungsanalysen ist die Methode ''Idrs'' bis zu 30 % schneller als die Standardmethode ''BiCGStab''.
* {{PropertyData/de|Linear Direct Method}}: Verfahren zur direkten Lösung. Dies hat nur dann eine Auswirkung, wenn {{PropertyData/de|Linear Solver Type}} auf ''Direct'' gesetzt ist. </br>Die möglichen Verfahren sind ''Banded'', ''MUMPS'' und ''Umpfpack''. Es muss beachtet werden, dass ''MUMPS'' in der Regel installiert sein muss, bevor es verwendet werden kann. </br>'''Hinweis''': Wenn mehr als einen CPU-Kern für den Löser verwendet werden soll ({{Version/de|0.21}}), kann nur ''MUMPS'' verwendet werden. [https://mumps-solver.org/ MUMPS] muss manuell in Elmer installiert werden. Es ist nur als Download auf Anfrage per E-Mail erhältlich.
* {{PropertyData/de|Linear Iterations}}: Maximale Anzahl von Iterationen für einen iterativen Solver-Lauf. Dies hat nur dann eine Auswirkung, wenn {{PropertyData/de|Linear Solver Type}} auf ''Iterative'' gesetzt ist.
* {{PropertyData/de|Linear Iterative Method}}: Verfahren für die iterative Lösung. Dies hat nur dann eine Auswirkung, wenn {{PropertyData/de|Linear Solver Type}} auf ''Iterative'' gesetzt ist.
* {{PropertyData/de|Linear Preconditioning}}: Verfahren zur Vorkonditionierung. Informationen zur Vorkonditionierung findet man in [http://www.nic.funet.fi/index/elmer/slides/ElmerLinearSolvers.pdf dieser Präsentation] (Seite 8) von Elmer.
* {{PropertyData/de|Linear Solver Type}}: Ob die Lösung ''Direct'' oder ''Iterative'' erfolgt.
* {{PropertyData/de|Linear System Solver Disabled}}: Deaktiviert den linearen Löser. Diese Option nur in besonderen Fällen verwenden. Damit kann eine Gleichung vorübergehend deaktiviert werden, da sie dann nicht gelöst wird. Es gibt jedoch Fälle, in denen der Löser stattdessen in eine Endlosschleife gerät.
* {{PropertyData/de|Linear Tolerance}}: Die Toleranz, bei der der Löser stoppt. Wenn der Fehler kleiner als die Toleranz ist, wird der Löser-Lauf beendet. Andernfalls wird die volle Anzahl von {{PropertyData/de|Linear Iterations}} durchgeführt. Im Elmer-Löser-Protokoll sieht man, wie der Fehler während des Löser-Laufs minimiert wird. (Sehen Sie sich im Protokoll am Ende jeder Löser-Iteration den Wert hinter ''Relative Change'' an). Wenn der Wert nicht unter einen bestimmten Wert sinkt, aber einen Wert über der aktuellen Toleranz erreicht, der für einen akzeptabel ist, kann die Toleranz erhöht werden.

<span id="Nonlinear_System"></span>
===Nichtlineares System===

Dieses System ist iterativ und hat die folgenden Eigenschaften:

* {{PropertyData/de|Nonlinear Iterations}}: Maximal Anzahl von Iterationen.
* {{PropertyData/de|Nonlinear Newton After Iterations}}: Der nichtlineare Löser beginnt mit dem robusten ''Picard''-Algorithmus. Nach einigen Iterationen wird der Algorithmus zum ''Newton''-Algorithmus gewechselt, der schneller konvergiert, aber weniger robust ist, wenn die Ergebnisse vorübergehend divergieren (es können Schwankungen auftreten). Diese Einstellung legt die Anzahl der Iterationen fest, nach denen vom ''Picard''- zum ''Newton''-Algorithmus gewechselt wird. </br>'''Hinweis''': Der Wechsel erfolgt, sobald entweder {{PropertyData/de|Nonlinear Newton After Iterations}} oder {{PropertyData/de|Nonlinear Newton After Tolerance}} erreicht ist.
* {{PropertyData/de|Nonlinear Newton After Tolerance}}: Entspricht {{PropertyData/de|Nonlinear Newton After Iterations}}, jedoch wird hier eine Toleranz festgelegt. Die Toleranz ist die Norm des nichtlinearen Residuals. Wird diese erreicht, erfolgt der Wechsel vom ''Picard''- zum ''Newton''-Algorithmus.
* {{PropertyData/de|Nonlinear Tolerance}}: Die Toleranz, bei der der Löser stoppt. Ist der Fehler kleiner als die Toleranz, wird der Löser-Lauf beendet. Andernfalls wird die volle Anzahl an {{PropertyData/de|Nonlinear Iterations}} durchgeführt. In der Elmer-Ausgabe sieht man, wie der Fehler während des Löser-Laufs minimiert wird. Wenn er nicht unter einen bestimmten Wert sinkt, der akzeptabel ist, aber über der aktuellen Toleranz liegt, kann man die Toleranz erhöhen.
* {{PropertyData/de|Relaxation Factor}}: Dies ist DIE wichtigste Einstellung für den Fall, dass der Löser nicht konvergiert:

<span id="Relaxation_Factor"></span>
====Entspannungsfaktor====

Wenn die Ergebnisse der Löser-Iteration numerisch oszillieren, können die Löser-Ergebnisse nicht zu einem endgültigen, stabilen Wert konvergieren. Um dies zu vermeiden, wird die berechnete Variable <math>T_{i}</math> der i-ten Iteration/Löser-Durchlauf nicht als Eingabe für die nächste Iteration verwendet, sondern <math>T_{i}^{'}</math>, ein Wert, der mit dem Ergebnis der vorherigen Iteration "gedämpft" wird. Der Relaxationsfaktor <math>\lambda</math> ist dabei definiert als

<math>\quad
T_{i}^{'} = \lambda T_{i}+\left(1-\lambda\right)T_{i-1}
</math>

Bei dem Standardwert von 1,0 wird also keine Dämpfung verwendet. Je kleiner <math>\lambda</math> ist, desto größer ist die Dämpfung und desto länger ist die Konvergenzzeit. Wenn der Löser also nicht konvergiert, ändert man den Relaxationsfaktor zunächst auf 0,9, dann auf 0,8 und so weiter. Werte unter 0,3 sind ungewöhnlich. Wenn man solche Werte benötigt, sollte man sich die Mathematik der Analyse genauer ansehen.
In Fällen, in denen man eine ordnungsgemäße Konvergenz erhält, kann man <math>\lambda</math> auf einen Wert über 1,0 setzen, um die Konvergenz zu beschleunigen.

<span id="Steady_State"></span>
===Stationärer Zustand===

Dieser Teil der Einstellungen hat nur eine Eigenschaft:
* {{PropertyData/de|Steady State Tolerance}}: Die spezifische Konvergenztoleranz für den stationären Zustand oder das gekoppelte System. Alle Gleichungslöser müssen ihre eigenen Toleranzen für die Variable  <math>\omega^2</math> erfüllen, die sie berechnen, bevor das gesamte System als konvergiert gilt. Das Toleranzkriterium lautet:
<math>\quad
\left\Vert u_{i}-u_{i-1}\right\Vert <\epsilon\left\Vert u_{i}\right\Vert 
</math>

wobei  <math>\epsilon</math> die Toleranz im stationären Zustand und <math>u_{i}</math> die berechnete Variable in der i-ten Iteration/Lauflänge des Lösers ist.


 
{{FEM_Tools_navi{{#translation:}}}}
{{Userdocnavi{{#translation:}}}}