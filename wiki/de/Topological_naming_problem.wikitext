<languages/>

<span id="Introduction"></span>
==Einleitung==

{{TOCright}}

Das [[topological naming problem/de|Problem der topologischen Benennung]] in FreeCAD bezieht sich auf die Frage, ob eine Form ihren internen Namen nach einer Modellierungsoperation (Polstern, Schnitt, Vereinigung, Fase, Verrundung, usw.) ändert. Dies führt dazu, dass andere parametrische Merkmale, die von dieser Form abhängen, brechen oder falsch berechnet werden. Dieser Sachverhalt betrifft alle Objekte in FreeCAD, ist aber besonders bemerkenswert, wenn Festkörper mit dem Arbeitsbereich [[Image:Workbench_PartDesign.svg|24px]] [[PartDesign Workbench/de|PartDesign]] erstellt und diese mit dem Arbeitsbereich [[Image:Workbench_TechDraw.svg|24px]] [[TechDraw Workbench/de|TechDraw]] bemaßt werden.
* Wenn in [[Image:Workbench_PartDesign.svg|24px]] [[PartDesign Workbench/de|PartDesign]] ein Merkmal auf einer Fläche (oder Kante oder Knoten) unterstützt wird, kann das Merkmal brechen, wenn der zugrunde liegende Festkörper seine Größe oder Ausrichtung ändert, da die ursprüngliche Fläche (oder Kante oder Knoten) intern umbenannt werden kann.
* Wenn in [[Image:Workbench_TechDraw.svg|24px]] [[TechDraw Workbench/de|TechDraw]] ein Maß die Länge einer projizierten Kante anzeigt, kann das Maß brechen, wenn das 3D-Modell geändert wird, da die Knoten umbenannt werden können, wodurch die gemessene Kante geändert wird.

Das Problem der topologischen Benennung ist ein komplexes Problem bei der CAD-Modellierung, das daraus herrührt, wie die internen FreeCAD-Routinen Aktualisierungen der mit dem [[OpenCASCADE/de|OCCT-Kernel]] erstellten geometrischen Formen handhaben. Dieses Problem betrifft nicht nur FreeCAD. Es tritt in allen CAD-Anwendungen auf, aber die meisten anderen CAD-Anwendungen enthalten heuristische Methoden, die den Einfluss des Problems auf den Anwender reduzieren.

Seit FreeCAD 0.19 gibt es noch andauernde Entwicklungsanstrengungen, um den Kern im Umgang mit Formen zu verbessern, indem Methoden hinzugefügt werden, die den Einfluss dieser Probleme zu verringern. Der [[#Topological_naming_algorithm/de|Benennunngsalgorithmus]] ist ausgelegt, den manuellen Aufwand zu reduzieren, manchmal durch automatisches Beheben von Problemen, in andern Fällen durch Vorstellen einer wahrscheinlichen Lösung oder andernfalls wenigstens durch Aufzeigen, was das Problem verursachte. Die erste stabile Veröffentlichung von FreeCAD, die den neuen Benennungsalgorithmus beinhaltet ist die Version 1.0. Nach und nach wird dieser Algorithmus auf weitere Teile von FreeCAD übertragen und weitere Funktionen zum automatischen und angeleiteten Reparieren werden in späteren Versionen hinzugefügt.

Das Problem der topologischen Benennung betrifft und verwirrt neue Anwender von FreeCAD am häufigsten. In PartDesign wird dem Anwender empfohlen, die auf der Seite [[feature editing/de|Funktionsbearbeitung]] beschriebenen optimalen Vorgehensweisen zu befolgen. Die Verwendung von unterstützenden Bezugsobjekten wie [[PartDesign Plane/de|Ebenen]] und [[PartDesign CoordinateSystem/de|lokalen Koordinatensystemen]] wird dringend empfohlen, um Modelle zu erstellen, die nicht leicht solchen topologischen Fehlern ausgesetzt sind. In TechDraw wird dem Anwender empfohlen, Maße nur dann hinzuzufügen, wenn das 3D-Modell vollständig ist und nicht mehr geändert wird.

<span id="Example"></span>
==Beispiel==

1. Erstelle in der [[Image:Workbench_PartDesign.svg|24px]] [[PartDesign Workbench/de|Arbeitsbereich PartDesign]] einen [[Image:PartDesign_Body.svg|24px]] [[PartDesign Body/de|PartDesign Körper]], verwende dann [[Image:PartDesign_NewSketch.svg|24px]] [[PartDesign NewSketch/de|PartDesign Neue Skizze]] und wählen die XY-Ebene, um die Basisskizze zu zeichnen; führe dann ein [[Image:PartDesign_Pad.svg|24px]] [[PartDesign Pad/de|PartDesign Polster]] aus, um einen ersten Volumenkörper zu erstellen.

[[Image:FreeCAD_topological_problem_01_solid.png|x400px]]

2. Wählen Sie die Oberseite des vorherigen Volumenkörpers aus und verwende dann [[Image:PartDesign_NewSketch.svg|24px]] [[PartDesign NewSketch/de|PartDesign NewSketch]], um eine weitere Skizze zu zeichnen; führe dann ein zweites Polster aus.

{|
| [[Image:FreeCAD_topological_problem_02_solid_sketch_2.png|x400px]] || [[Image:FreeCAD_topological_problem_03_solid_2.png|x400px]]
|}

3. Wähle die Oberseite der vorherigen Extrusion aus und erstelle erneut eine Skizze und ein Polster.

[[Image:FreeCAD_topological_problem_04_solid_3.png|x400px]]

4. Doppelklicke nun auf die zweite Skizze und ändere sie so, dass ihre Länge entlang der X-Richtung liegt; dadurch wird das zweite Pad neu erstellt. Die dritte Skizze und das Polster bleiben an der gleichen Stelle.

{|
| [[Image:FreeCAD_topological_problem_05_solid_sketch_2.png|x400px]] || [[Image:FreeCAD_topological_problem_06_solid_2.png|x400px]]
|}

[[Image:FreeCAD_topological_problem_07_solid_3.png|x400px]]

5. Doppelklicke nun erneut auf die zweite Skizze und passe Deine Punkte so an, dass ein Teil davon außerhalb der durch das erste Pad definierten Grenzen liegt. Dadurch wird das zweite Pad korrekt neu berechnet, aber beim Betrachten der [[Tree_View/de|Baumansicht]] wird im dritten Pad ein Fehler angezeigt.

{|
| [[Image:FreeCAD_topological_problem_08_solid_sketch_2.png|x400px]] || [[Image:FreeCAD_topological_problem_09_solid_2.png|x400px]]
|}

[[Image:FreeCAD_topological_problem_12_broken_tree.png]]

6. Indem man die dritte Skizze und das Polster sichtbar macht, wird deutlich, dass die Berechnung des neuen Solids nicht korrekt durchgeführt wurde. Die dritte Skizze, anstatt von der Oberseite des zweiten Pads getragen zu werden, erscheint an einer seltsamen Stelle, mit ihrer Normalen, die in X Richtung ausgerichtet ist. Dies führt zu einem ungültigen Polster, da dieses Polster vom Rest des [[Image:PartDesign_Body.svg|24px]] [[PartDesign Body/de|PartDesign Körper]] getrennt wird, was nicht erlaubt ist.

Das Problem scheint darin zu bestehen, dass bei der Änderung der zweiten Skizze die Oberseite des zweiten Polsters von {{incode|Face13}} in {{incode|Face14}} umbenannt wurde. Die dritte Skizze ist wie ursprünglich an {{incode|Face13}} angehängt, aber da sich diese Fläche nun auf der Seite befindet (nicht oben), folgt die Skizze ihrer Ausrichtung und ist nun falsch positioniert.

{|
| [[Image:FreeCAD_topological_problem_10_solid_2_sketch_3.png|x400px]] || [[Image:FreeCAD_topological_problem_11_solid_2_faces.png|x400px]]
|}

7. Um das Problem zu beheben, sollte die dritte Skizze wieder auf die Oberseite abgebildet werden. Wähle die Skizze aus, klicke auf die Ellipse (drei Punkte) neben der Eigenschaft {{PropertyData/de|Map Mode}}, und wähle erneut die Oberseite des zweiten Polsters. Dann geht die Skizze an die Spitze des vorhandenen Volumenkörpers, und das dritte Pad wird ohne Probleme erzeugt.

[[Image:FreeCAD_topological_problem_13_remap_sketch_2.png]]

{|
| [[Image:FreeCAD_topological_problem_14_solid_2_sketch_3.png|x400px]] || [[Image:FreeCAD_topological_problem_15_solid_3.png|x400px]]
|}

Die Umschlüsselung einer Skizze auf diese Weise kann bei jedem topologischen Benennungsfehler erfolgen, dies kann jedoch mühsam sein, wenn das Modell kompliziert ist und es viele solcher Skizzen gibt, die angepasst werden müssen.

<span id="Solution"></span>
== Lösung ==

[[Image:FreeCAD_topological_problem_16_dependency_graph.png|left]]

Der [[Std_DependencyGraph/de|Abhängigkeitsgraph]] ist ein Werkzeug, das hilfreich ist, um die Beziehungen zwischen den verschiedenen Körpern im Dokument zu beobachten. Die Verwendung des ursprünglichen Modellierungs Arbeitsablaufs zeigt die direkte Beziehung, die zwischen den Skizzen und den Polstern besteht. Wie eine Kette ist es leicht zu erkennen, dass diese direkte Abhängigkeit mit topologischen Benennungsproblemen behaftet sein wird, wenn sich eines der Glieder in der Reihenfolge ändert.

Wie auf der Seite [[Feature_editing/de|Formelemente bearbeiten]] erläutert, besteht eine Lösung für dieses Problem darin, Skizzen nicht an Flächen zu befestigen, sondern an die Hauptebenen des Ursprungs eines [[PartDesign_Body/de|PartDesign-Körpers]] oder an Bezugsebenen, die an diesen Hauptebenen befestigt sind. Es ist nicht nötig einzelne Skizzen, wie unten beschrieben, an Bezugsebenen zu befestigen, da die Skizze selbst direkt an einer Hauptebene befestigt werden kann und dieselben Versatzoptionen besitzt wie eine Bezugsebene. Bezugsebenen sind aber durchaus sinnvoll, wenn mehrere Skizzen positioniert werden.

1. Wähle den Ursprung des [[PartDesign Body/de|PartDesign Body]] und stelle sicher, dass er sichtbar ist. Wähle dann die XY-Ebene aus und klicke auf [[PartDesign Plane/de|PartDesign Fläche]]. Gib im Anhang des Dialogfelds für den Versatz einen Versatz in Z-Richtung an, so dass die Bezugsebene koplanar mit der Oberseite des ersten Polsters ist.

2. Wiederhole den Vorgang, füge aber diesmal einen größeren Versatz hinzu, so dass die zweite Bezugsebene koplanar mit der Oberseite der zweiten Auflage ist.

{{clear}}
{|
| [[Image:FreeCAD_topological_problem_17_datum_plane_1.png|x400px]] || [[Image:FreeCAD_topological_problem_18_datum_plane_2.png|x400px]]
|}

3. Wähle die zweite Skizze aus, klicke auf die Ellipse nahe der {{PropertyData/de|Map Mode}} Eigenschaft und wähle dann die erste Bezugsebene. Die Bezugsebene ist bereits von der XY-Ebene des Körpers versetzt, so dass für die Skizze kein weiterer Z-Versatz erforderlich ist.

4. Wiederhole den Vorgang mit der dritten Skizze und wähle die zweite Bezugsebene als Auflage. Auch hier ist kein weiterer Z-Offset erforderlich.

5. Das Abhängigkeitsdiagramm zeigt nun, dass die Skizzen und Polster von den Bezugsebenen unterstützt werden. Dieses Modell ist stabiler, da jede Skizze im Wesentlichen unabhängig voneinander modifiziert werden kann.

[[Image:FreeCAD_topological_problem_19_dependency_graph_datum_planes.png]]

6. Doppelklicke auf die zweite Skizze und ändere die Form. Das zweite Polster sollte sofort aktualisiert werden, ohne topologische Probleme mit der dritten Skizze und dem dritten Polster zu verursachen.

[[Image:FreeCAD_topological_problem_20_independent_solid_2.png|x400px]]

7. Tatsächlich kann jede Skizze geändert werden, ohne die Polster der anderen zu beeinträchtigen. Solange die Polster eine ausreichende Extrusionslänge haben, so dass sie sich berühren und einen zusammenhängenden Körper bilden, ist der gesamte Körper gültig.

[[Image:FreeCAD_topological_problem_21_independent_solids_all.png|x400px]]

<span id="Tradeoffs"></span>
== Kompromisse ==

Das Hinzufügen von Bezugsobjekten ist mehr Arbeit für den Anwender, erzeugt aber letztlich stabilere Modelle, die weniger dem topologischen Benennungsproblem unterliegen.

Natürlich können Bezugsobjekte erstellt werden, bevor Skizzen gezeichnet werden, und es werden Polster erstellt. Dies kann hilfreich sein, um die ungefähre Form und Dimension des Endkörpers zu visualisieren.

Bezugsflächen können auch auf anderen Bezugsflächen basieren. Dies schafft eine Kette von Abhängigkeiten, die auch zu topologischen Problemen führen können; da es sich bei Bezugsebenen jedoch um sehr einfache Objekte handelt, ist das Risiko, dass diese Probleme auftreten, geringer, als wenn die Fläche eines festen Objekts als Träger verwendet wird.

Bezugsobjekte, [[PartDesign Point/de|Punkte]], [[PartDesign Line/de|Linien]], [[PartDesign Plane/de|Flächen]] und [[PartDesign CoordinateSystem/de|Koordinatensysteme]], können auch als Referenzgeometrie, d.h. als visuelle Hilfsmittel zur Darstellung der wichtigen Merkmale im Modell nützlich sein, auch wenn keine Skizze direkt an ihnen angebracht ist.

<span id="Topological_naming_algorithm"></span>
== Topologischer Benennungsalgorithmus ==

Der topologische Benennungsalgorithmus von Realthunder, der im Forum-Thread [https://forum.freecad.org/viewtopic.php?t=27278 Topological Naming, My Take] beschrieben wird und ausgewählt wurde, um die Auswirkungen dieses Problems zu verringern, wurde weithin als "Lösung des topologischen Benennungsproblems" bezeichnet. Dies hat viele Benutzer unbeabsichtigt zu der Annahme verleitet, dass Techniken wie Datums, explizite Skizzenplatzierung und [[Feature_editing/de#Advice_for_creating_stable_models|Feature-Bearbeitung]] zur Stabilisierung von Modellen nicht mehr hilfreich sind. Der Algorithmus soll nicht alle Fehler beheben, die durch topologische Namenskonflikte verursacht werden. Vielmehr verfolgt er drei Ziele.

# Der erste und wichtigste Zweck besteht darin, wann immer möglich, durch topologische Änderungen beschädigte Referenzen zu identifizieren und dem Benutzer einen Fehler anzuzeigen. Anstatt eine Reihe von Operationen durchlaufen zu müssen, um die erste Operation zu finden, die von der Designabsicht abweicht, wird die Operation, die die Namen ändert, normalerweise mit einem Fehler gekennzeichnet, wodurch es viel einfacher wird, durch Änderungen an Operationen oder Parametern verursachte Modellprobleme manuell zu beheben.
# Manchmal kann FreeCAD eine '''wahrscheinliche''' Lösung für eine fehlerhafte Referenz identifizieren, sodass dem Benutzer bei der manuellen Korrektur der markierten fehlerhaften Referenz ein Vorschlag angezeigt wird, den er akzeptieren oder ändern kann. Ein gängiges Beispiel hierfür sind Veredelungsoperationen wie Verrundungen und Fasen, bei denen der Benutzer möglicherweise die Operation bearbeiten und entweder die vorgeschlagene Ersatzfunktion akzeptieren oder sie ändern muss, um sie zu korrigieren.
# In einigen Fällen kann FreeCAD die fehlerhafte Referenz '''automatisch''' beheben, da genügend Informationen über die Referenz gespeichert sind, um mit hoher Sicherheit davon ausgehen zu können, dass die Ersetzung korrekt ist. Wenn man beispielsweise direkt auf einer Fläche skizziert, repariert der Algorithmus häufig (aber nicht immer) die Referenz zur Fläche korrekt, wenn die zugrunde liegende Geometrie parametrisch geändert wird. (Bei Änderungen an der Struktur, z. B. durch Hinzufügen oder Löschen von Operationen in der Mitte eines Teilkonstruktionskörpers, ist eine solche automatische Reparatur weniger wahrscheinlich.) FreeCAD führt dies jedoch nur durch, wenn es von der Richtigkeit der Reparatur überzeugt ist, da eine fehlerhafte automatische Reparatur erneut das Problem verursachen kann, dass nach einer Änderung nach der Stelle gesucht werden muss, an der das Problem aufgetreten ist, um das Modell zu reparieren. ''First, do no harm'' (Zuallererst: keinen Schaden anrichten).

In FreeCAD 1.0 erreichte die Implementierung dieses Algorithmus in der offiziellen FreeCAD-Version zum Zeitpunkt des Beginns der Integrationsarbeiten die gleiche Funktionsvielfalt wie Realthunders "Linkstage 3"-Fork, in dem er den Algorithmus ursprünglich entwickelt hatte. Es gibt neue FreeCAD-Funktionen, die den Algorithmus nutzen könnten, dies aber noch nicht tun, und es wird immer mehr Möglichkeiten geben, mögliche Korrekturen und automatische Reparaturen hinzuzufügen. Die anfängliche Arbeit hat einen ''Rahmen'' (Framework) geschaffen, der für diese zusätzlichen Verbesserungen im Laufe der Zeit sowohl im Kern von FreeCAD als auch in Addons genutzt werden kann.

<span id="Links"></span>
== Verweise ==

* [[PartDesign_Fillet/de#Topologische Benennung|PartDesign Verrundung - Topologische Benennung]]
* [https://forum.freecad.org/viewtopic.php?t=27278 Topological Naming, My Take] , eine mögliche Lösung, von realthunder.
* [[Topological_Naming_Project|Topological Naming Project]]: Idee um das Problem zu lösen, von ickby.
* [[Topological_data_scripting/de|Topologische Daten skripten]]
* [[Feature_editing/de|Formelemente bearbeiten]]: enthält alternative Hinweise für stabile Modellierungstechniken.
* [https://forum.freecad.org/viewtopic.php?p=770360 Clarifying and expanding "Topological Naming Problem" documentation]: Verdeutlicht die Erwartungen an Realthunders Algorithmus zum topologischen Benennen, der für FreeCAD 1.0 ausgewählt wurde.

== Videos ==

* [https://youtu.be/6p2vqEEmWq4 Warum brechen meine FreeCAD Modelle? - "Topologisches Benennungsproblem"]: Eine Videoerklärung der zugrunde liegenden Probleme des [[Topological_naming_problem/de|Topologisches Benennungsproblem]]
* [https://www.youtube.com/watch?v=QSsVFu929jo FreeCAD Is Fundamentally Broken! - Now what... Help Me Decide...]: A Maker Tales Video


{{Userdocnavi{{#translation:}}}}
{{TechDraw Tools navi{{#translation:}}}}
{{PartDesign Tools navi{{#translation:}}}}
{{Part Tools navi{{#translation:}}}}
[[Category:Common Questions{{#translation:}}]]