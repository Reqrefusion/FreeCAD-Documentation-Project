<languages/>

[[Image:Kicad-StepUp-tools-WB.svg|thumb|128px|Symbol des externen Arbeitsbereichs KicadStepUp]]

{{TOCright}}

<span id="Introduction"></span>
==Einleitung==

Der Arbeitsbereich KicadStepUp zielt darauf ab, sowohl KiCad- als auch FreeCAD-Benutzer bei der Zusammenarbeit mit der elektrischen (ECAD) und mechanischen (MCAD) Konstruktion zu unterstützen.

<span id="Background"></span>
==Hintergrund==

KiCad ([https://kicad.org/ Webseite]) ist ein Opensource-Programmpaket für die Automatisierung der Konstruktion von elektronischen Schaltungen. Es ermöglicht dem Anwender, einen elektrischen Schalplan zu entwerfen und dann eine ein- oder mehrlagige Leiterplatte mit Hilfe einer umfangreichen Bibliothek von Teilen zu erstellen. Das Großartige daran ist, dass die Verwendung von FreeCAD mit dem Arbeitsbereich KicadStepUp der offizielle KiCad-Weg ist, um 3D-Teile für elektrische Komponenten für KiCad zu erstellen. Die Bibliotheken werden [https://gitlab.com/kicad/libraries hier] gehostet, damit jeder Teile erstellen und einchecken kann.

KiCad's GUI-Philosophie ist im Vergleich zu FreeCAD etwas anders, vor allem, wenn es darum geht, Elemente zu erstellen und sie zu verschieben. Da Kicad jedoch seit Jahren in der Produktion eingesetzt wird, gibt es eine ausgezeichnete Dokumentation, z.B. ein sehr gutes "Getting Started" Dokument. Zusätzlich hat jedes Werkzeug seine eigene Anleitung.

Wenn man [https://kicad.org/ KiCad] noch nicht kennt, wird empfohlen, eine eigenständige Leiterplatte gemäß dem [https://docs.kicad-pcb.org/8.1/en/getting_started_in_kicad/getting_started_in_kicad.html Leitfaden für den Einstieg] zu erstellen, um die verwendeten Konzepte zu verstehen. Obwohl einige Themen wie das Hinzufügen von neuen Schaltplänen und Lötflächenrastern (engl.: footprints, wörtlich: Fußabdrücke) zu einer lokalen Bibliothek für den Anfänger wenig interessant zu sein scheinen, stößt man in der Praxis oft schnell darauf, wenn man ein ernsthaftes Projekt beginnt.

Für all diese [https://kicad-pcb.org/ KiCad]-Konzepte findet man im Arbeitsbereich KicadStepUp eine Art von Funktion. Wenn man diese also kennt, ist es viel einfacher zu verstehen, wie man diesen Arbeitsbereich benutzt.

<span id="Features"></span>
==Funktionen==

{{emphasis|In Bearbeitung}}

* Lade die KiCad-Platine und die Bauelemente in FreeCAD und exportiere sie in STEP (oder IGES) für eine vollständige ECAD MCAD Zusammenarbeit
* Lade die KiCad-Lötflächenraster in FreeCAD, um das mechanische Modell einfach und präzise am KiCad-Lötflächenraster auszurichten
* Konvertiere das 3D-STEP-Modell von Bauelementen, Platinen und Gehäusen in VRML mit Materialeigenschaften für die optimale Verwendung in KiCad
* Überprüfe Überschneidungen und Kollisionen für Gehäuse- und Lötflächenraster-Gestaltung 
* Konstruiere eine neue Leiterplattenkante mit dem Arbeitsbereich [[Sketcher_Workbench/de|Sketcher]] von FreeCAD und SCHIEBE dies auf eine bestehende KiCad-Platine
* ZIEHE eine Leiterplattenkante von einer KiCad-Platine, bearbeite sie im FreeCADs Arbeitsbereich Sketcher und SCHIEBE diese Kante zurück nach KiCad
* Entwirf ein neues Lötflächenraster in FreeCAD, um die Leistungsfähigkeit von Skizze in Lötflächenrastern zu nutzen
* Erzeuge blender-kompatible VRML-Dateien

[[File:ECAD-MCAD-collaboration.png|800px]]

==Installation==

KicadStepUp ist Teil der [[External_workbenches/de|externen Arbeitsbereiche]] und kann automatisch mit dem [[Image:Std_AddonMgr.svg|24px]] [[Std_AddonMgr/de|Addon-Manager]], der seit FreeCAD 0.17 mitgeliefert wird, installiert werden (Menüeintrag {{MenuCommand|Werkzeuge → Addon-Manager}}).

<span id="Usage"></span>
==Anwendung==

{{emphasis|In Bearbeitung}}

<span id="General_Approach"></span>
=== Allgemeine Herangehensweise ===

Die Grundidee von KicadStepUp ist es, Daten zwischen den beiden Anwendungen zu synchronisieren. Für den Heimgebrauch verwendet man vielleicht FreeCAD und KiCad gleichzeitig. Professionelle Anwender können an denselben  Dateien arbeiten (z.B. auf einem zentralen Server) und sich in Spezialisten für mechanisches CAD (MCAD), die in FreeCAD arbeiten, und Elektronikexperten für elektrisches CAD (ECAD) aufteilen.

KiCadStepUp wandelt Standard-FreeCAD-Dateien in KiCad-Dateien um und umgekehrt. Auf diese Weise kann jede Anwendung mit ihren angestammten Datendateien arbeiten. Projekte können verwendet werden, ohne dass die andere Anwendung oder KicadStepUp installiert ist. Das ist auch der Grund, dass kein Zusatzprogramm auf der KiCad Seite benötigt wird.

Es ist wichtig, darauf hinzuweisen, dass die Unterschiede zwischen den beiden Programmen einige Schwierigkeiten für einen vollständigen Datenaustausch mit sich bringen.<br> Ein Beispiel ist, dass der Skizzierer, der in Kicad verwendet wird, um den Umriss der Platine zu definieren, im Vergleich zum Arbeitsbereich Sketcher von FreeCAD sehr eingeschränkt ist. Um also den Modellinhalt hin und her zu sychronisieren darf der Inhalt des Modells nicht komplexer sein, als es der KiCad-Skizzierer verarbeiten kann. Aus der Sicht von FreeCAD bedeutet das, dass man einige Elemente der FreeCAD-Skizzen vermeiden sollte. KicadStepUp bietet Workarounds, die möglicherweise schwieriger zu verstehen sind, wenn man nicht über diesen Hintergrund verfügt.

<span id="Basic_Workflow"></span>
=== Grundlegender Arbeitsablauf ===

Eine Zusammenarbeit kann mit einem neuen oder einem bestehenden Projekt begonnen werden. Wir betrachten hier ein neues Projekt, um die Dinge einfach zu halten:

# Ein neues KiCad-Projekt an einem beliebigen Ort erstellen. Nennen wir es "KsuTest".
# Den PCB-Editor öffnen und auf der Ebene "Edit.Cuts" einen geschlossenen Umriss erstellen. Die Form spielt keine Rolle, wir werden ihn ohnehin überschreiben.
# Eine neue FreeCAD-Datei für die Leiterplatte erstellen, der Name spielt keine Rolle. *
# Eine Skizze mit einem Umriss der gewünschten Leiterplatte erstellen. Nennen wir sie "pcb design" (es kann aber auch ein anderer Name sein) und fügen mindestens einen Kreis für ein Loch ein.
#: Es können alle FreeCAD-Funktionen verwendet werden, um Löcher, Ausschnitte und Außenformen für andere Komponenten einzufügen, die man möglicherweise hat. Wir gehen davon aus, dass hier Sketcher-Funktionen wie Bemaßung, Beschränkungen und Arbeitsgeometrie in der Skizze verwendet werden.
#: Wenn man den Arbeitsbereich PartDesign zum Erstellen der Skizze verwendet, muss man keinen PartDesign-Körper erstellen, da wir diese Skizze nicht ausfüllen werden.
# Zum Arbeitsbereich KicadStepUp wechseln.
# Die Skizze "pcb design" auswählen.
# Die Schaltfläche "Push Sketch to PCB Edge" in der Symbolleiste oder das Menü ''ksu PushPull/ksu Push Sketch to PCB'' wählen.
#* Zunächst öffnet sich ein Dialogfeld mit den Standardeinstellungen "Edge.Cuts" für die Ebene und "0,16" für die Linienbreite. Diese Standardeinstellungen beibehalten.
#* Als Nächstes öffnet sich ein Dateidialog. Auf das KiCad-Projekt "KsuTest" klicken, wo man eine Datei namens "KsuTest.kucad_pcb" sehen sollte. Das ist die PCB-Datei mit dem zuvor erstellten temporären Umriss. Sie auswählen und bestätigen, dass die alte Datei ersetzt werden soll. <br>Nun sollte ein Dialogfeld mit der Meldung "new Edge pushed to kicad board!" (Neuer Rand auf Kicad-Platine übertragen!) angezeigt werden.
#*: Wenn man den zweiten Schritt vergessen hat, schlägt der Push-Vorgang möglicherweise fehl, da eine PCB-Datei vorhanden sein muss und diese nicht leer sein darf.
# Den PCB-Editor in KiCad schließen und ihn erneut öffnen. **
#: Die Form aus der FreeCAD-Skizze sollte nun angezeigt werden.
# Mit der Maus über den Kreis fahren und die Taste ''m'' auf der Tastatur drücken, um den Kreis zu verschieben. Klicken, um ihn an einer anderen Position zu platzieren. Die Schaltfläche "Speichern" in der Symbolleiste oben links drücken.
# Zu FreeCAD wechseln und im Arbeitsbereich KicadStepUp die Schaltfläche "Pull Sketch from PCB" oder das Menü ''ksu PushPull/ksu Pull Sketch from PCB'' wählen.
#* Es öffnet sich ein erster Dialog mit der Standardebene "Edge.Cuts" und drei Auswahlmöglichkeiten. Die Option "PCB und Sketch im aktuellen Dokument ersetzen" wählen.
***
#* Als nächstes sollte wieder ein Dateidialog mit der Datei "KsuTest.kicad_pcb" angezeigt werden. Diesen auswählen und auf ''Öffnen'' klicken.
#*: Man sollte nun die Leiterplatte als 3D-Modell sehen. Beachten, dass sich die Bohrung im Vergleich zu der "PCB-Design"-Skizze verschoben hat.
#*: In der Baumstruktur erscheint eine neue Struktur mit einem gelben ''Part Container'' mit dem KiCad-Dateinamen und darin einem weiteren ''Part Container'' mit "Board_Geoms_e63b" (die Nummer kann abweichen). Im zweiten Container befinden sich die folgenden drei Dateien. Keine Namen in dieser Struktur ändern, da KicadStepUp sie verwendet, um die zu aktualisierenden Teile zu finden. <br>
#*: Nicht vergessen, die Datei zu speichern.

<pre>
Local_CS_e63b      Der Leiterplatten-Ursprung.
                     wie der Ursprung in der Skizze "PCB-Design"
Pcb_e63b           3D-Objekt mit der Leiterplatte.
                      Nicht bearbeiten, es wird von KicadStepUp überschrieben
PCB_Sketch_e63b    Skizze mit allen Teilen der Skizze "PCB-Design", die KiCad
                   erkannt hat.
                      alle anderen wurden gelöscht. Auch beachten, dass, wenn
                      man diese Skizze ändert und neu berechnet, das 3D-Objekt
                      ändert sich nicht.
</pre>

Man versucht, einen weiteren PushPull-Rundgang zu machen: Man passt den "PCB-Design"-Entwurf an die Änderungen aus KiCad an, fügt einige weitere Änderungen hinzu und beginnt erneut. Man wiederholt dies einige Male, um zu erkennen, wie schnell und selbstverständlich dieser Vorgang in kürzester Zeit wird.

Jetzt kannst du die neue 3D-Leiterplattendatei verwenden, um 3D-Komponenten wie Steckverbinder, Taster, Schalter, Verschlüsse usw. auszurichten, oder du fügst diese zu deiner Baugruppe hinzu, wenn du ein größeres Projekt hast.

Dies zeigt nur die sehr grundlegende Arbeitsweise von KicadStepUp. Dir fehlt an dieser Stelle noch vieles, z.B. Lötflächenraster und 3D-Teile. Aber von hier aus ist es viel einfacher, KicadStepUp auf eigene Faust zu erkunden. Verwende die PDF-Dokumentationsdatei im Menü ''ksu Tools/Demo''

:''Hinweise:
:* Solange der Name der erstellten Struktur (und ihrer Teile) unverändert bleibt, werden alle Arbeitsablaufs-Interaktionen lediglich die Struktur aktualisieren. Wenn Namen geändert werden, wird jedes Mal eine neue Struktur erstellt.
:* Es ist nicht erforderlich, KiCad auszuführen, um KiCad-Projektdateien zu aktualisieren. Tatsächlich muss KiCad nicht einmal auf dem PC installiert sein.
:* Der Standardansatz besteht darin, auf beiden Seiten, KiCad und Freecad, denselben Entwurf zu verwenden. Alle Änderungen werden mit der anderen Anwendung synchronisiert. Dies ist die natürlichste und sauberste Art, mit KicadStepUp zu arbeiten. <br>Dies führt jedoch zu einem Problem, wenn man eine der folgenden Funktionen im Entwurf verwenden möchte, um die Form der Leiterplatte zu definieren: Abmessungen, Geometriebeschränkungen, Konstruktionsgeometrie (blaue Linien) oder extern verknüpfte Geometrie. Es gibt keine saubere Möglichkeit, dies zu tun, da KiCad keine dieser Funktionen kennt. Das bedeutet, dass bei der Übertragung zwischen den Anwendungen alle diese Funktionen gelöscht werden. Es gibt keine wirkliche Lösung für dieses Problem, sondern nur eine Auswahl von mehreren Arbeitsabläufen. Wenn also eine dieser Funktionen verwendet werden soll, müssen die Leiterplattenform ausschließlich in FreeCAD definiert und in einer Richtung mit KiCad synchronisiert werden. Alle in KiCad vorgenommenen Änderungen am Umriss müssen manuell in FreeCAD hinzugefügt werden. Dies kann sinnvoll sein, wenn beispielsweise zukünftige Änderungen auf der mechanischen Seite viel wahrscheinlicher sind als auf der elektrischen Seite. Es gibt mehrere Möglichkeiten, dies zu tun:
:** Die Entwurfsskizze in der KicadStepUp-Struktur festlegen und jedes Mal, wenn aus Kicad importiert wird, "PCB ersetzen und Skizze im aktuellen Dokument behalten" setzen.
:** Die Entwurfsskizze außerhalb der KicadStepUp-Struktur behalten. Die aus KiCad importierte Skizze ignorieren.
::Die zweite Option hat den Vorteil, dass Änderungen in KiCad bis zur ursprünglichen Skizze zurückverfolgt werden können und die FreeCAD-Skizze vor einer versehentlich falschen Importauswahl geschützt ist. Der beschriebene Arbeitsablauf nutzt diesen Ansatz, um sicherzustellen, dass das Problem gut verstanden wird. Von dort aus ist es einfach, zur Bearbeitung der von KicadStepUp bereitgestellten Skizze überzugehen, ohne die fortgeschritteneren Funktionen von FreeCAD zu verwenden.
:* Um KicadStepUp mit einer FreeCAD-Baugruppe (> V0.19) zu verwenden, kann man eine neue Datei für die Leiterplatte hinzufügen. Nachdem der oben beschriebene Arbeitsablauf einmal ausgeführt wurde, fügt man das 3D-Objekt für die Leiterplatte wie jedes andere mechanische Teil zu Ihrer Baugruppe hinzu. Sicherstellen, dass die Datei gespeichert wird, wenn sie von KicadStepUp aktualisiert wurde (Wichtig: KicadStepUp schreibt in den FreeCAD-Speicher, nicht in FreeCAD-Dateien).
''

Bitte schau den [https://github.com/easyw/kicadStepUpMod/blob/master/demo/kicadStepUp-cheat-sheet.pdf KiCadStepUp-Spickzettel] für die anderen Funktionen an.

<span id="References"></span>
==Referenzen==

* Autor: Github: [https://github.com/easyw @easyw] | FreeCAD Foren: [https://forum.freecad.org/viewtopic.php?f=24&t=14276 kicad StepUp: ECAD MCAD bidirektionale Zusammenarbeit]
* Quellcode auf GitHub: https://github.com/easyw/kicadStepUpMod

<span id="Side_Note_about_External_workbenches"></span>
== Nebenbemerkung zu Externen Arbeitsbereichen ==

FreeCAD Arbeitsbereiche sind einfach in [[Python/de|Python]] zu programmieren, daher gibt es viele Leute, die zusätzliche Arbeitsbereiche außerhalb der FreeCAD-Hauptentwickler entwickeln.

Die Seite [[external workbenches/de|externe Arbeitsbereiche]] enthält einige Informationen und Anleitungen zu einigen von ihnen, und das Projekt [https://github.com/FreeCAD/FreeCAD-addons FreeCAD Erweiterungen] hat sich zum Ziel gesetzt, diese zu sammeln und sie von FreeCAD aus leicht installierbar zu machen.

Neue Arbeitsbereiche sind in der Entwicklung, bleib dran!


{{Userdocnavi{{#translation:}}}}
[[Category:Addons{{#translation:}}]]
[[Category:External Workbenches{{#translation:}}]]