<languages/>

{{Macro/de
|Name=Klassifikationen herunterladen
|Description=Lädt ein Paket mit BIM-Klassifizierungssystemen zur Verwendung in FreeCAD herunter
|Author=yorik
|Version=1.0
|Date=2024-12-13
|FCVersion=Alle
}}

<span id="Description"></span>
==Beschreibung==

Dieses Makro lädt eine Reihe von BIM-Klassifizierungssystemen von https://github.com/Moult/IfcClassification herunter und speichert sie im entsprechenden Ordner auf dem Computer, sodass sie vom Werkzeug [[BIM_Classification/de|BIM Klassifizierung]] gefunden werden können.

<span id="Usage"></span>
==Anwendung==

Das Makro ausführen. Nach erfolgreicher Ausführung stehen die neuen Klassifizierungssysteme im Werkzeug [[BIM_Classification/de|BIM Klassifizierung]] zur Verfügung. Nachdem das Makro ausgeführt und die Klassifizierungssysteme installiert wurden, kann das Makro bedenkenlos gelöscht werden.

<span id="Install"></span>
==Installieren==

Mittels des [[Std_AddonMgr/de|Addon-Managers]].

==Code==

'''Macro_Download_Classifications.FCMacro'''

{{MacroCode|code=
import os
import FreeCAD
import requests
import json

target = os.path.join(FreeCAD.getUserAppDataDir(), "BIM", "Classification")
apireq = "https://api.github.com/repos/Moult/IfcClassification/contents/xml"

r = requests.get(apireq)
if r.ok:
    j = json.loads(r.content)
    print("Installing to", target", ...")
    for f in j:
        df = requests.get(f["download_url"])
        with open(os.path.join(target, f["name"]), 'wb') as tf:
            tf.write(df.content)
            print("Downloaded", f["name"])
else:
    print("error getting repo contents")
}}