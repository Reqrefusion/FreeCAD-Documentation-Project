<languages/>

{{Docnav/de
|[[FEM_MeshNetgenFromShape/de|Netz aus Form durch Netgen]]
|[[FEM_MeshBoundaryLayer/de|NetzGrenzschicht]]
|[[FEM_Workbench/de|FEM]]
|IconL=FEM_MeshNetgenFromShape.svg
|IconR=Fem-femmesh-boundary-layer.svg
|IconC=Workbench_FEM.svg
}}

{{GuiCommandContainer|
{{GuiCommand/de
|Name=FEM MeshGmshFromShape
|Name/de=FEM NetzGmshAusForm
|MenuLocation=Netz → FEM-Netz aus Form - Gmsh
|Workbenches=[[FEM_Workbench/de|FEM]]
|SeeAlso=[[FEM_tutorial/de|FEM Tutorium]]
}}
{{GuiCommandFemInfo/de
|Solvers=Alle
}}
}}

<span id="Description"></span>
==Beschreibung==

Für eine Finite-Elemente-Analyse muss die Geometrie in ein [[FEM_Mesh/de|FEM-Netz]] diskretisiert werden. Dieser Befehl verwendet die Software [https://en.wikipedia.org/wiki/Gmsh Gmsh] (die auf dem System installiert sein muss) zum Erstellen des Netzes.

Abhängig vom Betriebssystem und dem Installationspaket kann Gmsh in FreeCAD enthalten sein oder auch nicht.  Für weitere Informationen siehe [[FEM_Install/de#FEM Netz Generator|FEM Installation]].

<span id="Usage"></span>
==Anwendung== 

# Die Form auswählen, die analysiert werden soll. Bei der Volumen-FEM muss es sich um einen Festkörper oder Compsolid (zusammengesetzten Festkörper) handeln. Ein Compsolid ist erforderlich, wenn dein Teil aus mehreren Materialien besteht. (Ein Compsolid kann mit dem Befehl [[Part_BooleanFragments/de|BoolescheFragmente]] erstellt werden).
# Es gibt mehrere Möglichkeiten, den Befehl aufzurufen:
#* Die Schaltfläche {{Button|[[Image:FEM_MeshGmshFromShape.svg|16px]] [[FEM_MeshGmshFromShape/de|FEM-Netz aus Form - Gmsh]]}} drücken.
#* Den Menüeintrag {{MenuCommand|Netz → [[Image:FEM_MeshGmshFromShape.svg|16px]] FEM-Netz aus Form - Gmsh}} auswählen.
# Wahlweise minimale und maximale Elementgröße anpassen (Die vorgegebene Einstellung erstellt oft zu grobe Netze). Es kann auch die dimensionale Art (1D, 2D, 3D) eingestellt (wobei die Voreinstellung ''From shape'' meistens passt) sowie die Ordnung des Elements geändert werden.
# Die Schaltfläche {{Button|Anwenden}} anklicken und warten, bis die Erstellung des Netzes abgeschlossen ist. {{Version/de|1.0}}: Wahlweise die Schaltfläche {{Button|Abbrechen}} drücken, um das Vernetzen abzubrechen.
# Die Schaltfläche {{Button|OK}} drücken, um die Aufgabe abschließen. Jetzt sollte sich ein neues FEMMeshGmsh-Objekt im aktiven Analysebehälter befinden. Oder die Schaltfläche  {{Button|Abbrechen}} drücken, um die Änderung oder die Erstellung des Netzobjekts abzubrechen.

Nachdem das Netz erstellt wurde, können seine Eigenschaften im [[Property_editor/de|Eigenschafteneditor]] angepasst werden. Nach dem Ändern einer Eigenschaft, muss der Gmsh-Dialog erneut geöffnet und die Schaltfläche {{Button|Anwenden}} gedrückt werden (der Dialog kann geöffnet bleiben, während weitere Eigenschaften geändert werden).

Die Schaltfläche  {{Button|Gmsh-Version}} erlaubt es, Details zur aktuell benutzten Gmsh-Binary zu überprüfen.

<span id="Properties"></span>
==Eigenschaften==

* {{PropertyData/de|Algorithm2D}}: Der Algorithmus zum Erstellen von 2D-Netzen. Die verschiedenen Algorithmen werden [https://gmsh.info/doc/texinfo/gmsh.html#Choosing-the-right-unstructured-algorithm hier erläutert]. Für Delaunay siehe [https://de.wikipedia.org/wiki/Delaunay-Triangulierung Delaunay-Triangulierung].
* {{PropertyData/de|Algorithm3D}}: Der Algorithmus zum Erstellen von 3D-Netzen. Die verschiedenen Algorithmen werden [https://gmsh.info/doc/texinfo/gmsh.html#Choosing-the-right-unstructured-algorithm hier erläutert].
* {{PropertyData/de|Characteristic Length Max}}: Die maximale Größe der Netzelemente. Bei Einstellung auf ''0.0'' wird die Größe automatisch festgelegt. Diese Eigenschaft kann auch im Gmsh-Dialogfeld im Feld '''Max element size''' geändert werden.
* {{PropertyData/de|Characteristic Length Min}}: Die minimale Größe der Netzelemente. Bei Einstellung auf ''0.0'' wird die Größe automatisch festgelegt. Diese Eigenschaft kann auch im Gmsh-Dialogfeld im Feld '''Min element size''' geändert werden.
* {{PropertyData/de|Coherence Mesh}}:
** true (Standard); doppelte Netzknoten werden entfernt.
** false
* {{PropertyData/de|Element Dimension}}: Die Dimension der Netzelemente. Diese Eigenschaft kann auch im Gmsh-Dialogfeld im Feld '''Mesh element dimension''' geändert werden.
** From Shape (Standard); die Dimension wird anhand der Dimension des zu vernetzenden Objekts bestimmt.
** 1D
** 2D
** 3D
* {{PropertyData/de|Element Order}}: Die [https://www.comsol.de/support/knowledgebase/1270 Netz-Elementreihenfolge]. Diese Eigenschaft kann auch im Gmsh-Dialogfeld im Feld '''Mesh order''' geändert werden. {{Version/de|0.20}}
** 1.
** 2. (Standard)</br>'''Hinweis:''' Wenn der Löser [[FEM_SolverElmer/de|Elmer]] verwendet wird, kann folgende Fehlermeldung auftreten: ''ERROR:: GetEdgeBasis: Can't handle but linear elements, sorry.'' Das bedeutet, dass die Löser-Gleichung keine Netze zweiter Ordnung verarbeiten kann. In diesem Fall entweder Netze 1. Ordnung verwenden oder auf der FreeCAD-Wiki-Seite nach der Löser-Gleichung suchen, um mögliche Optionen für die Verarbeitung von Netzen 2. Ordnung zu finden.
* {{PropertyData/de|Geometry Tolerance}}: Die geometrische Toleranz für die Anpassung des Netzes an die Objektkanten. Der Standardwert ''0.0'' bedeutet, dass der Standardwert von Gmsh (1e-8) verwendet wird.
* {{PropertyData/de|Groups Of Nodes}}: Für jede physikalische Netzgruppe werden alle Knoten und nicht nur die Elemente gespeichert. Physikalische Gruppen sind Sammlungen von Netzelementen (Punkte, Kurven, Flächen und Volumen). Sie werden durch ihre Dimension und durch ein Tag identifiziert. Beispielsweise wird ein Netz desselben Objektbereichs intern mit demselben Tag versehen. Somit bilden alle Flächen dieses Bereichs eine physikalische Gruppe.
* {{PropertyData/de|High Order Optimize}}: Ob und wie Netze mit {{PropertyData/de|Element Order}} = ''2nd'' optimiert werden. Die Optimierung erfolgt durch eine Verformung der Elementgrenzen. </br>{{Version/de|0.20}} Gmsh unterstützt verschiedene Optimierungsalgorithmen. '''Elastic''' (Elastisch) ist ein Algorithmus, bei dem die Netzelemente als eine Sammlung verformbarer viskoelastischer Festkörper behandelt werden. Netze erster Ordnung können nicht optimiert werden, da ihre Elementgrenzen linear sind und nicht verformt werden können.
* {{PropertyData/de|Mesh Size From Curvature}} {{Version/de|0.20}}: Die Anzahl der Netzelemente pro <math>2\pi</math> mal dem Radius der Krümmung. Um ein feineres Netz an kleinen Ecken oder Löchern zu erhalten, kann dieser Wert für bessere Ergebnisse erhöht werden.
[[Image:FEM_Gmsh-MeshSizeFromCurvature.png|450px]]
{{Caption|Auswirkung von ''Mesh Size From Curvature''; links: auf 12 gesetzt, rechts: deaktiviert}}
* {{PropertyData/de|Optimize Netgen}}: Gibt an, ob das Netz mit Hilfe des 3D-Netzgenerators [https://github.com/NGSolve/netgen Netgen] optimiert wird, um die Qualität der Tetraederelemente zu verbessern. '''Hinweis:''' Da Netgen nur tetraedrische Elemente erstellen kann, wird diese Option für Netze ignoriert, deren {{PropertyData/de|Element Dimension}} nicht ''3D'' ist.
* {{PropertyData/de|Optimize Std}} Optimiert das Netz, um die Qualität der tetraedrischen Elemente zu verbessern.
* {{PropertyData/de|Rekombinationsalgorithmus}} {{Version/de|0.20}}: Der Algorithmus, der für {{PropertyData/de|Recombine 3D All}} und auch für {{PropertyData/de|Recombine All}} verwendet wird. Weitere Informationen findet man im Abschnitt [[#Element_Recombination|Elementrekombination]] und technische Details in der [https://www.gmsh.info/doc/texinfo/gmsh.html#t11 Gmsh-Dokumentation].
* {{PropertyData/de|Recombine 3D All}} {{Version/de|0.20}}: Wendet einen 3D-Rekombinationsalgorithmus auf alle Volumen an. Tetraeder werden nach Möglichkeit zu Prismen, Hexaedern oder Pyramiden rekombiniert.
* {{PropertyData/de|Recombine All}}: Wendet einen Rekombinationsalgorithmus auf alle Oberflächen an. Dreiecke werden nach Möglichkeit zu Vierecken rekombiniert. 
* {{PropertyData/de|Second Order Linear}}: Option, wenn Knoten zweiter Ordnung (wenn {{PropertyData/de|Element Order}} auf ''2nd'' gesetzt ist) und/oder Netzverfeinerungspunkte durch lineare Interpolation erstellt werden.
** true;  lineare Interpolation wird verwendet.
** false (Standard); kurvenförmige Interpolation wird verwendet.
* {{PropertyData/de|Subdivision Algorithm}} {{Version/de|1.0}}: Ermöglicht die Erstellung von Viereck- und Hexaederelementen durch Unterteilung.
** Keine; verwendet keinen Unterteilungsalgorithmus
** Alle Vierecke; erstellt viereckige Elemente durch Unterteilung
** Alle Hexaeder; erstellt hexaedrische Elemente durch Unterteilung
** Baryzentrisch; erstellt dreieckige Elemente durch baryzentrische Unterteilung

<span id="Notes"></span>
==Hinweise==

<span id="Nonpositive_Jacobians"></span>
===Nichtpositive Jacobi-Matrizen===

Wenn ein Vermaschungs-Fehler über Nichtpositive Jacobi-Matrizen auftritt, können die folgenden Lösungsstrategien angewendet werden:

* Setze {{PropertyData/de|Second Order Linear}} auf ''true'', aber belasse {{PropertyData/de|Element Order}} auf „2nd“.
* Setze {{PropertyData/de|Element Order}} auf ''1st''.
* Eine kleinere Elementgröße verwenden, indem man die {{PropertyData/de|Characteristic Length Max}} reduziert.
* Wenn der Löser ccxtools verwendet wird und die Schaltfläche Ausführen (nicht das Aufgaben-Fenster) verwendet wird, werden die Knoten der nicht positiven Jacobi-Elemente grün dargestellt.

<span id="Mesh_Growth"></span>
===Netz-Wachstum===

An Kanten und kleinen geometrischen Elementen muss das Netz kleiner sein als in Bereichen ohne Kanten. Daher nimmt die Größe der Netzelemente mit zunehmender Entfernung von den Kanten zu. Die Wachstumsstrategie von Gmsh besteht darin, zwischen Kanten unterschiedlicher Größe zu wachsen. Das Wachstum schlägt also fehl, wenn ein Bereich Kanten gleicher Größe aufweist, wie beispielsweise bei diesem Rohr:

[[Image:FEM_Gmsh-MeshGrowth-failing.png|400px]]
{{Caption|Fehlgeschlagenes Netz-Wachstum, da der zylindrische Bereich von den gleichen Kanten umgeben ist}}

Um ein sinnvolles Netzwachstum zu ermöglichen, muss in diesem Fall dem Bereich eine Kante hinzugefügt werden. Im Beispiel wäre dies ein Kreis in der Mitte des Zylinders. Der Kreis wird als Teil eines Verbunds [[Part_BooleanFragments/de|BoolescheBestandteile]] (um ein CompSolid zu bilden), siehe [https://forum.freecad.org/download/file.php?id=146255 die Projekt-Datei] für das Beispiel.

[[Image:FEM_Gmsh-MeshGrowth-success.png|400px]]
{{Caption|Sinnvolles Netzwachstum aufgrund der zusätzlichen Kante in der Mitte des zylindrischen Bereichs}}

<span id="Element_Recombination"></span>
===Element-Rekombination===

Elemente können auf zwei Arten neu kombiniert werden: auf der Oberfläche von Objekten, sodass Dreiecke nach Möglichkeit zu Vierecken neu kombiniert werden, und im Volumen von Objekten, sodass Tetraeder nach Möglichkeit zu Prismen, Hexaedern oder Pyramiden neu kombiniert werden. Betrachtet man die Geometrie, wird deutlich, dass das Ergebnis der Neukombination stark von der Geometrie des Körpers abhängt und dass die Neukombination eines 3D-Körpers nur an der Oberfläche meist zu seltsamen Ergebnissen führt.

Zur Veranschaulichung sehe man sich das Bild unten an. Ein Quaderkörper wird mit den Standardeinstellungen (Tetraeder, Netz der 2. Ordnung) vernetzt. Dies ist das Teilbild oben links. Das Bild oben rechts zeigt das Ergebnis, wenn zusätzlich die Elemente nur an der Oberfläche des Körpers neu kombiniert werden. Das Ergebnis ist schlecht, da die geänderten Oberflächenelemente nicht zu den unveränderten Volumenelementen passen. Daher ist {{PropertyData/de|Recombine All}} allein in der Regel nur für 2D-Netze sinnvoll. </br>Wenn wir jetzt auch {{PropertyData/de|Recombine 3D All}} verwenden, ist das Ergebnis besser, siehe das untere linke Teilbild. Allerdings zeigt das Ergebnis keinen großen Unterschied zu dem Netz ohne Rekombinationen. Da unser Körper ein Quader ist, ist es daher sinnvoll, einen Rekombinationsalgorithmus zu verwenden, der ebenfalls versucht, Quader zu erzeugen. Dieses Ergebnis ist im unteren rechten Teilbild zu sehen.

Der ''einfache'' Rekombinationsalgorithmus lässt einige Dreiecke im Netz zurück, falls die Rekombination zu schlecht geformten Vierecken führt. Man verwendet in solchen Fällen einen ''Full-Quad''-Rekombinationsalgorithmus, der automatisch ein gröberes Netz erstellt, gefolgt von der Rekombination, Glättung und Unterteilung. Siehe [https://forum.freecad.org/viewtopic.php?f=18&t=20351#p520392 Foren-Thema]

[[Image:FEM_Gmsh-Recombination.png|600px]]
{{Caption|Auswirkung der Rekombination von Netzelementen.<br>
Oben links: Standardnetz.<br>
Oben rechts: Rekombination nur an der Oberfläche unter Verwendung des '''einfachen''' Algorithmus.<br>
Unten links: Rekombination an der Oberfläche und im Volumen unter Verwendung des '''einfachen''' Algorithmus.<br>
Unten rechts: Rekombination an der Oberfläche und im Volumen unter Verwendung des '''einfachen full-quad''' Algorithmus}}


{{Docnav/de
|[[FEM_MeshNetgenFromShape/de|Netz aus Form durch Netgen]]
|[[FEM_MeshBoundaryLayer/de|NetzGrenzschicht]]
|[[FEM_Workbench/de|FEM]]
|IconL=FEM_MeshNetgenFromShape.svg
|IconR=Fem-femmesh-boundary-layer.svg
|IconC=Workbench_FEM.svg
}}

{{FEM_Tools_navi{{#translation:}}}}
{{Userdocnavi{{#translation:}}}}