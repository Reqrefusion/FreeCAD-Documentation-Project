<languages/>

{{TutorialInfo/de
|Topic=Finite-Elemente-Analyse
|Level=Anfänger
|Time=N/A
|Author=[https://www.freecad.org/wiki/index.php?title=User:NewJoker NewJoker]
|FCVersion=1.0 oder neuer
|SeeAlso=[[FEM_Workbench/de|Arbeitsbereich FEM]]
}}

<span id="Background"></span>
==Hintergrund==

Die Vorbereitung der Geometrie und die Vernetzung sind entscheidende Bestandteile der Vorverarbeitung von Simulationen mit der Finite-Elemente-Methode (FEM). Während leicht zugängliche Simulationssoftware, die mit einer CAD-Umgebung (wie z. B. der [[FEM_Workbench/de|Arbeitsbereich FEM]] in FreeCAD) verbunden ist, ist es verlockend, neue Konstruktionen sofort zu analysieren, aber man darf nicht vergessen, dass FEM eine fortgeschrittene Methode ist, die eine sorgfältig vorbereitete Geometrie und ein sorgfältig vorbereitetes Netz erfordert, um vernünftige, genaue Ergebnisse zu liefern. Die alte Regel  [https://en.wikipedia.org/wiki/Garbage_in,_garbage_out ''garbage in, garbage out''] ist hier besonders wichtig. Es gibt noch weitere wichtige Einstellungen, von denen die Genauigkeit der FEM stark abhängt (z. B. Materialeigenschaften und Randbedingungen), aber die ersten Schritte und einige der häufigsten Fehlerquellen sind die Geometrievorbereitung und die Vernetzung, die auf dieser Seite behandelt werden.

<span id="Types_of_geometry_used_for_FEM_in_FreeCAD"></span>
==Geometriearten zur Verwendung für FEM in FreeCAD==

* Linien (Kanten) - für Analysen mit Balkenelementen verwendet
* Flächen - verwendet für Analysen mit Hüllen- und 2D-Elementen (ebene Spannung/Dehnung und achsensymmetrisch)
* Festkörper - für Analysen mit festen Elementen verwendet

<span id="Choice_of_the_type_of_geometry"></span>
==Auswahl der Geometrieart==

Während die meisten Konstruktionen aus Volumenkörpern bestehen, wird für die FEM häufig dringend empfohlen, Linienzüge oder Flächen zu verwenden, wenn die Struktur dies zulässt:
* Wenn ein Bauteil schlank (lang und dünn) und trägerartig ist und einen regelmäßigen Querschnitt eines der derzeit unterstützten Trägerquerschnittstypen (rechteckig, kreisförmig oder rohrförmig) aufweist, sollte es mit Trägerelementen analysiert werden (es sei denn, es gibt bestimmte Formen der Belastung, Reaktion oder unvermeidbare geometrische Details, die diese Annahme ungültig machen). Grundsätzlich sollte man eine Mittellinie zeichnen (einige Tipps, wie man diese aus einer vorhandenen Volumengeometrie extrahieren kann, findet man in [https://forum.freecad.org/viewtopic.php?t=81589 diesem Forumbeitrag] – kurz gesagt, verwendet man [[Draft_Wire/de|Draft Linienzug]] oder [[Draft_BSpline/de|Draft BSpline]] mit den richtigen [[Draft_Workbench/de#Draft-Widget_Einrasten|Einrasten]] und [[Draft_Line/de|Linien]] als Stützen) und wendet man [[FEM_ElementGeometry1D/de|Trägerschnitte]] mit optionaler [[FEM_ElementRotation1D/de|Drehung]] an. Es gibt keine einheitliche Regel, wann Trägerelemente verwendet werden können, aber es wird oft empfohlen, dass die Querschnittsabmessungen < 1/10 der Länge des Teils betragen sollten, damit die Trägerannahme gültig ist.

[[Image:FEM_beam_model.JPG|600px]]
{{Caption|Schlankes Bauteil, das zur Analyse von Stabelementen geeignet ist - Mittellinie hervorgehoben}}

<div lang="en" dir="ltr" class="mw-content-ltr">
* if a part is thin-walled (such as sheet metal parts) then it should be analyzed using shell elements (unless accurate contact results are needed or some limitations of shell elements are encountered). This is very important and often overlooked. To obtain proper accuracy of results (especially when bending is involved), one needs a few elements (at least 3-5) in the thickness direction. In the case of thin-walled parts, this usually results in large meshes (especially when tetrahedrons are used since hexahedral elements can't be generated in FreeCAD) and large computational cost - high computer power requirements and long solving time. To obtain the geometry suitable for analysis with shell elements, one should draw a midsurface of the part (some tips on how to extract it from existing solid geometry can be found in [https://forum.freecad.org/viewtopic.php?t=67505 this forum thread], [https://forum.freecad.org/viewtopic.php?t=71821 this one] and [https://forum.freecad.org/viewtopic.php?t=81834 this one] - in short, apply [[PartDesign_SubShapeBinder|PartDesign SubShapeBinder]] or [[Draft_Facebinder|Draft Facebinder]], then [[Part_Offset|Part Offset]] and finally use SubShapeBinder and [[Part_Extrude|Extrude]] to extend edges of the midsurfaces and thus close the gaps between them) and apply proper [[FEM_ElementGeometry2D|thickness]]. Again, there's no single rule but it's usually recommended that the thickness should be < 1/10 of a typical global dimension (length/width) for the shell assumption to be valid.
</div>

[[Image:FEM_shell_model.JPG|600px]]
{{Caption|Dünnwandiges Bauteil, das zur Analyse von Schalenelementen geeignet ist - Mittelfläche hervorgehoben}}

<div lang="en" dir="ltr" class="mw-content-ltr">
* in some cases, 2D analyses are also possible and can be enabled by setting the {{PropertyData|Model Space}} property of the [[FEM_SolverCalculixCcxtools|CalculiX solver]]:
** plane stress - for thin parts that can be simplified to flat surfaces representing the profile for extrusion (thickness is defined in the same way as for shells), are loaded and deform only in-plane and have zero stress in the out-of-plane direction.  Only two degrees of freedom are available - X and Y translation. Surfaces have to lie on the XY-plane in this case. This approach is quite common. For example, a thin plate subjected to tension can be analyzed this way.
** plane strain - for thick parts that can be simplified to flat surfaces representing the profile for extrusion (thickness is defined in the same way as for shells), are loaded and deform only in-plane and have zero strain in the out-of-plane directions.  Only two degrees of freedom are available - X and Y translation. Surfaces have to lie on the XY-plane in this case. This approach is not so common. For example, a long dam, wall or pipe subjected to uniform pressure at a whole length can be analyzed this way.
** axisymmetric - for parts that can be simplified to flat surfaces representing the profile of revolution (thickness is irrelevant here) and are loaded uniformly around the whole circumference.  Only two degrees of freedom are available - radial and axial translation. Surfaces have to lie on the XY-plane, on the right of the Y-axis. This approach is very common. For example, some pressure vessels, rubber mounts, bushings, gaskets, flanges and even bolted joints (treating the thread as axisymmetric) can be analyzed this way.
</div>

Man sollte bedenken, dass die in CalculiX verwendeten Balken-, Schalen-, ebenen Spannungs-/Dehnungs- und achsensymmetrischen Elemente keine echten Elemente dieser Art sind (sie verwenden nicht die aus der Literatur und anderer Software bekannten klassischen Elementformulierungen) – sie werden intern zu Volumenkörpern erweitert. Dennoch wird ihre Verwendung in den oben genannten Fällen empfohlen.

<span id="Geometry_validity"></span>
== Gültigkeit der Geometrie ==

Die für die FEM verwendete Geometrie muss gültig sein. Vor allem darf es keine Schnittpunkte geben. Dies ist ein häufiges Problem, das oft auftritt, wenn Baugruppen ohne ordnungsgemäße Beschränkungen zwischen den Teilen modelliert werden. Das Werkzeug [[Part_SectionCut/de|Part Schnittansicht]] kann dabei helfen, solche Interferenzen zwischen Teilen zu finden. Natürlich kann [[Part_Fuse/de|Part Vereinigung]] helfen, diese zu beheben, wenn sie beabsichtigt sind. Andere Probleme mit der Geometrie (wie nicht-mannigfaltige Geometrien, redundante Kanten oder Flächen usw.) müssen ebenfalls behoben werden, bevor mit der Vernetzung fortgefahren werden kann. Das Werkzeug [[Part_CheckGeometry/de|Part GeometriePrüfen]] kann dabei hilfreich sein, aber auch visuelle Überprüfungen sind wichtig. Bei der Vorbereitung einer Simulation mit Volumenelementen und bei Zweifeln, ob das Teil wirklich voluminös oder nur eine geschlossene Schale ist, können die oben genannten Werkzeuge (Part Schnittansicht und die Registerkarte „Form-Inhalt“ der Ausgabe des Werkzeugs Part GeometriePrüfen) Klarheit schaffen.

<span id="Surface_normals"></span>
== Oberflächennormalen ==

Bei Oberflächengeometrien, die für Analysen mit Schalen- und 2D-Elementen verwendet werden, können die Normalenrichtungen der Oberflächen von Bedeutung sein. Sie dienen zur Unterscheidung zwischen der positiven und negativen Seite eines Oberflächen-Finite-Elemente-Netzes und beeinflussen Analysefunktionen wie Druckbelastungen und Kontakt. Darüber hinaus erfordern 2D-Analysen (ebene Spannung/Dehnung und achsensymmetrisch) mit CalculiX, dass die Normalen in die positive Z-Richtung zeigen. Sind sie invertiert, treten negative Jacobi-Fehler auf.

Um die Normalen zu überprüfen, verwende einen der folgenden Ansätze:
* Hintergrundbeleuchtung in den  [[Preferences_Editor/de|Voreinstellungen]] aktivieren und die Eigenschaft {{PropertyView|Beleuchtung}} des Flächen-Objekts auf ‚‘Eine Seite'' - Die negative Normalenrichtung erscheint dunkler,
* nutze das [[Macro_Normal_Vector|Makro Normal Vector]],
* vernetze die Oberflächenform in FEM - das Netz wird nur auf der positiven Normalen-Seite eingefärbt.

Um die Normalen umzukehren, verwende das [[Part_ReverseShape/de|Part FormUmkehren]]-Werkzeug.

<span id="Using_surface_meshes_for_FEM"></span>
== Verwendung von Surface-Oberflächennetzen für FEM ==

[[Mesh_MeshObject/de|Polygonnetz-Objekte]], in der Regel aus STL-, OBJ- und ähnlichen Dateien importiert oder im [[Mesh_Workbench/de|Arbeitsbereich Mesh]] erstellt, können nicht direkt für FEM genutzt werden. Es ist notwendig, zuerst eine [[Part_ShapeFromMesh/de|Form aus einem Netz]] zu erzeugen. Anschließend kann diese Form im Arbeitsbereich FEM vernetzt werden, um ein Oberflächen-Finite-Elemente-Netz (Hülle/2D) zu erstellen. Wenn ein Festkörper-Finite-Elemente-Netz (3D) benötigt wird, muss nach der Formgenerierung Folgendes durchgeführt werden: [[Part_MakeSolid/de|Festkörper erstellen]].

Das größte Problem bei Formen, die aus Oberflächennetzen erstellt werden, besteht darin, dass alle ihre Dreiecke zu Flächen der erzeugten Form werden. In der FEM macht dies die Zuweisung von Analysefunktionen (wie Lasten und Randbedingungen) besonders problematisch. Bei ebenen Flächen können durch eine Verfeinerung nach der Konvertierung in einen Volumenkörper die überflüssigen Dreiecksflächen entfernt werden. In der Praxis bleiben jedoch die meisten Flächen erhalten, weshalb Oberflächennetze für die Verwendung in der FEM nicht empfohlen werden. Stattdessen sollten CAD-Geometrien (die in FreeCAD erstellt oder aus STEP/IGES-Dateien importiert wurden) verwendet werden. Manchmal kann es sogar sinnvoll sein, die Geometrie auf der Grundlage des Oberflächennetzes neu zu erstellen.

<span id="Geometry_simplification"></span>
==Geometrie vereinfachen==

<span id="Defeaturing"></span>
=== Entfunktionalisierung ===

Mit CAD-Software erstellte Entwürfe sind in der Regel zu detailliert, um für FEM-Simulationen geeignet zu sein. In vielen Fällen müssen sie zunächst vereinfacht werden. Dieser Schritt wird oft übersehen, ist jedoch sehr wichtig, da es schwierig sein kann, ein gutes Netz zu erhalten, wenn das Teil zu detailliert ist, und selbst wenn ein solches Netz schließlich erhalten wird, kann es sehr dicht sein, was zu unangemessenen Lösungszeiten führt. Daher sollte man sich immer das Design ansehen und versuchen, es so weit wie möglich zu vereinfachen, wobei nur diejenigen geometrischen Merkmale übrig bleiben sollten, die einen signifikanten Einfluss auf die Ergebnisse (Festigkeit/Steifigkeit) haben und daher nicht ignoriert werden können. Die folgenden Merkmale werden in der Regel weggelassen:
* kleine Verrundungen und Fasen,
* kleine Löcher,
* andere kleine Details,
* Schweißnähte,
* Schrauben, Gewinde,
* dekorative Elemente (Logos, Gravuren).

Das Werkzeug [[Part_Defeaturing/de|Part FormelementEntfernen]] und der externe [[Defeaturing_Workbench/de|Arbeitsbereich Defeaturing]] können bei der Vereinfachung von Teilen für Simulationen hilfreich sein.

[[Image:FEM_bracket_original.PNG|400px]]
{{Caption|Ursprungsgeometrie eines Halters}}

[[Image:FEM_bracket_simplified.PNG|400px]]
{{Caption|Die nur mit dem Werkzeug Part FormelementEntfernen vereinfachte Geometrie des Halters}}

<span id="Replacing_parts_with_boundary_conditions"></span>
=== Ersetzen von Teilen mit Randbedingungen ===

Bei Baugruppen (mehr dazu in einem der nächsten Abschnitte) können oft einige Teile aus Simulationen ausgeschlossen und durch Randbedingungen ersetzt werden, wenn sie an analysierte Teile angebracht waren. Ein solcher Ansatz ist gültig, wenn die ausgeschlossenen Teile deutlich steifer sind (im Sinne der strukturellen Steifigkeit, also unter Berücksichtigung nicht nur der Elastizität des Materials, sondern auch der Geometrie des Teils) als die analysierten Teile, mit denen sie verbunden waren. Das liegt daran, dass feste Randbedingungen Steifigkeit einführen (als ob das analysierte Teil mit einem unendlich steifen Bauteil verbunden wäre) und flexible Stützen wie Federelemente in der FEM-Workbench von FreeCAD bei Verwendung von CalculiX nicht verfügbar sind (Elmer hat [[FEM_ConstraintSpring/de|FEM RandbedingungFeder]]).

<span id="Utilizing_planar_symmetry"></span>
=== Ausnutzung ebener Symmetrie ===

<div lang="en" dir="ltr" class="mw-content-ltr">
Geometry simplification for FEM may also mean cutting it in one of the symmetry planes to make use of the planar symmetry assumption in the analysis. This assumption is valid only when all the following aspects of the model exhibit symmetry in a given plane:
* geometry,
* loads,
* boundary conditions,
* response (one has to be careful with frequency/buckling analyses utilizing symmetry - antisymmetric mode shapes won't be obtained).
The use of symmetry (1/2, 1/4 or 1/8 of the model) is recommended whenever possible since it can highly reduce the computational cost of the analysis. Another advantage is that it eliminates some rigid body motions, making it easier to constrain the part. A symmetry boundary condition should be applied to the faces belonging to the plane of the cut:
* translation in the direction normal to the symmetry plane should be blocked for solid parts,
* translation in the direction normal to the symmetry plane and rotations other than around the axis normal to the symmetry plane should be blocked for shell and beam parts.
Applied force should be properly reduced if the symmetry plane cuts the region to which the force is applied (irrelevant when pressure load is used).
</div>

[[Image:FEM_symmetric_vessel.JPG|400px]]
{{Caption|Modell von 1/8 eines zylindrischen Druckbehälters mit Randbedingungen Symmetrie und Innendruckbelastung}}

<span id="Utilizing_cyclic_symmetry"></span>
=== Ausnutzung zyklischer Symmetrie ===

<div lang="en" dir="ltr" class="mw-content-ltr">
Another, less common type of symmetry available in FreeCAD FEM is cyclic symmetry. It can be defined using the [[FEM_ConstraintTie#Cyclic_symmetry|tie constraint]] and makes it possible to analyze only a single representative sector of a structure consisting of such circular patterns around an axis. The assumption is that boundary conditions and loads also exhibit this form of symmetry. Tangential loads can be applied and thus torsion can be simulated this way. However, [[FEM_ConstraintCentrif|centrifugal load]] is commonly used with cyclic symmetry. This approach might be used e.g. for rotors, shafts, turbines, fans and flywheels.
</div>

<span id="Geometry_partitioning"></span>
==Unterteilen von Geometrie==

<span id="Partitioning_basics"></span>
=== Grundlagen der Unterteilung ===

Die sogenannte Partitionierung ist eine Aufteilung der Geometrie in kleinere Segmente. In anderer Software wird sie häufig für die Hex-Vernetzung verwendet, aber in FreeCAD kann sie auch aus anderen Gründen nützlich sein:
* Erstellen von Unterbereichen für die Zuweisung von Analysefunktionen,
* Aufteilen von Teilen in Abschnitte aus unterschiedlichen Materialien,
* Erstellen von Bereichen für die [[FEM_MeshRegion/de|Mesh Netzbereich]],
* Steuern des Vernetzungsalgorithmus, indem er gezwungen wird, zusätzlichen Kanten zu folgen (besonders nützlich zur Steuerung des [[FEM_MeshGmshFromShape/de#Mesh_Growth|Netz-Wachstum]]).

<span id="Partitioning_faces_of_solids_with_sketches"></span>
=== Unterteilen von Flächen von Volumenkörpern mit Skizzen ===

Die Hauptanwendung der Partitionierung ist, wenn eine Last (oder eine Randbedingung) nur auf einen ausgewählten Bereich der Oberfläche des Teils angewendet werden soll. Der einfachste Weg, dies für Volumenteile zu erreichen, besteht darin, eine Skizze mit einer geeigneten Kontur auf dieser Fläche zu erstellen und das Werkzeug [[Part_BooleanFragments/de|Part BoolescheBestandteile]] zu verwenden, um die Fläche mit der Skizze zu teilen.

[[Image:FEM_partition.JPG|400px]]
{{Caption|Bauteil mit Teilfläche zum Aufbringen einer Last oder Anwenden einer Randbedingung}}

<span id="Partitioning_volumes_of_solids_with_datum_planes"></span>
=== Unterteilen von Festkörpervolumina mit Bezugsebenen ===

Ein weiterer Grund für die Partitionierung ist, wenn mehrere Materialien auf ein einzelnes Teil aufgebracht werden müssen (ohne mehrere miteinander verbundene Teile verwenden zu müssen). In diesem Fall kann die Partitionierung mithilfe einer [[PartDesign_Plane/de|Bezugsebene]] und dem Werkzeug [[Part_BooleanFragments/de|Boolesche Bestandteile]] im Modus „Compsolid” durchgeführt werden.

<span id="Partitioning_surface_geometries_with_sketches"></span>
=== Oberflächengeometrien mit Skizzen unterteilen ===

<div lang="en" dir="ltr" class="mw-content-ltr">
In the case of surface (shell) geometries, the easiest way to make a sketch-based partition could be to use the [[Part_BooleanFragments|Boolean Fragments]] tool (like for the partitions on the faces of solids). However, as explained [https://forum.freecad.org/viewtopic.php?t=96029#p820241 here], when mesh group creation is enabled in the [[FEM_Preferences#General|FEM preferences]], it may not work properly and the following approach should be used:
# Create a face for one side using e.g. the [[Part_MakeFace|Part MakeFace]] tool (e.g. a square plate with a circular hole).
# Create a face for the other side in an equivalent way (e.g. a circular face filling the hole in the square plate).
# Apply the [[Part_Builder|Part Builder]] tool with the ''Shell from faces'' mode and disabled ''Refine shape'' checkbox to the previously created faces.
</div>

[[Image:FEM_shell_partition.JPG|400px]]
{{Caption|Quadratische Platte mit kreisförmiger Unterteilung}}

<span id="Partitioning_faces_of_solids_with_datum_planes"></span>
=== Unterteilen von Flächen von Volumenkörpern mit Bezugsebenen ===

<div lang="en" dir="ltr" class="mw-content-ltr">
Partitioning only the selected faces of a solid using datum planes instead of sketches without splitting the whole volume is also tricky. One possible approach is to:
# [[Draft_Downgrade|Downgrade]] the body to faces.
# Select that one face and datum plane and use the [[Part_SliceApart|Slice apart]] tool.
# Delete the Exploded Slice container without deleting its contents.
# Select all faces and slices and [[Draft_Upgrade|Upgrade]] them to Shell.
# [[Draft_Upgrade|Upgrade]] the Shell to Solid or use the [[Part_MakeSolid|Convert to solid]] tool.
Another way is to:
# Create a [[PartDesign_SubShapeBinder|subshapebinder]] of the face to be partitioned.
# Split the subshapebinder with the datum plane using the [[Part_SliceApart|Slice apart]] tool.
# Create a new [[PartDesign_Body|Body]] (to avoid cyclic dependency).
# Create a new subshapebinder from the edges obtained from the intersection of the previous subshapebinder and datum plane.
# Select the original Body and the new subshapebinder and use the [[Part_BooleanFragments|Boolean fragments]] tool.
Other ideas can be found in [https://forum.freecad.org/viewtopic.php?t=98528 this forum thread] but they are more case-specific.
</div>

[[Image:FEM_split_face_solid.JPG|400px]]
{{Caption|Zylindrische Fläche einer Bohrung, die durch eine Ebene unterteilt ist, um eine 180°-Belastung durch einen Stift auszuüben}}

<span id="Assembly_geometries"></span>
== Geometrie aus Baugruppen ==

<div lang="en" dir="ltr" class="mw-content-ltr">
One of the current major limitations of the FEM workbench is that multiple meshes are not supported. In practice, this means that one cannot mesh each part of the assembly individually and then connect the parts with proper constraints for the analysis. Instead, it's necessary to create a single object containing all the parts of the assembly and mesh it. There are several different options here, all relying on [[Part_Workbench#Boolean_toolbar|Part boolean tools]]. The choice depends on the desired effect - whether the individual parts/volumes and their boundaries should be selectable (e.g. for material assignments or definitions of boundary conditions acting on internal faces) or not:
* [[Part_Fuse|Part Fuse]] - merges the parts, making it impossible to select them individually e.g. for material definitions,
* [[Part_Compound|Part Compound]] - creates a compound object, making it possible to select individual parts,
* [[Part_JoinConnect|Part JoinConnect]] - works like Part Fuse, merges the parts, making it impossible to select them individually,
* [[Part_BooleanFragments|Part BooleanFragments]] - works like Part Compound, making it possible to select individual parts.
It's important to mention that if the parts are exactly touching, a continuous mesh will be created on the boolean object and no constraints will be needed for the simulation (unless Part Compound is used and nodes aren't coincident or [[FEM_MeshGmshFromShape#Properties|Gmsh's ''Coherence Mesh'' property]] is set to {{FALSE}}). If there's even a small gap (or an intersection within a Part Compound) between the parts, the mesh won't be continuous and constraints like [[FEM_ConstraintTie|tie]] or [[FEM_ConstraintContact|contact]] will be needed. Running a frequency analysis is a good way to reveal if the mesh is continuous or not - if the parts are not connected, the first mode shapes with deformation visualized using [[FEM_PostFilterWarp|Warp filter]] will show separation - the parts will "fly away".
</div>

[[Image:FEM_modal_separation.JPG|400px]]
{{Caption|Die erste Modusform einer Frequenzanalyse, visualisiert mit dem Warp-Filter – zwei Würfel mit einem kleinen Anfangsabstand wurden analysiert.}}

Es wird oft empfohlen, boolesche Fragmente im Compsolid-Modus zu verwenden und dann einen [[Part_CompoundFilter/de|Verbundfilter]] darauf anzuwenden, insbesondere bei der Analyse von Baugruppen aus mehreren Materialien und von Volumenkörpern, die ohne Ausschnitte in andere Volumenkörper eingebettet sind (wie im Tutorium [[FEM_Shear_of_a_Composite_Block/de|FEM Scherung eines Verbundwerkstoffblocks]]). Wie auf der Registerkarte ''Shape Content'' des Werkzeugs [[Part_CheckGeometry/de|Geometrie überprüfen]] zu sehen ist (es ist wichtig, dieses Werkzeug in solchen Fällen im Zweifelsfall zu verwenden), entfernt der Verbundfilter den Verbund und lässt nur den Compsolid übrig, der aus mehreren Volumenkörpern besteht, die durch ihre Flächen miteinander verbunden sind. Dieser Ansatz wird empfohlen, da ein Verbund lediglich ein Container mit topologisch nicht verbundenen Formen ist und alle Arten von Formen enthalten kann, sodass der Mesher ihn möglicherweise nicht richtig verwenden kann (nur die Volumenkörper nach Wunsch des Benutzers vernetzen). Operationen wie boolesche Fragmente erzeugen immer Verbünde, und der Verbundfilter wird verwendet, um die relevante Form aus dem Verbund zu extrahieren.

Behelfslösungen für Fehler wie:

{{Code|lang=text|code=
ERROR: femelement_table != count_femelements
Error in get_femelement_sets -- > femelements_count_ok() failed!
}}

und:

{{Code|lang=text|code=
*ERROR in calinput: no material was assigned
to element …
}}

inklusive:
* Das letzte Material ohne zugewiesenen Festkörper belassen (es wird automatisch allen Festkörpern zugewiesen, die nicht in anderen Materialdefinitionen referenziert sind).
* Netgen anstelle von Gmsh zum Erstellen des Netzes verwenden.
* Die Teile etwas voneinander trennen und Verbindungsbeschränkungen anwenden, um sie in der Simulation zu verbinden.

Solche Fehler werden durch fehlende oder sich überschneidende Materialdefinitionen in einigen Elementen verursacht. [https://forum.freecad.org/viewtopic.php?t=97120&start=50#p829295 Dieser Forumsbeitrag] enthält Referenzen, die dies anschaulich veranschaulichen, und der gesamte Faden kann auch bei ähnlichen Problemen hilfreich sein.

<span id="Selection_of_interior_entities"></span>
=== Auswahl von Innenraumobjekten ===

<div lang="en" dir="ltr" class="mw-content-ltr">
Selection of internal regions (e.g. faces/volumes) can be tricky. It might be needed for the application of different materials, body loads or boundary conditions (especially in thermal and electromagnetic analyses). Several ways are possible:
* enabling [[Std_ToggleClipPlane|clipping plane]] for the time of selection and picking internal faces,
* hiding the boolean object, showing only one of the parts it was applied to and selecting it,
* [[Std_ToggleTransparency|enabling transparency]] and using the [[Selection_View|Selection View]] with the ''Picked object list'' option checked as described [https://forum.freecad.org/viewtopic.php?t=96984#p826693 here],
* selecting another, external object and editing the ''References'' property on the ''Data'' tab of a given analysis feature (requires manual specification of the geometric object's number).
</div>

<span id="Meshing_basics"></span>
==Grundlagen der Vernetzung==

<span id="Choosing_element_size"></span>
=== Auswahl der Elementgröße ===

Ein zu grobes Netz ist eine der häufigsten Ursachen für Ungenauigkeiten und andere Probleme bei der FEM. Oft liegt dies teilweise an den Einstellungen des automatischen Netzgenerators – dieser erzeugt in der Regel sehr grobe, ungeeignete Netze, wenn die Elementgröße nicht manuell festgelegt, sondern auf einem Standardwert belassen wird. Man sollte immer die ungefähren Abmessungen des Teils kennen, insbesondere die Größe des kleinsten relevanten Merkmals (das Werkzeug [[Std_Measure/de|Std Messen]] kann dazu verwendet werden), und auf dieser Grundlage die richtige maximale Elementgröße festlegen. Es gibt auch eine Einstellung für die minimale Elementgröße, die die Erstellung zu kleiner Elemente um kleine geometrische Merkmale herum verhindern kann, was zu unnötig dichten Netzen führen kann (und manchmal sogar zum Absturz oder Einfrieren von FreeCAD beim Versuch, solche Netze zu generieren). Im Allgemeinen ist es besser, mit einem gröberen Netz zu beginnen (dessen Erstellung weniger Zeit in Anspruch nimmt), sich anzusehen, wie es aussieht (hierfür ist etwas Erfahrung erforderlich), und es bei Bedarf zu verfeinern. Oft ist es sinnvoll, ein dichtes Netz nur um die Bereiche von Interesse (Stellen mit großen Spannungsgradienten/Konzentrationen – Kerben) herum zu verwenden und relativ grobe Netze außerhalb dieser Bereiche. Auf diese Weise kann die Anzahl der Elemente erheblich reduziert werden, was zu kürzeren Lösungszeiten führt. Die lokale Netzverfeinerung wird mit [[FEM_MeshRegion/de|FEM NetzBereich]] definiert.

[[Image:FEM_default_mesh.PNG|400px]]
{{Caption|Standardwerte, zu grobes Netz}}

[[Image:FEM_globally_refined_mesh.PNG|400px]]
{{Caption|Global verfeinertes Netz}}

[[Image:FEM_locally_refined_mesh.PNG|400px]]
{{Caption|Lokal verfeinertes Netz}}

<span id="Choosing_element_type"></span>
=== Auswahl des Elementtyps ===

Die Wahl des Elementtyps ist nicht einfach und hängt von vielen Faktoren ab, aber die allgemeine Regel lautet, dass hexaedrische und quadrilaterale Elemente gegenüber tetraedrischen und dreieckigen Elementen vorzuziehen sind. Komplexe Geometrien können jedoch nicht mit hexaedrischen Elementen vernetzt werden, und FreeCAD kann diese nicht ordnungsgemäß generieren (nur unter Verwendung des Unterteilungsalgorithmus des Gmsh-Mesher, dessen Ergebnisse jedoch nicht den Erwartungen an ein hexagonales Netz entsprechen). Quad- oder quad-dominierte Netze können normalerweise auf Oberflächen generiert werden – siehe [https://forum.freecad.org/viewtopic.php?t=20351 dieser Forenthread]). Hexaedrische Elemente können aus externen Netzgeneratoren importiert werden, wie z. B. [https://gmsh.info Gmsh] und im Arbeitsbereich FEM verwendet, wie in [https://www.youtube.com/watch?v=vylt24G7qj4&t=932s diesem Video] gezeigt.

<span id="Choosing_element_order"></span>
=== Auswahl der Elementreihenfolge ===

Die Wahl der Elementordnung (erste oder zweite Ordnung) hängt von den Analysebedingungen ab, in den meisten Fällen werden jedoch Elemente zweiter Ordnung bevorzugt. Dies gilt insbesondere für dreieckige und tetraedrische Elemente – ihre linearen Versionen erster Ordnung werden normalerweise nicht für den regulären Gebrauch empfohlen und sollten nur als Füllelemente in Bereichen von geringer Bedeutung verwendet werden. Da FreeCAD jedoch keine hexaedrischen Elemente korrekt generieren kann, können in einigen Fällen lineare Tetraeder verwendet werden, wenn die Netze dicht genug sind. Insbesondere bei der Durchführung von Analysen mit [[FEM_ConstraintContact/de|Kontakt-Randbedingungen]].

<span id="Negative_Jacobians"></span>
== Negative Jacobi-Matrizen ==

<div lang="en" dir="ltr" class="mw-content-ltr">
If the above rules are followed (especially regarding geometry validity, defeaturing and element size selection), the mesh should be generated correctly. However, in some cases, the geometry can't be simplified too much, or the modeling procedure is appropriate but leads to small edges and faces anyway. Then meshing with second-order elements may fail due to negative Jacobians. The reason is that meshers have to follow the CAD model and put the mid-side nodes of second-order elements on the geometry. With more complex shapes, it may lead to elements being stretched so much that they become inverted. Jacobian is one of the most common mesh quality measures. It represents the element's deviation from the ideal shape. It becomes negative when the element turns inside out (becomes inverted) either due to large deformation during the analysis (not considered here) or because of the aforementioned meshing issues. Negative Jacobians in FreeCAD FEM might be reported by Gmsh or by CalculiX. Their locations in the mesh are highlighted when CalculiX analyses are submitted using the [[FEM_SolverRun|Run solver calculations]] button. The following tips can help eliminate them:
* set the ''Second Order Linear'' property of the [[FEM_MeshGmshFromShape|FEMMeshGmsh]] object to ''true'' - this results in the mid-side nodes of second-order elements being just added in the middle of straight (initially) first-order element edges, without snapping them to the geometry and resolves the issue in most cases,
* use Netgen instead of Gmsh - Netgen is known to be less prone to negative Jacobian issues but also doesn't report them so the user may find out only when submitting the analysis,
* further reduce the element size,
* export the geometry, try meshing it in Gmsh or Netgen (NGSolve) GUI or other standalone mesher (like Salome_Meca) - those tools have additional features that can help get rid of negative Jacobians (for example, Gmsh has so-called "High-order tools"),
* use first-order elements - should be done only as a last resort since first-order tetrahedrons are known for their inaccuracy.
</div>

Unabhängig von diesen Tipps ist es wichtig, noch einmal zu betonen, dass negative Jacobimatrizen in der Regel auf unordentliche Modellierungsansätze und mangelnde Vorbereitung der Geometrie für die Analyse zurückzuführen sind (besonders häufig bei STEP-Modellen, die von verschiedenen Webseiten heruntergeladen wurden). Selbst wenn in solchen Fällen letztendlich ein Netz generiert wird, sind die Ergebnisse wahrscheinlich von schlechter Qualität (denke an die im ersten Absatz erwähnte GIGO-Regel). Daher sollte die Bereinigung und Vorbereitung der Geometrie für die FEM immer Vorrang haben.

<span id="Mesh_convergence_studies"></span>
== Studien zur Netzkonvergenz ==

<div lang="en" dir="ltr" class="mw-content-ltr">
Mesh convergence studies are recommended in all serious projects requiring accurate results. The reason is that the results can change a lot, approaching correct values when the mesh is refined. The following approach should be used:
# After obtaining the first results and noting them (usually maximum von Mises stress, von Mises stress at a given location and maximum displacement), refine the mesh (globally or better locally - with [[FEM_MeshRegion|FEM MeshRegion]]) and rerun the simulation.
# Check the results and note their new values. If they differ significantly from the initial results, refine the mesh further and rerun the analysis.
# Repeat the process if the results still change (usually grow) significantly with mesh refinement.
It usually helps to create a plot with a given result vs mesh density. This way it's easier to notice when the results start to converge. The acceptable difference in results between two runs is usually around a few percent (e.g. below 5%).
</div>

In einigen Fällen kann es vorkommen, dass die maximale Spannung unabhängig von der Dichte des Netzes unbegrenzt ansteigt. Ein solcher nicht physikalischer Effekt wird als Spannungssingularität bezeichnet. Er kann aus folgenden Gründen auftreten:
* konzentrierte Kräfte, die auf Volumen- und Schalenmodelle ausgeübt werden,
* Randbedingungen, die auf Punkte (einzelne Knoten) angewendet werden,
* scharfe Ecken,
* Kontakt an einer Ecke.
Typische Möglichkeiten zum Umgang mit Spannungssingularitäten sind:
* Aufbringen von Lasten und Randbedingungen auf kleine Flächen statt auf Punkte – siehe Abschnitt über Partitionierung oben,
* Hinzufügen kleiner Verrundungen an scharfen Ecken (eine Ausnahme von der Regel, kleine Verrundungen bei der Vereinfachung der Geometrie für FEM wegzulassen),
* Einbeziehung der Plastizität in das Materialverhalten, um eine Spannungsumverteilung zu ermöglichen und die Spannungen auf Werte zu begrenzen, die durch die Plastizitätsdefinition zugelassen sind, unter Beachtung des richtigen Fließgrades (plastische Verformung),
* Ignorieren von Singularitäten und, wenn möglich, Ablesen der Spannungen außerhalb dieser Singularitäten (basierend auf dem St.-Venant-Prinzip).

[[Image:FEM_mesh_convergence.PNG|400px]]

{{Caption|Typische Konvergenzdiagramme für Gitter:<br>
- Die Verschiebung ('''grüne Kurve''') konvergiert schnell,<br>
- Die maximale Spannung an einer Kerbe wie einem Loch ('''blaue Kurve''') erfordert mehr Iterationen der Netzverfeinerung, um zu konvergieren.<br>
- Die maximale Spannung an einer scharfen Ecke mit einer festen Randbedingung ('''rote Kurve''') konvergiert überhaupt nicht. Es tritt eine Spannungssingularität auf, sodass eine kleine Verrundung hinzugefügt und die Verbindung realistischer und flexibler modelliert werden müsste, um dieses Verhalten zu vermeiden.<br>}}


{{FEM_Tools_navi{{#translation:}}}}
{{Userdocnavi{{#translation:}}}}