<languages/>

{{TutorialInfo/de
|Topic=Finite-Elemente-Analyse
|Level=Anfänger
|Time=N/A
|Author=[https://www.freecad.org/wiki/index.php?title=User:NewJoker NewJoker]
|FCVersion=1.0 oder neuer
|SeeAlso=[[FEM_Workbench/de|Arbeitsbereich FEM]]
}}

<span id="Background"></span>
==Hintergrund==

Die Vorbereitung der Geometrie und die Vernetzung sind entscheidende Bestandteile der Vorverarbeitung von Simulationen mit der Finite-Elemente-Methode (FEM). Während leicht zugängliche Simulationssoftware, die mit einer CAD-Umgebung (wie z. B. der [[FEM_Workbench/de|Arbeitsbereich FEM]] in FreeCAD) verbunden ist, ist es verlockend, neue Konstruktionen sofort zu analysieren, aber man darf nicht vergessen, dass FEM eine fortgeschrittene Methode ist, die eine sorgfältig vorbereitete Geometrie und ein sorgfältig vorbereitetes Netz erfordert, um vernünftige, genaue Ergebnisse zu liefern. Die alte Regel  [https://en.wikipedia.org/wiki/Garbage_in,_garbage_out ''garbage in, garbage out''] ist hier besonders wichtig. Es gibt noch weitere wichtige Einstellungen, von denen die Genauigkeit der FEM stark abhängt (z. B. Materialeigenschaften und Randbedingungen), aber die ersten Schritte und einige der häufigsten Fehlerquellen sind die Geometrievorbereitung und die Vernetzung, die auf dieser Seite behandelt werden.

<span id="Types_of_geometry_used_for_FEM_in_FreeCAD"></span>
==Geometriearten zur Verwendung für FEM in FreeCAD==

* Linien (Kanten) - für Analysen mit Balkenelementen verwendet
* Flächen - verwendet für Analysen mit Hüllen- und 2D-Elementen (ebene Spannung/Dehnung und achsensymmetrisch)
* Festkörper - für Analysen mit festen Elementen verwendet

<span id="Choice_of_the_type_of_geometry"></span>
==Auswahl der Geometrieart==

Während die meisten Konstruktionen aus Volumenkörpern bestehen, wird für die FEM häufig dringend empfohlen, Linienzüge oder Flächen zu verwenden, wenn die Struktur dies zulässt:
* Wenn ein Bauteil schlank (lang und dünn) und trägerartig ist und einen regelmäßigen Querschnitt eines der derzeit unterstützten Trägerquerschnittstypen (rechteckig, kreisförmig oder rohrförmig) aufweist, sollte es mit Trägerelementen analysiert werden (es sei denn, es gibt bestimmte Formen der Belastung, Reaktion oder unvermeidbare geometrische Details, die diese Annahme ungültig machen). Grundsätzlich sollte man eine Mittellinie zeichnen (einige Tipps, wie man diese aus einer vorhandenen Volumengeometrie extrahieren kann, findet man in [https://forum.freecad.org/viewtopic.php?t=81589 diesem Forumbeitrag] – kurz gesagt, verwendet man [[Draft_Wire/de|Draft Linienzug]] oder [[Draft_BSpline/de|Draft BSpline]] mit den richtigen [[Draft_Workbench/de#Draft-Widget_Einrasten|Einrasten]] und [[Draft_Line/de|Linien]] als Stützen) und wendet man [[FEM_ElementGeometry1D/de|Trägerschnitte]] mit optionaler [[FEM_ElementRotation1D/de|Drehung]] an. Es gibt keine einheitliche Regel, wann Trägerelemente verwendet werden können, aber es wird oft empfohlen, dass die Querschnittsabmessungen < 1/10 der Länge des Teils betragen sollten, damit die Trägerannahme gültig ist.

[[Image:FEM_beam_model.JPG|600px]]
{{Caption|Schlankes Bauteil, das zur Analyse von Stabelementen geeignet ist - Mittellinie hervorgehoben}}

* Wenn ein Bauteil dünnwandig ist (z. B. Blechteile), sollte es mit Schalenelementen analysiert werden (es sei denn, es werden genaue Kontakt-Ergebnisse benötigt oder es treten Einschränkungen der Schalenelemente auf). Dies ist sehr wichtig und wird oft übersehen. Um eine angemessene Genauigkeit der Ergebnisse zu erzielen (insbesondere bei Biegungen), benötigt man einige Elemente (mindestens 3-5) in Dickenrichtung. Bei dünnwandigen Teilen führt dies in der Regel zu großen Netzen (insbesondere bei Verwendung von Tetraedern, da in FreeCAD keine Hexaederelemente erzeugt werden können) und hohem Rechenaufwand – hohe Anforderungen an die Rechenleistung und lange Lösungszeiten. Um eine für die Analyse mit Schalenelementen geeignete Geometrie zu erhalten, sollte man eine Mittelebene des Teils zeichnen (einige Tipps, wie man diese aus einer vorhandenen Volumengeometrie extrahieren kann, finden Sie in [https://forum.freecad.org/viewtopic.php?t=67505 diesem Forum-Thread], [https://forum.freecad.org/viewtopic.php?t=71821 diesem] und [https://forum.freecad.org/viewtopic.php?t=81834 diesem] - Kurz gesagt: Wendet man [[PartDesign_SubShapeBinder/de|PartDesign Teilformbinder]] oder [[Draft_Facebinder/de|Draft Flächenbinder]] an, dann [[Part_Offset/de|Part Versatz]] und verwendet schließlich Teilformbinder und [[Part_Extrude/de|Extrudieren]], um die Kanten der Mitteloberflächen zu verlängern und so die Lücken zwischen ihnen zu schließen) und die richtige [[FEM_ElementGeometry2D/de|Dicke]] anwenden. Auch hier gibt es keine allgemeingültige Regel, aber es wird in der Regel empfohlen, dass die Dicke < 1/10 einer typischen globalen Abmessung (Länge/Breite) betragen sollte, damit die Schalenannahme gültig ist.

[[Image:FEM_shell_model.JPG|600px]]
{{Caption|Dünnwandiges Bauteil, das zur Analyse von Schalenelementen geeignet ist - Mittelfläche hervorgehoben}}

* In einigen Fällen sind auch 2D-Analysen möglich, die durch Setzen der Eigenschaft {{PropertyData/de|Model Space}} des [[FEM_SolverCalculixCcxtools/de|CalculiX-Solvers]] aktiviert werden können:
** plane stress - Für dünne Teile, die zu ebenen Flächen vereinfacht werden können, die das Profil für die Extrusion darstellen (die Dicke wird auf die gleiche Weise wie für Schalen definiert), werden nur in der Ebene belastet und verformt und weisen in Richtung außerhalb der Ebene keine Spannung auf. Es stehen nur zwei Freiheitsgrade zur Verfügung – X- und Y-Translation. In diesem Fall müssen die Flächen auf der XY-Ebene liegen. Dieser Ansatz ist recht verbreitet. Beispielsweise kann eine dünne Platte, die einer Zugspannung ausgesetzt ist, auf diese Weise analysiert werden.
** plane strain - Bei dicken Teilen, die zu ebenen Flächen vereinfacht werden können, die das Profil für die Extrusion darstellen (die Dicke wird auf die gleiche Weise wie bei Schalen definiert), werden sie nur in der Ebene belastet und verformt und weisen in den Richtungen außerhalb der Ebene keine Dehnung auf. Es stehen nur zwei Freiheitsgrade zur Verfügung – X- und Y-Translation. In diesem Fall müssen die Flächen auf der XY-Ebene liegen. Dieser Ansatz ist nicht sehr verbreitet. Beispielsweise kann eine lange Dammwand, Mauer oder Rohrleitung, die über ihre gesamte Länge einem gleichmäßigen Druck ausgesetzt ist, auf diese Weise analysiert werden.
** axisymmetric - Für Teile, die sich auf ebene Flächen vereinfachen lassen, die das Rotationsprofil darstellen (die Dicke ist hier irrelevant) und die gleichmäßig über den gesamten Umfang belastet werden. Es stehen nur zwei Freiheitsgrade zur Verfügung – radiale und axiale Verschiebung. Die Flächen müssen auf der XY-Ebene rechts von der Y-Achse liegen. Dieser Ansatz ist sehr verbreitet. Beispielsweise können einige Druckbehälter, Gummilager, Buchsen, Dichtungen, Flansche und sogar Schraubverbindungen (wobei das Gewinde als achsensymmetrisch behandelt wird) auf diese Weise analysiert werden.

Man sollte bedenken, dass die in CalculiX verwendeten Balken-, Schalen-, ebenen Spannungs-/Dehnungs- und achsensymmetrischen Elemente keine echten Elemente dieser Art sind (sie verwenden nicht die aus der Literatur und anderer Software bekannten klassischen Elementformulierungen) – sie werden intern zu Volumenkörpern erweitert. Dennoch wird ihre Verwendung in den oben genannten Fällen empfohlen.

<span id="Geometry_validity"></span>
== Gültigkeit der Geometrie ==

Die für die FEM verwendete Geometrie muss gültig sein. Vor allem darf es keine Schnittpunkte geben. Dies ist ein häufiges Problem, das oft auftritt, wenn Baugruppen ohne ordnungsgemäße Beschränkungen zwischen den Teilen modelliert werden. Das Werkzeug [[Part_SectionCut/de|Part Schnittansicht]] kann dabei helfen, solche Interferenzen zwischen Teilen zu finden. Natürlich kann [[Part_Fuse/de|Part Vereinigung]] helfen, diese zu beheben, wenn sie beabsichtigt sind. Andere Probleme mit der Geometrie (wie nicht-mannigfaltige Geometrien, redundante Kanten oder Flächen usw.) müssen ebenfalls behoben werden, bevor mit der Vernetzung fortgefahren werden kann. Das Werkzeug [[Part_CheckGeometry/de|Part GeometriePrüfen]] kann dabei hilfreich sein, aber auch visuelle Überprüfungen sind wichtig. Bei der Vorbereitung einer Simulation mit Volumenelementen und bei Zweifeln, ob das Teil wirklich voluminös oder nur eine geschlossene Schale ist, können die oben genannten Werkzeuge (Part Schnittansicht und die Registerkarte „Form-Inhalt“ der Ausgabe des Werkzeugs Part GeometriePrüfen) Klarheit schaffen.

<span id="Surface_normals"></span>
== Oberflächennormalen ==

Bei Oberflächengeometrien, die für Analysen mit Schalen- und 2D-Elementen verwendet werden, können die Normalenrichtungen der Oberflächen von Bedeutung sein. Sie dienen zur Unterscheidung zwischen der positiven und negativen Seite eines Oberflächen-Finite-Elemente-Netzes und beeinflussen Analysefunktionen wie Druckbelastungen und Kontakt. Darüber hinaus erfordern 2D-Analysen (ebene Spannung/Dehnung und achsensymmetrisch) mit CalculiX, dass die Normalen in die positive Z-Richtung zeigen. Sind sie invertiert, treten negative Jacobi-Fehler auf.

Um die Normalen zu überprüfen, verwende einen der folgenden Ansätze:
* Hintergrundbeleuchtung in den  [[Preferences_Editor/de|Voreinstellungen]] aktivieren und die Eigenschaft {{PropertyView|Beleuchtung}} des Flächen-Objekts auf ‚‘Eine Seite'' - Die negative Normalenrichtung erscheint dunkler,
* nutze das [[Macro_Normal_Vector|Makro Normal Vector]],
* vernetze die Oberflächenform in FEM - das Netz wird nur auf der positiven Normalen-Seite eingefärbt.

Um die Normalen umzukehren, verwende das [[Part_ReverseShape/de|Part FormUmkehren]]-Werkzeug.

<span id="Using_surface_meshes_for_FEM"></span>
== Verwendung von Surface-Oberflächennetzen für FEM ==

[[Mesh_MeshObject/de|Polygonnetz-Objekte]], in der Regel aus STL-, OBJ- und ähnlichen Dateien importiert oder im [[Mesh_Workbench/de|Arbeitsbereich Mesh]] erstellt, können nicht direkt für FEM genutzt werden. Es ist notwendig, zuerst eine [[Part_ShapeFromMesh/de|Form aus einem Netz]] zu erzeugen. Anschließend kann diese Form im Arbeitsbereich FEM vernetzt werden, um ein Oberflächen-Finite-Elemente-Netz (Hülle/2D) zu erstellen. Wenn ein Festkörper-Finite-Elemente-Netz (3D) benötigt wird, muss nach der Formgenerierung Folgendes durchgeführt werden: [[Part_MakeSolid/de|Festkörper erstellen]].

Das größte Problem bei Formen, die aus Oberflächennetzen erstellt werden, besteht darin, dass alle ihre Dreiecke zu Flächen der erzeugten Form werden. In der FEM macht dies die Zuweisung von Analysefunktionen (wie Lasten und Randbedingungen) besonders problematisch. Bei ebenen Flächen können durch eine Verfeinerung nach der Konvertierung in einen Volumenkörper die überflüssigen Dreiecksflächen entfernt werden. In der Praxis bleiben jedoch die meisten Flächen erhalten, weshalb Oberflächennetze für die Verwendung in der FEM nicht empfohlen werden. Stattdessen sollten CAD-Geometrien (die in FreeCAD erstellt oder aus STEP/IGES-Dateien importiert wurden) verwendet werden. Manchmal kann es sogar sinnvoll sein, die Geometrie auf der Grundlage des Oberflächennetzes neu zu erstellen.

<span id="Geometry_simplification"></span>
==Geometrie vereinfachen==

<span id="Defeaturing"></span>
=== Entfunktionalisierung ===

Mit CAD-Software erstellte Entwürfe sind in der Regel zu detailliert, um für FEM-Simulationen geeignet zu sein. In vielen Fällen müssen sie zunächst vereinfacht werden. Dieser Schritt wird oft übersehen, ist jedoch sehr wichtig, da es schwierig sein kann, ein gutes Netz zu erhalten, wenn das Teil zu detailliert ist, und selbst wenn ein solches Netz schließlich erhalten wird, kann es sehr dicht sein, was zu unangemessenen Lösungszeiten führt. Daher sollte man sich immer das Design ansehen und versuchen, es so weit wie möglich zu vereinfachen, wobei nur diejenigen geometrischen Merkmale übrig bleiben sollten, die einen signifikanten Einfluss auf die Ergebnisse (Festigkeit/Steifigkeit) haben und daher nicht ignoriert werden können. Die folgenden Merkmale werden in der Regel weggelassen:
* kleine Verrundungen und Fasen,
* kleine Löcher,
* andere kleine Details,
* Schweißnähte,
* Schrauben, Gewinde,
* dekorative Elemente (Logos, Gravuren).

Das Werkzeug [[Part_Defeaturing/de|Part FormelementEntfernen]] und der externe [[Defeaturing_Workbench/de|Arbeitsbereich Defeaturing]] können bei der Vereinfachung von Teilen für Simulationen hilfreich sein.

[[Image:FEM_bracket_original.PNG|400px]]
{{Caption|Ursprungsgeometrie eines Halters}}

[[Image:FEM_bracket_simplified.PNG|400px]]
{{Caption|Die nur mit dem Werkzeug Part FormelementEntfernen vereinfachte Geometrie des Halters}}

<span id="Replacing_parts_with_boundary_conditions"></span>
=== Ersetzen von Teilen mit Randbedingungen ===

Bei Baugruppen (mehr dazu in einem der nächsten Abschnitte) können oft einige Teile aus Simulationen ausgeschlossen und durch Randbedingungen ersetzt werden, wenn sie an analysierte Teile angebracht waren. Ein solcher Ansatz ist gültig, wenn die ausgeschlossenen Teile deutlich steifer sind (im Sinne der strukturellen Steifigkeit, also unter Berücksichtigung nicht nur der Elastizität des Materials, sondern auch der Geometrie des Teils) als die analysierten Teile, mit denen sie verbunden waren. Das liegt daran, dass feste Randbedingungen Steifigkeit einführen (als ob das analysierte Teil mit einem unendlich steifen Bauteil verbunden wäre) und flexible Stützen wie Federelemente in der FEM-Workbench von FreeCAD bei Verwendung von CalculiX nicht verfügbar sind (Elmer hat [[FEM_ConstraintSpring/de|FEM RandbedingungFeder]]).

<span id="Utilizing_planar_symmetry"></span>
=== Ausnutzung ebener Symmetrie ===

Die Vereinfachung der Geometrie für die FEM kann auch bedeuten, dass sie in einer der Symmetrieebenen geschnitten wird, um die Annahme der planaren Symmetrie in der Analyse zu nutzen. Diese Annahme ist nur dann gültig, wenn alle folgenden Aspekte des Modells in einer bestimmten Ebene Symmetrie aufweisen:
* Geometrie,
* Lasten,
* Randbedingungen,
* Reaktion (bei Frequenz-/Knickanalysen unter Verwendung von Symmetrie ist Vorsicht geboten – antisymmetrische Modenformen werden nicht erhalten).
Die Verwendung von Symmetrie (1/2, 1/4 oder 1/8 des Modells) wird nach Möglichkeit empfohlen, da dadurch der Rechenaufwand für die Analyse erheblich reduziert werden kann. Ein weiterer Vorteil besteht darin, dass dadurch einige starre Körperbewegungen eliminiert werden, was die Begrenzung des Teils erleichtert. Eine Symmetrie-Randbedingung sollte auf die Flächen angewendet werden, die zur Ebene des Schnitts gehören:
* Die Translation in Richtung senkrecht zur Symmetrieebene sollte für Volumenkörperteile blockiert werden.
* Die Translation in Richtung senkrecht zur Symmetrieebene und Drehungen, die nicht um die Achse senkrecht zur Symmetrieebene erfolgen, sollten für Schalen- und Balkenbauteile blockiert werden.
Die aufgebrachte Kraft sollte entsprechend reduziert werden, wenn die Symmetrieebene den Bereich schneidet, auf den die Kraft wirkt (irrelevant bei Druckbelastung).

[[Image:FEM_symmetric_vessel.JPG|400px]]
{{Caption|Modell von 1/8 eines zylindrischen Druckbehälters mit Randbedingungen Symmetrie und Innendruckbelastung}}

<span id="Utilizing_cyclic_symmetry"></span>
=== Ausnutzung zyklischer Symmetrie ===

Eine weitere, weniger verbreitete Art der Symmetrie, die in FreeCAD FEM verfügbar ist, ist die zyklische Symmetrie. Sie kann mit der [[FEM_ConstraintTie/de#Cyclic_symmetry|Verbindungsbeschränkung]] definiert werden und ermöglicht es, nur einen einzigen repräsentativen Sektor einer Struktur zu analysieren, die aus solchen kreisförmigen Mustern um eine Achse besteht. Dabei wird davon ausgegangen, dass auch die Randbedingungen und Lasten diese Form der Symmetrie aufweisen. Es können tangentiale Lasten aufgebracht und somit Torsionen simuliert werden. Allerdings wird bei zyklischer Symmetrie üblicherweise die [[FEM_ConstraintCentrif/de|Zentrifugalkraft]] verwendet. Dieser Ansatz kann z. B. für Rotoren, Wellen, Turbinen, Ventilatoren und Schwungräder verwendet werden.

<span id="Geometry_partitioning"></span>
==Unterteilen von Geometrie==

<span id="Partitioning_basics"></span>
=== Grundlagen der Unterteilung ===

Die sogenannte Partitionierung ist eine Aufteilung der Geometrie in kleinere Segmente. In anderer Software wird sie häufig für die Hex-Vernetzung verwendet, aber in FreeCAD kann sie auch aus anderen Gründen nützlich sein:
* Erstellen von Unterbereichen für die Zuweisung von Analysefunktionen,
* Aufteilen von Teilen in Abschnitte aus unterschiedlichen Materialien,
* Erstellen von Bereichen für die [[FEM_MeshRegion/de|Mesh Netzbereich]],
* Steuern des Vernetzungsalgorithmus, indem er gezwungen wird, zusätzlichen Kanten zu folgen (besonders nützlich zur Steuerung des [[FEM_MeshGmshFromShape/de#Mesh_Growth|Netz-Wachstum]]).

<span id="Partitioning_faces_of_solids_with_sketches"></span>
=== Unterteilen von Flächen von Volumenkörpern mit Skizzen ===

Die Hauptanwendung der Partitionierung ist, wenn eine Last (oder eine Randbedingung) nur auf einen ausgewählten Bereich der Oberfläche des Teils angewendet werden soll. Der einfachste Weg, dies für Volumenteile zu erreichen, besteht darin, eine Skizze mit einer geeigneten Kontur auf dieser Fläche zu erstellen und das Werkzeug [[Part_BooleanFragments/de|Part BoolescheBestandteile]] zu verwenden, um die Fläche mit der Skizze zu teilen.

[[Image:FEM_partition.JPG|400px]]
{{Caption|Bauteil mit Teilfläche zum Aufbringen einer Last oder Anwenden einer Randbedingung}}

<span id="Partitioning_volumes_of_solids_with_datum_planes"></span>
=== Unterteilen von Festkörpervolumina mit Bezugsebenen ===

Ein weiterer Grund für die Partitionierung ist, wenn mehrere Materialien auf ein einzelnes Teil aufgebracht werden müssen (ohne mehrere miteinander verbundene Teile verwenden zu müssen). In diesem Fall kann die Partitionierung mithilfe einer [[PartDesign_Plane/de|Bezugsebene]] und dem Werkzeug [[Part_BooleanFragments/de|Boolesche Bestandteile]] im Modus „Compsolid” durchgeführt werden.

<span id="Partitioning_surface_geometries_with_sketches"></span>
=== Oberflächengeometrien mit Skizzen unterteilen ===

Bei Oberflächengeometrien (Schalen) lässt sich eine skizzenbasierte Partition am einfachsten mit dem Werkzeug [[Part_BooleanFragments/de| Boolesche Bestandteile]] erstellen (wie bei den Partitionen auf den Flächen von Volumenkörpern). Wie jedoch [https://forum.freecad.org/viewtopic.php?t=96029#p820241 hier] erläutert, funktioniert dies möglicherweise nicht ordnungsgemäß, wenn die Erstellung von Netzgruppen in den [[FEM_Preferences/de#General|FEM-Einstellungen]] aktiviert ist. In diesem Fall sollte der folgende Ansatz verwendet werden:
# Eine Fläche für eine Seite, z. B. mit dem Werkzeug [[Part_MakeFace/de|Part FlächeErstellen]] (z. B. eine quadratische Platte mit einem kreisförmigen Loch) erstellen.
# Erstellen Sie auf die gleiche Weise eine Fläche für die andere Seite (z. B. eine kreisförmige Fläche, die das Loch in der quadratischen Platte ausfüllt).
# Das Werkzeug [[Part_Builder/de|Part Formgenerator]] mit dem Modus ''Shell from faces'' (Hülle aus Flächen) und deaktiviertem Kontrollkästchen ''Refine shape'' (Form verfeinern) auf die zuvor erstellten Flächen anwenden.

[[Image:FEM_shell_partition.JPG|400px]]
{{Caption|Quadratische Platte mit kreisförmiger Unterteilung}}

<span id="Partitioning_faces_of_solids_with_datum_planes"></span>
=== Unterteilen von Flächen von Volumenkörpern mit Bezugsebenen ===

Das Partitionieren nur ausgewählter Flächen eines Volumenkörpers mithilfe von Bezugsebenen anstelle von Skizzen, ohne das gesamte Volumen zu teilen, ist ebenfalls schwierig. Ein möglicher Ansatz ist:
# Den Körper auf Flächen [[Draft_Downgrade/de|herunterstufen]].
# Diese eine Fläche auswählen und die Bezugsebene auswählen und das Werkzeug [[Part_SliceApart/de|Auseinanderschneiden]] verwenden.
# Den Container „Exploded Slice“, ohne dessen Inhalt zu löschen.
# Alle Flächen und Schnitte auswählen und sie zu einer Schale [[Draft_Upgrade/de|Hochstufen]].
# Die Schale zu einem Volumenkörper [[Draft_Upgrade/de|Hochstufen]] oder das Werkzeug [[Part_MakeSolid/de|In Festkörper konvertieren]] verwenden.
Eine andere Möglichkeit ist:
# Einen [[PartDesign_SubShapeBinder/de|Teilformbinder]] der zu teilenden Fläche erstellen.
# Den Teilformbinder mit der Bezugsebene mithilfe des Werkzeugs [[Part_SliceApart/de| Auseinanderschneiden]] teilen.
# Einen neuen [[PartDesign_Body/de|Körper]] erstellen (um zyklische Abhängigkeiten zu vermeiden).
# Einen neuen Teilformbinder aus den Kanten erstellen, die man aus der Schnittmenge des vorherigen Teilformbinders und der Bezugsebene erhalten hat.
# Den ursprünglichen Körper und den neuen Teilformbinder auswählen und das Werkzeug [[Part_BooleanFragments/de|BoolescheBestandteile]] verwenden.
Weitere Ideen findet man in [https://forum.freecad.org/viewtopic.php?t=98528 diesem Forum-Faden], diese sind jedoch eher fallspezifisch.

[[Image:FEM_split_face_solid.JPG|400px]]
{{Caption|Zylindrische Fläche einer Bohrung, die durch eine Ebene unterteilt ist, um eine 180°-Belastung durch einen Stift auszuüben}}

<span id="Assembly_geometries"></span>
== Geometrie aus Baugruppen ==

<div lang="en" dir="ltr" class="mw-content-ltr">
One of the current major limitations of the FEM workbench is that multiple meshes are not supported. In practice, this means that one cannot mesh each part of the assembly individually and then connect the parts with proper constraints for the analysis. Instead, it's necessary to create a single object containing all the parts of the assembly and mesh it. There are several different options here, all relying on [[Part_Workbench#Boolean_toolbar|Part boolean tools]]. The choice depends on the desired effect - whether the individual parts/volumes and their boundaries should be selectable (e.g. for material assignments or definitions of boundary conditions acting on internal faces) or not:
* [[Part_Fuse|Part Fuse]] - merges the parts, making it impossible to select them individually e.g. for material definitions,
* [[Part_Compound|Part Compound]] - creates a compound object, making it possible to select individual parts,
* [[Part_JoinConnect|Part JoinConnect]] - works like Part Fuse, merges the parts, making it impossible to select them individually,
* [[Part_BooleanFragments|Part BooleanFragments]] - works like Part Compound, making it possible to select individual parts.
It's important to mention that if the parts are exactly touching, a continuous mesh will be created on the boolean object and no constraints will be needed for the simulation (unless Part Compound is used and nodes aren't coincident or [[FEM_MeshGmshFromShape#Properties|Gmsh's ''Coherence Mesh'' property]] is set to {{FALSE}}). If there's even a small gap (or an intersection within a Part Compound) between the parts, the mesh won't be continuous and constraints like [[FEM_ConstraintTie|tie]] or [[FEM_ConstraintContact|contact]] will be needed. Running a frequency analysis is a good way to reveal if the mesh is continuous or not - if the parts are not connected, the first mode shapes with deformation visualized using [[FEM_PostFilterWarp|Warp filter]] will show separation - the parts will "fly away".
</div>

[[Image:FEM_modal_separation.JPG|400px]]
{{Caption|Die erste Modusform einer Frequenzanalyse, visualisiert mit dem Warp-Filter – zwei Würfel mit einem kleinen Anfangsabstand wurden analysiert.}}

Es wird oft empfohlen, boolesche Fragmente im Compsolid-Modus zu verwenden und dann einen [[Part_CompoundFilter/de|Verbundfilter]] darauf anzuwenden, insbesondere bei der Analyse von Baugruppen aus mehreren Materialien und von Volumenkörpern, die ohne Ausschnitte in andere Volumenkörper eingebettet sind (wie im Tutorium [[FEM_Shear_of_a_Composite_Block/de|FEM Scherung eines Verbundwerkstoffblocks]]). Wie auf der Registerkarte ''Shape Content'' des Werkzeugs [[Part_CheckGeometry/de|Geometrie überprüfen]] zu sehen ist (es ist wichtig, dieses Werkzeug in solchen Fällen im Zweifelsfall zu verwenden), entfernt der Verbundfilter den Verbund und lässt nur den Compsolid übrig, der aus mehreren Volumenkörpern besteht, die durch ihre Flächen miteinander verbunden sind. Dieser Ansatz wird empfohlen, da ein Verbund lediglich ein Container mit topologisch nicht verbundenen Formen ist und alle Arten von Formen enthalten kann, sodass der Mesher ihn möglicherweise nicht richtig verwenden kann (nur die Volumenkörper nach Wunsch des Benutzers vernetzen). Operationen wie boolesche Fragmente erzeugen immer Verbünde, und der Verbundfilter wird verwendet, um die relevante Form aus dem Verbund zu extrahieren.

Behelfslösungen für Fehler wie:

{{Code|lang=text|code=
ERROR: femelement_table != count_femelements
Error in get_femelement_sets -- > femelements_count_ok() failed!
}}

und:

{{Code|lang=text|code=
*ERROR in calinput: no material was assigned
to element …
}}

inklusive:
* Das letzte Material ohne zugewiesenen Festkörper belassen (es wird automatisch allen Festkörpern zugewiesen, die nicht in anderen Materialdefinitionen referenziert sind).
* Netgen anstelle von Gmsh zum Erstellen des Netzes verwenden.
* Die Teile etwas voneinander trennen und Verbindungsbeschränkungen anwenden, um sie in der Simulation zu verbinden.

Solche Fehler werden durch fehlende oder sich überschneidende Materialdefinitionen in einigen Elementen verursacht. [https://forum.freecad.org/viewtopic.php?t=97120&start=50#p829295 Dieser Forumsbeitrag] enthält Referenzen, die dies anschaulich veranschaulichen, und der gesamte Faden kann auch bei ähnlichen Problemen hilfreich sein.

<span id="Selection_of_interior_entities"></span>
=== Auswahl von Innenraumobjekten ===

Die Auswahl interner Bereiche (z. B. Flächen/Volumen) kann schwierig sein. Dies kann für die Anwendung verschiedener Materialien, Körperlasten oder Randbedingungen (insbesondere bei thermischen und elektromagnetischen Analysen) erforderlich sein. Es gibt mehrere Möglichkeiten:
* Die [[Std_ToggleClipPlane/de|Schnittebene]] für die Dauer der Auswahl aktivieren und interne Flächen auswählen.
* Das boolesche Objekt ausblenden, nur eines der Teile anzeigen, auf die es angewendet wurde, und es auswählen.
* [[Std_ToggleTransparency/de|Transparenz aktivieren]] und die Verwendung der [[Selection_View/de|Auswahlansicht]] mit aktivierter Option ''Ausgewählte Objektliste'', wie [https://forum.freecad.org/viewtopic.php?t=96984#p826693 hier] beschrieben,
* ein anderes, externes Objekt auswählen und die Eigenschaft ''Referenzen'' auf der Registerkarte ''Daten'' eines bestimmten Analyseelements bearbeiten (erfordert die manuelle Angabe der Nummer des geometrischen Objekts).

<span id="Meshing_basics"></span>
==Grundlagen der Vernetzung==

<span id="Choosing_element_size"></span>
=== Auswahl der Elementgröße ===

Ein zu grobes Netz ist eine der häufigsten Ursachen für Ungenauigkeiten und andere Probleme bei der FEM. Oft liegt dies teilweise an den Einstellungen des automatischen Netzgenerators – dieser erzeugt in der Regel sehr grobe, ungeeignete Netze, wenn die Elementgröße nicht manuell festgelegt, sondern auf einem Standardwert belassen wird. Man sollte immer die ungefähren Abmessungen des Teils kennen, insbesondere die Größe des kleinsten relevanten Merkmals (das Werkzeug [[Std_Measure/de|Std Messen]] kann dazu verwendet werden), und auf dieser Grundlage die richtige maximale Elementgröße festlegen. Es gibt auch eine Einstellung für die minimale Elementgröße, die die Erstellung zu kleiner Elemente um kleine geometrische Merkmale herum verhindern kann, was zu unnötig dichten Netzen führen kann (und manchmal sogar zum Absturz oder Einfrieren von FreeCAD beim Versuch, solche Netze zu generieren). Im Allgemeinen ist es besser, mit einem gröberen Netz zu beginnen (dessen Erstellung weniger Zeit in Anspruch nimmt), sich anzusehen, wie es aussieht (hierfür ist etwas Erfahrung erforderlich), und es bei Bedarf zu verfeinern. Oft ist es sinnvoll, ein dichtes Netz nur um die Bereiche von Interesse (Stellen mit großen Spannungsgradienten/Konzentrationen – Kerben) herum zu verwenden und relativ grobe Netze außerhalb dieser Bereiche. Auf diese Weise kann die Anzahl der Elemente erheblich reduziert werden, was zu kürzeren Lösungszeiten führt. Die lokale Netzverfeinerung wird mit [[FEM_MeshRegion/de|FEM NetzBereich]] definiert.

[[Image:FEM_default_mesh.PNG|400px]]
{{Caption|Standardwerte, zu grobes Netz}}

[[Image:FEM_globally_refined_mesh.PNG|400px]]
{{Caption|Global verfeinertes Netz}}

[[Image:FEM_locally_refined_mesh.PNG|400px]]
{{Caption|Lokal verfeinertes Netz}}

<span id="Choosing_element_type"></span>
=== Auswahl des Elementtyps ===

Die Wahl des Elementtyps ist nicht einfach und hängt von vielen Faktoren ab, aber die allgemeine Regel lautet, dass hexaedrische und quadrilaterale Elemente gegenüber tetraedrischen und dreieckigen Elementen vorzuziehen sind. Komplexe Geometrien können jedoch nicht mit hexaedrischen Elementen vernetzt werden, und FreeCAD kann diese nicht ordnungsgemäß generieren (nur unter Verwendung des Unterteilungsalgorithmus des Gmsh-Mesher, dessen Ergebnisse jedoch nicht den Erwartungen an ein hexagonales Netz entsprechen). Quad- oder quad-dominierte Netze können normalerweise auf Oberflächen generiert werden – siehe [https://forum.freecad.org/viewtopic.php?t=20351 dieser Forenthread]). Hexaedrische Elemente können aus externen Netzgeneratoren importiert werden, wie z. B. [https://gmsh.info Gmsh] und im Arbeitsbereich FEM verwendet, wie in [https://www.youtube.com/watch?v=vylt24G7qj4&t=932s diesem Video] gezeigt.

<span id="Choosing_element_order"></span>
=== Auswahl der Elementreihenfolge ===

Die Wahl der Elementordnung (erste oder zweite Ordnung) hängt von den Analysebedingungen ab, in den meisten Fällen werden jedoch Elemente zweiter Ordnung bevorzugt. Dies gilt insbesondere für dreieckige und tetraedrische Elemente – ihre linearen Versionen erster Ordnung werden normalerweise nicht für den regulären Gebrauch empfohlen und sollten nur als Füllelemente in Bereichen von geringer Bedeutung verwendet werden. Da FreeCAD jedoch keine hexaedrischen Elemente korrekt generieren kann, können in einigen Fällen lineare Tetraeder verwendet werden, wenn die Netze dicht genug sind. Insbesondere bei der Durchführung von Analysen mit [[FEM_ConstraintContact/de|Kontakt-Randbedingungen]].

<span id="Negative_Jacobians"></span>
== Negative Jacobi-Matrizen ==

<div lang="en" dir="ltr" class="mw-content-ltr">
If the above rules are followed (especially regarding geometry validity, defeaturing and element size selection), the mesh should be generated correctly. However, in some cases, the geometry can't be simplified too much, or the modeling procedure is appropriate but leads to small edges and faces anyway. Then meshing with second-order elements may fail due to negative Jacobians. The reason is that meshers have to follow the CAD model and put the mid-side nodes of second-order elements on the geometry. With more complex shapes, it may lead to elements being stretched so much that they become inverted. Jacobian is one of the most common mesh quality measures. It represents the element's deviation from the ideal shape. It becomes negative when the element turns inside out (becomes inverted) either due to large deformation during the analysis (not considered here) or because of the aforementioned meshing issues. Negative Jacobians in FreeCAD FEM might be reported by Gmsh or by CalculiX. Their locations in the mesh are highlighted when CalculiX analyses are submitted using the [[FEM_SolverRun|Run solver calculations]] button. The following tips can help eliminate them:
* set the ''Second Order Linear'' property of the [[FEM_MeshGmshFromShape|FEMMeshGmsh]] object to ''true'' - this results in the mid-side nodes of second-order elements being just added in the middle of straight (initially) first-order element edges, without snapping them to the geometry and resolves the issue in most cases,
* use Netgen instead of Gmsh - Netgen is known to be less prone to negative Jacobian issues but also doesn't report them so the user may find out only when submitting the analysis,
* further reduce the element size,
* export the geometry, try meshing it in Gmsh or Netgen (NGSolve) GUI or other standalone mesher (like Salome_Meca) - those tools have additional features that can help get rid of negative Jacobians (for example, Gmsh has so-called "High-order tools"),
* use first-order elements - should be done only as a last resort since first-order tetrahedrons are known for their inaccuracy.
</div>

Unabhängig von diesen Tipps ist es wichtig, noch einmal zu betonen, dass negative Jacobimatrizen in der Regel auf unordentliche Modellierungsansätze und mangelnde Vorbereitung der Geometrie für die Analyse zurückzuführen sind (besonders häufig bei STEP-Modellen, die von verschiedenen Webseiten heruntergeladen wurden). Selbst wenn in solchen Fällen letztendlich ein Netz generiert wird, sind die Ergebnisse wahrscheinlich von schlechter Qualität (denke an die im ersten Absatz erwähnte GIGO-Regel). Daher sollte die Bereinigung und Vorbereitung der Geometrie für die FEM immer Vorrang haben.

<span id="Mesh_convergence_studies"></span>
== Studien zur Netzkonvergenz ==

Bei allen anspruchsvollen Projekten, die genaue Ergebnisse erfordern, werden Studien zur Netzkonvergenz empfohlen. Der Grund dafür ist, dass sich die Ergebnisse stark verändern können und sich den korrekten Werten annähern, wenn das Netz verfeinert wird. Es sollte folgender Ansatz verwendet werden:
# Nachdem man die ersten Ergebnisse erhalten und notiert hat (in der Regel die maximale von-Mises-Spannung, die von-Mises-Spannung an einer bestimmten Stelle und die maximale Verschiebung), verfeinert man das Netz (global oder besser lokal – mit [[FEM_MeshRegion/de|FEM NetzBereich]]) und führt die Simulation erneut durch.
# Die Ergebnisse überprüfen und die neuen Werte notieren. Wenn diese erheblich von den ursprünglichen Ergebnissen abweichen, das Netz weiter verfeinern und die Analyse erneut durchführen.
# Wiederholen Sie den Vorgang, wenn sich die Ergebnisse mit der Verfeinerung des Gitters noch immer erheblich ändern (in der Regel zunehmen).
In der Regel ist es hilfreich, ein Diagramm mit einem bestimmten Ergebnis im Vergleich zur Gitterdichte zu erstellen. Auf diese Weise lässt sich leichter erkennen, wann die Ergebnisse zu konvergieren beginnen. Die akzeptable Abweichung der Ergebnisse zwischen zwei Durchläufen liegt in der Regel bei einigen Prozent (z. B. unter 5 %).

In einigen Fällen kann es vorkommen, dass die maximale Spannung unabhängig von der Dichte des Netzes unbegrenzt ansteigt. Ein solcher nicht physikalischer Effekt wird als Spannungssingularität bezeichnet. Er kann aus folgenden Gründen auftreten:
* konzentrierte Kräfte, die auf Volumen- und Schalenmodelle ausgeübt werden,
* Randbedingungen, die auf Punkte (einzelne Knoten) angewendet werden,
* scharfe Ecken,
* Kontakt an einer Ecke.
Typische Möglichkeiten zum Umgang mit Spannungssingularitäten sind:
* Aufbringen von Lasten und Randbedingungen auf kleine Flächen statt auf Punkte – siehe Abschnitt über Partitionierung oben,
* Hinzufügen kleiner Verrundungen an scharfen Ecken (eine Ausnahme von der Regel, kleine Verrundungen bei der Vereinfachung der Geometrie für FEM wegzulassen),
* Einbeziehung der Plastizität in das Materialverhalten, um eine Spannungsumverteilung zu ermöglichen und die Spannungen auf Werte zu begrenzen, die durch die Plastizitätsdefinition zugelassen sind, unter Beachtung des richtigen Fließgrades (plastische Verformung),
* Ignorieren von Singularitäten und, wenn möglich, Ablesen der Spannungen außerhalb dieser Singularitäten (basierend auf dem St.-Venant-Prinzip).

[[Image:FEM_mesh_convergence.PNG|400px]]

{{Caption|Typische Konvergenzdiagramme für Gitter:<br>
- Die Verschiebung ('''grüne Kurve''') konvergiert schnell,<br>
- Die maximale Spannung an einer Kerbe wie einem Loch ('''blaue Kurve''') erfordert mehr Iterationen der Netzverfeinerung, um zu konvergieren.<br>
- Die maximale Spannung an einer scharfen Ecke mit einer festen Randbedingung ('''rote Kurve''') konvergiert überhaupt nicht. Es tritt eine Spannungssingularität auf, sodass eine kleine Verrundung hinzugefügt und die Verbindung realistischer und flexibler modelliert werden müsste, um dieses Verhalten zu vermeiden.<br>}}


{{FEM_Tools_navi{{#translation:}}}}
{{Userdocnavi{{#translation:}}}}