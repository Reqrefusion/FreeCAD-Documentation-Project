<languages/>

{{TutorialInfo/de
|Topic=Tutorium Wikihouse-Migration
|Level=Fortgeschrittene/Könner
|Time=60 Minuten
|Author=
|FCVersion=
|Files=
}}

<span id="Introduction"></span>
==Einleitung==

Diese Anleitung zeigt dir, wie du [https://sketchup.com/ SketchUp]-Dateien, die vom [https://wikihouse.cc/ Wikihouse]-Projekt verwendet werden, in FreeCAD konvertieren kannst, indem du die [[Arch_Panel/de|Arch Tafel]]-Werkzeuge in FreeCAD verwendest. Das Ergebnis ist eine vollständige Kopie der ursprünglichen SketchUp-Datei, mit der Ausnahme, dass sie vollständig parametrisch geworden ist. Der Grad der Parametrisierung der endgültigen Datei hängt von der Arbeit ab, die du dafür aufwendest, wie weiter unten erläutert wird. Es ist jedoch durchaus möglich, die Dinge Schritt für Schritt zu erledigen und die Wikihouse-Datei ziemlich schnell wieder aufzubauen und die langwierigere Konvertierung von Basisprofilen in Skizzen für später zu überlassen.

Dieses Tutorial setzt mittlere Kenntnisse in FreeCAD voraus, d.h. du bist in der Lage, dich zwischen den verschiedenen Arbeitsbereichen und Werkzeugen zurechtzufinden, kannst bereits einfache Objekte modellieren und bist vor allem mit [[Draft_Move/de|Draft Bewegen]] und [[Draft_Rotate/de|Draft Drehen]] vertraut. Es werden hauptsächlich [[Draft_Workbench/de|Draft-]] und [[Arch_Workbench/de|Arch-]] Werkzeuge verwendet, aber für die Umwandlung der Grundprofile in Skizzen werden Kenntnisse des Arbeitsbereiches [[Sketcher_Workbench/de|Sketcher]] erforderlich sein.

Da das Wikihouse-Projekt von Natur aus offen ist, sind die Dateien leicht auf der Projektwebsite zu finden, aber auch im [https://3dwarehouse.sketchup.com/search.html?q=wikihouse&backendClass=both SketchUp 3D Warehouse] oder in den [https://github.com/wikihouseproject GitHub-Repositorys] des Projekts. Das vom Projekt bevorzugte Format ist Sketchup, daher sind die meisten Dateien in diesem Format verfügbar.

Im folgenden Tutorial haben wir die Datei [https://github.com/wikihouseproject/Microhouse/blob/master/microhouse_0.5_chassis.skp Chassis] aus dem Wikihouse-Teilprojekt Microhouse verwendet.

<span id="Preparing_the_Sketchup_file"></span>
== Vorbereiten der Sketchup Datei ==

Als Erstes muss die Datei in SketchUp geöffnet werden und alles gelöscht werden, was nicht exportiert werden soll. Wir exportieren nur einen Teil des Microhouse, daher muss alles andere gelöscht werden.

[[Image:Arch_Wikihouse_05.jpg]]

Die Wikihouse-Elemente in SketchUp werden auf eine bestimmte Weise hergestellt: Durch das Zusammenfügen kleiner "Teile" werden die verschiedenen Komponenten erstellt:

[[Image:Arch_Wikihouse_06.jpg]]

So werden wir in FreeCAD nicht vorgehen. Da eine der leistungsstärksten Funktionen von FreeCAD die [[Sketcher_Workbench/de|beschränkten Skizzen]] sind, sollten wir diese besser nutzen und alle unsere Wikihouse-Elemente auf Skizzen basieren. Auf diese Weise kann jede Änderung im  [[Sketcher_Workbench/de|Arbeitsbereich Sketcher]] vorgenommen werden, was wesentlich komfortabler ist.

Um unsere SketchUp-Objekte in FreeCAD-Skizzen umzuwandeln, die dann zur Erstellung von [[Arch_Panel/de|Arch Platte]]-Objekten verwendet werden können, müssen wir aus jedem Wikihouse-Bauteil eine flache Fläche extrahieren. Die Dicke wird später in FreeCAD direkt in den Arch Panel-Eigenschaften wieder hinzugefügt. Auf diese Weise bleibt es auch parametrisch. Um jede Wikihouse-Komponente in eine einzelne, flache Fläche umzuwandeln, öffnet man jede Komponente durch Doppelklick, wählt dann jede Unterkomponente aus und klickt mit der rechten Maustaste → Explodieren, bis alle Unterkomponenten explodiert sind und die Komponente nur noch aus Flächen und Kanten besteht:

[[Image:Arch_Wikihouse_08.jpg]]

Sobald dies erledigt ist, wählt man alles in der Komponente aus und hebt die Auswahl jeder Frontfläche Ihrer Komponente durch Umschalt + Doppelklick auf. Darauf achten, dass man doppelt klickt und nicht einfach nur einmal, da man sonst nur die Fläche und nicht deren Randkanten (die wir ebenfalls behalten müssen) abwählt. Danach haben wir alles abgewählt, was wir behalten möchten, sodass wir nur noch die Löschtaste drücken müssen. Jetzt besteht unsere Komponente nur noch aus einer großen flachen Fläche.

[[Image:Arch_Wikihouse_07.jpg]]

Dies wiederholt man für jede Komponente. Da viele davon doppelt vorhanden sind, ist dies keine so große Aufgabe, wie es zunächst scheint. Außerdem erhält man durch diesen Schritt ein gutes Verständnis dafür, wie das Wikihouse-System funktioniert, falls man damit noch nicht vertraut ist.

Wenn unser Haus vollständig aus flachen Elementen besteht, können wir alles auswählen und in eine .dae-Datei exportieren, die wir dann in FreeCAD importieren können. Man achtet darauf, die Option "Alle triangulieren" zu aktivieren.

<span id="Solving_the_double_faces_bug"></span>
== Lösung des Doppelflächen Fehlers ==

Es gibt ein unangenehmes Problem, für das ich noch keine bessere Lösung gefunden habe: Bei aus SketchUp in das .dae-Format exportierten Netzen werden die Flächen dupliziert. Aus jeder Fläche werden tatsächlich zwei Flächen. Die einfachste Lösung, die ich bisher gefunden habe, besteht darin, die exportierte Datei in [https://blender.org Blender] zu öffnen und zu reparieren:

# Die DAE-Datei in Blender öffnen ({{MenuCommand|Datei → Importieren → Collada}}).
# Eine Komponente auswählen und {{Button|TAB}} drücken, um den Bearbeitungsmodus aufzurufen.
# {{Button|A}} drücken, um die Auswahl aufzuheben, und dann erneut {{Button|A}} drücken, um alles auszuwählen.
# {{Button|W}} drücken → Duplikate entfernen.
# {{Button|TAB}} drücken, um den Bearbeitungsmodus zu verlassen.
# Diesen Vorgang für alle Komponenten wiederholen.
# Eine neue [[Arch DAE/de|DAE]]-Datei ({{MenuCommand|Datei → Exportieren → Collada}}) speichern.

Normalerweise sollte der oben beschriebene Vorgang den Maßstab nicht verändern, aber es ist immer ratsam, mit den Messwerkzeugen zu überprüfen, ob die importierte Geometrie den richtigen Maßstab hat, bevor man fortfährt. Gegebenenfalls muss man die Collada-Exporteinstellungen von Blender anpassen.

<span id="Importing_and_converting_to_wires"></span>
== Importieren und Umwandeln in Drähte ==

Man beachte, dass es möglicherweise einfacher ist, schrittweise vorzugehen und Objekte gruppenweise zu bearbeiten und zu exportieren, wie wir es unten getan haben. Wir haben nur die erste Ebene exportiert, die aus gelben Elementen in SketchUp besteht. Diese Elemente werden als [[Mesh_Workbench/de|Mesh]]-Objekte in FreeCAD importiert:

[[Image:Arch_Wikihouse_09.jpg]]

Der nächste Schritt besteht darin, aus jedem unserer Netze Linienzüge zu erstellen. Dazu gibt es ein praktisches Makro namens [[Macro_Extract_Wires_from_Mesh/de|Makro Linienzüge aus Netzen extrahieren]], das genau das tut. Man installiert es (Anweisungen findet man auf der Seite [[Macros/de|Makros]]), und konvertiert dann nacheinander (man kann auch alle auf einmal konvertieren, aber dieses Makro benötigt etwas Zeit) alle unsere Netze in Drahtmodelle:

[[Image:Arch_Wikihouse_10.jpg]]

Wir könnten nun bereits [[Arch_Panel/de|Arch Platte]]-Objekte aus jedem dieser drahtartigen Objekte erstellen, indem wir sie einfach auswählen und auf die Schaltfläche [[Arch_Panel/de|Arch Platte]] klicken. Allerdings wäre ihre Grundform nicht parametrisch. Wir haben nun mehrere Möglichkeiten: Wir könnten jede Komponente mit dem Werkzeug [[Draft_Draft2Sketch/de|Draft ZeichnungZuSkizze]] in eine Skizze umwandeln, aber das wären ziemlich umfangreiche Skizzen, die auf einem langsamen Rechner möglicherweise nicht sehr gut zu handhaben wären, oder wir könnten jeden einzelnen Linienzug (die Umrisse und jedes Loch) der Skizze in eine separate Skizze umwandeln. Dies würde es uns beispielsweise ermöglichen, ein typisches Loch wiederzuverwenden, es nur einmal zu erstellen und es dann mit [[Draft_Clone/de|Draft Klonen]] zu duplizieren, um die anderen Löcher zu erstellen. Auf diese Weise müsste man nur eines bearbeiten, um alle zu bearbeiten.

Das [[Macro_Extract_Wires_from_Mesh/de|Makro Linienzüge aus Netzen extrahieren]] findet manchmal auch keine geschlossenen Linienzüge innerhalb eines Netzes, wodurch keine korrekten Platten erzeugt werden. Eine einfache Vorgehensweise zum Neuzusammensetzen der Linienzüge einer Komponente ist folgende:

# Die Komponente auswählen und optional alles andere ausblenden, um besser sehen zu können.
# [[Draft_Downgrade/de|Draft Herabstufen]] auswählen. Die Komponente wird in eine Reihe einzelner Kanten zerlegt.
# Mit der Auswahl der Löcher mit Strg oder mit Umschalt + B beginnen, um einen Auswahlrahmen zu erstellen.
# [[Draft_Upgrade/de|Draft Hochstufen]] drücken, um jedes Loch wieder in einen einzelnen Linienzug umzuwandeln.
# Schließlich alle verbleibenden einzelnen Kanten im Baum auswählen, die den Umriss bilden, und führen [[Draft_Upgrade/de|Draft Hochstufen]] ausführen.
# '''Part → Verbund erstellen''' (Teil → Verbindung erstellen) auswählen, um alle diese Linienzüge wieder zu einem Objekt zusammenzufügen.
# Die Verbindung auswählen und die Taste [[Arch_Panel/de|Arch Platte]] (Bogenfeld) drücken.

[[Image:Arch_Wikihouse_11.jpg]]

Hier gibt es viele mögliche Strategien, je nachdem, wie editierbar und präzise das Ergebnis sein soll. Das Objekt [[Arch_Panel/de|Arch Platte]] benötigt ein Basisobjekt aus Linienzügen. Es spielt keine Rolle, wie dieses Objekt erstellt wird, ob es sich um eine einzelne Skizze handelt oder, wie im obigen Beispiel, um eine Zusammensetzung aus verschiedenen Skizzen oder einem Entwurfsobjekt.

<span id="Converting_to_Sketches"></span>
== Umwandlung in Skizzen ==

Es ist auch möglich, diesen Teil später zu erledigen. Man könnte bereits Platten aus jeder der Komponenten erstellen, aber schauen wir uns zunächst einmal an, wie man ein drahtähnliches Objekt in eine Skizze umwandelt:

# Eine Kopie Ihres drahtartigen Objekts mit {{Button|Strg}}+{{Button|C}}, {{Button|Strg}}+{{Button|V}} erstellen. So können wir es ändern, aber dennoch eines an der richtigen Stelle behalten.
# Es mit [[Draft_Move/de|Draft Bewegen]] und [[Draft_Rotate/de|Draft Rotate]] so verschieben und drehen, dass es in der XY-Ebene liegt. Dies ist nicht unbedingt erforderlich, aber sonst schlägt der nächste Punkt manchmal fehl.
# [[Draft Draft2Sketch/de|Draft ZeichnungZuSkizze]] verwenden, um den Linienzug in eine Skizze umzuwandeln. Man beachte, dass dies bei großen Linienzügen fehlschlagen oder sehr lange dauern kann. Am besten zerlegt man das Objekt wie oben gezeigt in einzelne Linienzüge.
# Wenn der obige Befehl fehlschlägt, funktioniert es in der Regel besser, wenn man [[Draft_Upgrade/de|Draft Hochstufen]] zweimal auf ein drahtähnliches Objekt anwendet, um es in eine Fläche und dann in einen [[Draft_Wire/de|Draft Linienzug]] umzuwandeln, bevor man [[Draft_Draft2Sketch/de|Draft ZeichnungZuSkizze]] verwendet, da der Draft Linienzug die Reihenfolge der Scheitelpunkte innerhalb eines Linienzuges besser verfolgt.
# Kurven bestehen aus mehreren kleinen Segmenten. Sie können unverändert bleiben, führen jedoch zu vielen Endpunktbeschränkungen. Es ist besser, sie durch Bögen zu ersetzen. Dies ist relativ einfach: Man Löscht einfach die kleinen Segmente und man ersetzt sie durch einen Bogen. Der Bogen kann dann tangential zu den benachbarten Segmenten gemacht werden. Man stellt jedoch sicher, dass die Position dieser Segmente gesperrt ist, bevor man dies tut, da sie durch diesen Vorgang verschoben werden.
# Wenn man mit mehreren Skizzen gearbeitet hat, erstellt man daraus einen [[Part_Compound/de|Part Verbund]].
# Daraus eine [[Arch_Panel/de|Arc Platte]] erstellen.
# Man dreht/verschiebt es mit [[Draft_Move/de|Draft Bewegen]] und [[Draft_Rotate/de|Draft Verschieben]] zurück in seine Position.

[[Image:Arch_Wikihouse_12.jpg]]

<span id="Rebuilding_the_Wikihouse_and_exporting_cut_sheets"></span>
==Neuaufbau des Wikihouse und Exportieren der Schnittmusterbögen==

Außerdem darauf achten, keine doppelten Teile erneut zu erstellen. Stattdessen das Werkzeug [[Draft_Clone/de|Draft Klonen]] auswählen, um Teile auf der Grundlage desselben Profils zu duplizieren, sodass sie alle dasselbe Profilobjekt gemeinsam haben. Da wir nun die Kontur an der richtigen Stelle als Orientierung haben, ist es relativ einfach, den Klon mit [[Draft_Rotate/de|Draft Drehen]] und [[Draft_Move/de|Draft Bewegen]] zu drehen und an die richtige Position zu verschieben.

Nach einer Weile ist unser gesamter Microhouse-Bereich fertig.

[[Image:Arch_Wikihouse_01.jpg]]

Wir können nun ganz einfach die Zuschnittblätter erstellen, bei denen es sich um DXF-Dateien handelt, die an die Werkstatt gesendet werden, die die eigentlichen Platten zuschneidet. Am einfachsten geht dies, indem man mit {{Button|Strg}}+{{Button|A}} alles im Dokument auswählt und dann das Werkzeug [[Arch_Panel_Cut/de|Arch Plattenzuschnitt]] verwendet. Dadurch wird für jedes in der Auswahl gefundene Panel-Objekt ein Panel-Cut-Objekt erstellt. Indem wir diese voneinander entfernen, erhalten wir eine klare Übersicht über alle unsere Teile:

[[Image:Arch_Wikihouse_02.jpg]]

Anschließend müssen wir unsere Teile "verschachteln", d. h. sie so verschieben und drehen, dass sie möglichst viel Platz auf einer bestimmten Platte einnehmen, um möglichst wenig Materialverlust zu verursachen. Dieser Vorgang muss leider von Hand durchgeführt werden, aber wenn man ein Wikihouse-Projekt verwendet, für das bereits Zuschnitte erstellt wurden, geht das Kopieren recht schnell:

<div lang="en" dir="ltr" class="mw-content-ltr">
# To make sure everything will stay in the XY plane, it is advised to set the [[Draft_SelectPlane|Working Plane]] to XY (top)
# Create an [[Arch_Panel_Sheet|Arch Panel Sheet]]
# Give it the desired width and height values (Wikihouses are typically printed on 122x244cm plywood sheets)
# Move it to a convenient place with [[Draft_Move|Draft Move]]
# Optionally, set its margin values to help you position the cut pieces
# Move and rotate the individual [[Arch_Panel_Cut|Arch Panel Cut]] objects so they fit inside the Panel Sheet
# When you are more or less ready, select the Panel Sheet, and double click it in the [[Tree_view|tree view]] to enter Edit mode
# Select all the Panel Cuts you wish to insert in it (you may want to switch the tree view to the "project" tab to select in the tree)
# Select the "group" section in the Panel Sheet's Task view
# Press the {{Button|Add}} button
# Press the {{Button|OK}} button
</div>

In der Aufgabenansicht des Platten-Blattes gibt es auch eine Schaltfläche, mit der man die einzelnen Platten-Schnitte verschieben kann, nachdem sie in das Blatt eingefügt wurden. Nach einer Weile sind unsere Blätter fertig:

[[Image:Arch_Wikihouse_03.jpg]]

Der letzte Schritt besteht darin, einfach alle Blätter auszuwählen und sie dann über das Menü Datei → Exportieren in das DXF-Format zu exportieren. Der Inhalt der Blätter wird in verschiedenen Ebenen exportiert, wobei die gleiche Farbcodierung verwendet wird, die auch im Wikihouse-Projekt üblich ist:

[[Image:Arch_Wikihouse_04.jpg]]

Diese Dateien können nun an die Werkstätten gesendet werden, die den eigentlichen Schnitt durchführen. Es wäre auch möglich, den G-Code, der an die CNC-Maschine gesendet werden soll, direkt aus FreeCAD zu generieren, aber das ist Thema eines anderen Tutoriums.