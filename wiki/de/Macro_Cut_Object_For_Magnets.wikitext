<languages/>

{{Macro
|Name=Macro Cut Object for Magnets
|Name/de=Makro Objekt für Magnete ausschneiden
|Icon=Macro_Cut_Object_For_Magnets.png
|Description=Schneidet ein Objekt entlang einer Ebene und fügt ausgerichtete Magnetlöcher mit Oberflächenkollisionserkennung hinzu. Erstellt zwei Teile mit perfekt ausgerichteten Löchern zum Einbetten von Magneten, mit denen die Teile zusammengesteckt werden können.
|Author=Sean P. Kane
|Version=0.6.1
|Date=2026-01-12
|FCVersion=0.19+
|Download=[https://wiki.freecad.org/images/thumb/e/e3/Macro_Cut_Object_For_Magnets.png/48px-Macro_Cut_Object_For_Magnets.png Werkzeugleistensymbol]
|SeeAlso=[[Part_Slice/de|Part Zerschneiden]], [[PartDesign_Hole/de|PartDesign Bohrung]]
}}

<span id="Description"></span>
==Beschreibung==

Dieses Makro schneidet ein 3D-Objekt entlang einer bestimmten Ebene und fügt automatisch ausgerichtete Magnetlöcher zu beiden resultierenden Teilen hinzu. Die Löcher werden mit intelligenter Kollisionserkennung positioniert, um sicherzustellen, dass sie nicht durch die Außenwände des Objekts brechen.

Dies ist besonders nützlich für:
* Die Erstellung mehrteiliger Drucke, die mit eingebetteten Magneten zusammengefügt werden.
* Die Aufteilung großer Objekte für kleinere 3D-Druckerbett, wobei die Ausrichtung beibehalten wird.
* Das Hinzufügen magnetischer Verschlussmechanismen zu Gehäusen und Hüllen.

'''Wichtigste Merkmale:'''
* Schneiden entlang voreingestellter Ebenen (XY, XZ, YZ) oder Modellbezugsebenen.
* Automatische Lochplatzierung mit gleichmäßiger Verteilung entlang der Schnittkante.
* Die Oberflächenkollisionserkennung verhindert, dass Löcher Wände durchbrechen.
* Konfigurierbarer Lochdurchmesser, Tiefe und Anzahl.
* Einstellungen für bevorzugten und minimalen Kantenabstand.
* Intelligente Neupositionierung von Löchern, wenn die anfängliche Platzierung die Sicherheitsprüfungen nicht besteht.
* Erstellt PartDesign::Body-Objekte mit parametrischen Lochfunktionen.
* Unterstützt das erneute Schneiden bereits geschnittener Objekte (behält vorhandene Löcher bei).
* Trennt die beiden Teile automatisch für eine einfache Ansicht.

<span id="Usage"></span>
==Anwendung==

<div lang="en" dir="ltr" class="mw-content-ltr">
# Open a document with the object you want to cut.
# Optionally select the object and/or a datum plane before running the macro.
# Run the macro from '''Macro → Macros → CutObjectForMagnets → Execute'''.
# In the dialog:
#* Select the body to cut from the dropdown.
#* Choose the cut plane type (Preset or Model Plane).
#* For preset planes, set the offset from origin.
#* Configure magnet hole parameters:
#** '''Diameter''': Hole diameter (should match your magnet size).
#** '''Depth''': Hole depth from cut surface.
#** '''Number of Holes''': Total holes to create.
#** '''Edge Clearance (Preferred)''': Ideal distance from hole edge to object surface.
#** '''Edge Clearance (Minimum)''': Minimum acceptable clearance.
# Click "Execute Cut".
</div>

[[File:MacroCutObjectForMagnetsDialog.png|400px|center]]

<span id="Example"></span>
==Beispiel==

Dieses Bild zeigt ein Vasenobjekt in seiner ursprünglichen Form und nachdem es mehrfach mit dem Makro geschnitten wurde. Anschließend können Magnete in das Objekt eingesetzt und das Objekt wieder zusammengesetzt werden. In diesem Beispiel wurde eine „zerbrechliche“ Vase für eine Theateraufführung hergestellt, aber es gibt auch viele andere Verwendungsmöglichkeiten.

[[File:CutObjectForMagnetsExample.png|400px|center]]

<span id="How_It_Works"></span>
==Wie es funktioniert==

'''Schneidevorgang:'''
# Erstellt einen großen Halbraumkasten, der an der Schnittebene ausgerichtet ist.
# Teilt das Objekt mithilfe boolescher Operationen in zwei Teile.
# Erstellt PartDesign::Body-Container für jede Hälfte.

<div lang="en" dir="ltr" class="mw-content-ltr">
'''Hole Placement Algorithm:'''
# Calculates hole positions evenly distributed along the cut face perimeter.
# For each position, validates against BOTH parts (not just one).
# Uses preferred clearance first, falls back to minimum if needed.
# Checks for hole-to-hole spacing (minimum 2x diameter).
# Repositions holes that fail safety checks using multiple strategies:
#* Reduced clearance at same position.
#* Increased inset from edge.
#* Alternative positions along the perimeter.
</div>

<div lang="en" dir="ltr" class="mw-content-ltr">
'''Safety Features:'''
* Creates test cylinders to check if holes would break through walls.
* Validates each hole against both the top and bottom parts.
* Skips holes that cannot be safely placed.
* Reports repositioned and skipped holes in the console.
</div>

<span id="Parameters"></span>
==Parameter==

<div lang="en" dir="ltr" class="mw-content-ltr">
{| class="wikitable"
! Parameter !! Description !! Default
|-
| Plane Type || "Preset Plane" (XY/XZ/YZ) or "Model Plane" (datum plane) || Preset Plane
|-
| Offset || Distance from origin for preset planes || 0 mm
|-
| Diameter || Magnet hole diameter || 3 mm
|-
| Depth || Hole depth from cut surface || 3 mm
|-
| Number of Holes || Total holes to create || 6
|-
| Edge Clearance (Preferred) || Ideal distance from hole edge to object surface || 2 mm
|-
| Edge Clearance (Minimum) || Minimum acceptable clearance (used during repositioning) || 0.5 mm
|}
</div>

<span id="Requirements"></span>
==Voraussetzungen==

* FreeCAD 0.19 oder höher.
* Ein Objekt mit einer Festkörper-Form (Part-Objekt oder PartDesign-Körper).
* Für den Modellebenenmodus: eine Bezugsebene oder ein Objekt mit ebenen Flächen.

==Installation==

<div lang="en" dir="ltr" class="mw-content-ltr">
# Download the macro file: [https://raw.githubusercontent.com/spkane/freecad-robust-mcp-and-more/refs/heads/main/macros/Cut_Object_for_Magnets/CutObjectForMagnets.FCMacro CutObjectForMagnets.FCMacro].
# Copy the file to your FreeCAD macro directory:
#* '''macOS''': {{FileName|~/Library/Application Support/FreeCAD/Macro/}}
#* '''Linux''': {{FileName|~/.local/share/FreeCAD/Macro/}}
#* '''Windows''': {{FileName|%APPDATA%/FreeCAD/Macro/}}
# Optionally, download the toolbar icon and place it in the same directory.
</div>

<span id="Tips"></span>
==Tipps==

<div lang="en" dir="ltr" class="mw-content-ltr">
* '''Magnet sizing''': Measure your magnets carefully. Common sizes are 3mm, 5mm, and 6mm diameter.
* '''Add tolerance''': Consider adding 0.1-0.2mm to the diameter for easier magnet insertion.
* '''Depth planning''': Set hole depth slightly deeper than magnet height to ensure flush or recessed fit.
* '''Edge clearance''': For thin-walled objects, reduce the preferred clearance but keep minimum clearance high enough to prevent wall breakthrough.
* '''Re-cutting''': The macro detects existing magnet holes and preserves them when cutting already-cut parts.
</div>

<span id="Source_Code"></span>
==Quellcode==

Der vollständige Quellcode wird auf GitHub gehostet:
* [https://github.com/spkane/freecad-robust-mcp-and-more/blob/main/macros/Cut_Object_for_Magnets/CutObjectForMagnets.FCMacro CutObjectForMagnets.FCMacro auf GitHub]

<span id="Script"></span>
==Skript==

Werkzeugleisten-Symbol  [[Image:Macro_Cut_Object_For_Magnets.png]]

'''Macro_Cut_Object_For_Magnets.FCMacro'''

{{CodeDownload|https://raw.githubusercontent.com/spkane/freecad-robust-mcp-and-more/refs/heads/main/macros/Cut_Object_for_Magnets/CutObjectForMagnets.FCMacro|CutObjectForMagnets.FCMacro}}

<span id="Links"></span>
==Verweise==

* [https://spkane.github.io/freecad-robust-mcp-and-more/ Vollständige Dokumentation] - Vollständige Anleitungen und Tutorials.
* [https://github.com/spkane/freecad-robust-mcp-and-more GitHub-Repository] - Quellcode und Problemverfolgung (Issue Tracker).
* [[Part_Slice/de|Part Zerschneiden]] - Das integrierte Zerschneiden-Werkzeug von FreeCAD.
* [[PartDesign_Hole/de|PartDesign Bohrung]] - Dokumentation zu parametrischen Bohrungen.
* [[PartDesign_Body/de|PartDesign Körper]] - Dokumentation zum Körper-Container.