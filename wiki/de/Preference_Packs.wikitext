<languages/>
{{TOCright}}

<span id="Introduction"></span>
== Einleitung ==

Ein '''Voreinstellungspaket''' (Preference Pack) stellt eine Sammlung von Benutzervoreinstellungen, zum Verteilen zur Verfügung ({{Version/de|0.20}}); es kann als Addon installiert und die Einstellungen so als kompletter Satz angewendet werden. Jede Benutzereinstellung, die in der user.cfg festgelegt werden kann, kann auch in einem Voreinstellungspaket verwendet werden. Die Anwendung eines Voreinstellungspakets setzt alle die Variablen, die  in der mitgelieferten CFG-Datei vorhanden sind und lässt alle anderen Einstellungen unverändert. Diese Pakete können z.B. verwendet werden, um Themen (Themes) zu erstellen, indem man ein selbsterstelltes Stylesheet zusammen mit einem Satz Benutzereinstellungen bündelt, die unterschiedliche Farben und Ausführungsarten von Elementen in FreeCAD steuern, die nicht von dem Stylesheet festgelegt werden.

<span id="Main_Preference_Packs_user_interface"></span>
==Hauptbenutzerschnittstelle für Voreinstellungspakete==

Die meisten Benutzerinteraktionen mit installierten Einstellungs-Paketen erfolgen über die Registerkarte '''Allgemein''' im Abschnitt '''Allgemeine Einstellungen''' des [[Preferences_Editor/de|Voreinstellungseditor]].

[[File:PreferencePacks MainInterface.png|400px]]

<span id="Applying_an_installed_pack"></span>
== Anwendung eines installierten Pakets ==

To apply a Preference Pack, click the {{Button|Apply}} button next to its name in the '''General''' tab of the [[Preferences_Editor|Preferences editor]]. The core of a Preference Pack is a set of user preferences. When applying a pack each of these preferences is changed to the value defined in the pack. Optionally, the pack author may have included a pre- and/or post-application macro that may also be run. Because packs can potentially make large (and possibly undesirable) changes to your user preferences, a timestamped backup of your original preferences is taken, and stored in {{FileName|FREECAD_USER_DATA/SavedPreferencePacks/Backups}}. These backups are retained for one week.

<span id="Creating_a_new_pack"></span>
==Ein neues Paket erstellen==

Pakete können manuell erstellt oder mithilfe der Schaltfläche {{Button|Speichern neu...}}  auf der Registerkarte  '''Allgemein''' des [[Preferences_Editor/de|Voreinstellungseditor]] schnell erstellt werden. Durch Klicken auf die Schaltfläche wird ein Dialogfeld angezeigt, in dem man einen Namen für das neue Paket eingeben muss, sowie eine Reihe von Kontrollkästchen, mit denen man festlegen kann, dass nur eine Teilmenge der Einstellungen gespeichert werden soll.

[[File:PreferencePacks SaveNewPack.png|400px]]

Aufgrund der Art und Weise, wie FreeCAD intern Einstellungen verwendet, können nur Elemente, die in diesen Vorlagendateien enthalten sind, mit diesem Verfahren automatisch gespeichert werden. Elemente, die nicht in den Vorlagendateien enthalten sind, müssen manuell in die *.cfg-Datei des Pakets aufgenommen werden. Es gibt keine integrierte Begrenzung dafür, welche Einstellungselemente in ein Einstellungs-Paket aufgenommen werden können, aber Autoren werden dringend davon abgeraten, die vom Benutzer eingestellte Sprache zu ändern, die Liste der zuletzt verwendeten Dateien zu modifizieren oder irgendetwas zu ändern, das mit einem temporären UI-Zustand zusammenhängt (z. B. die gespeicherte Größe eines anpassbaren Fensters usw.).

<span id="Template_details"></span>
=== Details zur Vorlage ===

In diesen Abschnitten sind alle in den integrierten Vorlagen enthaltenen Einstellungen aufgeführt. Derzeit konzentrieren sie sich auf Elemente, die das Erscheinungsbild betreffen, aber Pull-Anfragen und Vorschläge im Forum für weitere Ergänzungen sind willkommen. Installierte Addons können auch eigene Vorlagen bereitstellen (die hier nicht dokumentiert sind). Ganz rechts neben jedem Eintrag auf "Erweitern" klicken, um die Liste anzuzeigen.

<div class="mw-collapsible mw-collapsed toccolours">

'''Arch-Farben'''

<div class="mw-collapsible-content">
* Preferences/Mod/Arch/WallColor
* Preferences/Mod/Arch/StructureColor
* Preferences/Mod/Arch/RebarColor
* Preferences/Mod/Arch/WindowColor
* Preferences/Mod/Arch/WindowGlassColor
* Preferences/Mod/Arch/PanelColor
* Preferences/Mod/Arch/ColorHelpers
* Preferences/Mod/Arch/defaultSpaceColor 
</div>
</div>
<div class="mw-collapsible mw-collapsed toccolours">

'''KonsoleFarben'''

<div class="mw-collapsible-content">
* Preferences/OutputWindow/colorText
* Preferences/OutputWindow/colorLogging
* Preferences/OutputWindow/colorWarning
* Preferences/OutputWindow/colorError
</div>
</div>
<div class="mw-collapsible mw-collapsed toccolours">

'''Draft-Farben '''

<div class="mw-collapsible-content">
* Preferences/Mod/Draft/constructioncolor
* Preferences/Mod/Draft/gridTransparency
* Preferences/Mod/Draft/gridColor
* Preferences/Mod/Draft/snapcolor
</div>
</div>
<div class="mw-collapsible mw-collapsed toccolours">

'''Editor-Farben '''

<div class="mw-collapsible-content">
* Preferences/Editor/Text
* Preferences/Editor/Bookmark
* Preferences/Editor/Breakpoint
* Preferences/Editor/Keyword
* Preferences/Editor/Comment
* Preferences/Editor/Block comment
* Preferences/Editor/Number
* Preferences/Editor/String
* Preferences/Editor/Character
* Preferences/Editor/Class name
* Preferences/Editor/Define name
* Preferences/Editor/Operator
* Preferences/Editor/Python output
* Preferences/Editor/Python error
* Preferences/Editor/Current line highlight
</div>
</div>
<div class="mw-collapsible mw-collapsed toccolours">

'''Editor-Schriftart '''

<div class="mw-collapsible-content">
* Preferences/Editor/FontSize
* Preferences/Editor/Font
</div>
</div>
<div class="mw-collapsible mw-collapsed toccolours">

'''Hauptfenster-Layout '''

<div class="mw-collapsible-content">
* Preferences/MainWindow/DockWindows/Std_SelectionView
* Preferences/MainWindow/DockWindows/Std_ComboView
* Preferences/MainWindow/DockWindows/Std_ReportView
* Preferences/MainWindow/DockWindows/Std_PythonView
* Preferences/MainWindow/DockWindows/Std_TreeView
* Preferences/MainWindow/DockWindows/Std_PropertyView
* Preferences/MainWindow/DockWindows/Std_DAGView
* Preferences/MainWindow/Toolbars/File
* Preferences/MainWindow/Toolbars/Workbench
* Preferences/MainWindow/Toolbars/Macro
* Preferences/MainWindow/Toolbars/View
* Preferences/MainWindow/Toolbars/Structure
* Preferences/MainWindow/Toolbars/Navigation
</div>
</div>
<div class="mw-collapsible mw-collapsed toccolours">

'''Path-Farben '''

<div class="mw-collapsible-content">
* Preferences/Mod/Path/DefaultNormalPathColor
* Preferences/Mod/Path/DefaultRapidPathColor
* Preferences/Mod/Path/DefaultPathMarkerColor
* Preferences/Mod/Path/DefaultExtentsColor
* Preferences/Mod/Path/DefaultProbePathColor
* Preferences/Mod/Path/DefaultHighlightPathColor
* Preferences/Mod/Path/DefaultBBoxSelectionColor
* Preferences/Mod/Path/DefaultBBoxNormalColor
</div>
</div>
<div class="mw-collapsible mw-collapsed toccolours">

'''SketcherFarben '''

<div class="mw-collapsible-content">
* Preferences/View/SketchEdgeColor
* Preferences/View/SketchVertexColor
* Preferences/View/EditedEdgeColor
* Preferences/View/EditedVertexColor
* Preferences/View/ConstructionColor
* Preferences/View/ExternalColor
* Preferences/View/InvalidSketchColor
* Preferences/View/FullyConstrainedColor
* Preferences/View/InternalAlignedGeoColor
* Preferences/View/FullyConstraintElementColor
* Preferences/View/FullyConstraintConstructionElementColor
* Preferences/View/FullyConstraintInternalAlignmentColor
* Preferences/View/FullyConstraintConstructionPointColor
* Preferences/View/ConstrainedIcoColor
* Preferences/View/NonDrivingConstrDimColor
* Preferences/View/ConstrainedDimColor
* Preferences/View/ExprBasedConstrDimColor
* Preferences/View/DeactivatedConstrDimColor
* Preferences/View/CursorTextColor
* Preferences/View/CursorCrosshairColor
* Preferences/View/CreateLineColor
</div>
</div>
<div class="mw-collapsible mw-collapsed toccolours">

'''Start-Farben '''

<div class="mw-collapsible-content">
* Preferences/Mod/Start/BackgroundColor1
* Preferences/Mod/Start/BackgroundTextColor
* Preferences/Mod/Start/PageColor
* Preferences/Mod/Start/PageTextColor
* Preferences/Mod/Start/BoxColor
* Preferences/Mod/Start/LinkColor
* Preferences/Mod/Start/BackgroundColor2
</div>
</div>
<div class="mw-collapsible mw-collapsed toccolours">

'''TechDraw-Farben '''

<div class="mw-collapsible-content">
* Preferences/Mod/TechDraw/Decorations/SectionColor
* Preferences/Mod/TechDraw/Decorations/CenterColor
* Preferences/Mod/TechDraw/Decorations/VertexColor
* Preferences/Mod/TechDraw/Decorations/HighlightColor
* Preferences/Mod/TechDraw/Colors/Hatch
* Preferences/Mod/TechDraw/Colors/Background
* Preferences/Mod/TechDraw/Colors/PreSelectColor
* Preferences/Mod/TechDraw/Colors/HiddenColor
* Preferences/Mod/TechDraw/Colors/SelectColor
* Preferences/Mod/TechDraw/Colors/NormalColor
* Preferences/Mod/TechDraw/Colors/CutSurfaceColor
* Preferences/Mod/TechDraw/Colors/GeomHatch
* Preferences/Mod/TechDraw/Colors/FaceColor
* Preferences/Mod/TechDraw/Colors/ClearFace
</div>
</div>
<div class="mw-collapsible mw-collapsed toccolours">

'''Fenster-Farben '''

<div class="mw-collapsible-content">
* Preferences/View/BacklightColor
* Preferences/View/BackgroundColor
* Preferences/View/BackgroundColor2
* Preferences/View/BackgroundColor3
* Preferences/View/BackgroundColor4
* Preferences/View/Simple
* Preferences/View/Gradient
* Preferences/View/UseBackgroundColorMid
* Preferences/View/HighlightColor
* Preferences/View/SelectionColor
* Preferences/View/DefaultShapeColor
* Preferences/View/RandomColor
* Preferences/TreeView/TreeEditColor
* Preferences/TreeView/TreeActiveColor
* Preferences/MainWindow/TiledBackground
* Preferences/MainWindow/StyleSheet
</div>
</div>

<span id="Preference_Pack_structure"></span>
===Struktur der Voreinstellungspakete===

Der Kern der meisten Präferenzpakete besteht zwar aus einer einzigen Konfigurationsdatei, aufgrund ihres Designs für die Verteilung sind jedoch auch einige zusätzliche Strukturen erforderlich. Ein Paket wird durch vier Kerndateien definiert, die in der folgenden Verzeichnisstruktur angeordnet sind (für ein Präferenzpaket mit dem Namen "SamplePreferencePack"):

* package.xml
* SamplePreferencePack/
** SamplePreferencePack.cfg
** pre.FCMacro
** post.FCMacro

Die Datei [[Package_Metadata/de|Package Metadata]] (package.xml) definiert den Namen des Präferenzpakets und ermöglicht die Zuweisung weiterer Metadatenelemente wie Versionsnummer, Autoreninformationen und Tags (die in der Hauptoberfläche als durch Kommas getrennte Liste angezeigt werden). Für ein Präferenzpaket, das wie oben beschrieben über die GUI gespeichert wurde, wird eine einzelne package.xml-Datei im Verzeichnis {{FileName|FREECAD_USER_DATA/SavedPreferencePacks/}} erstellt. Diese Datei wird verwendet, um Details wie den Namen und die Tags aller vom Benutzer gespeicherten Präferenzpakete zu beschreiben. Um den Namen oder die Tags eines Packs zu ändern, muss diese Datei manuell mit einem Texteditor bearbeitet werden. Sie kann auch als Vorlage für verteilte Präferenzpakete dienen: Der Autor eines verteilten Packs kann zunächst ein Pack lokal speichern und dann das Unterverzeichnis des Packs und diese globale package.xml-Datei als Ausgangspunkt kopieren und die kopierte package.xml-Datei so ändern, dass sie nur auf das für die Verteilung gepackte Pack verweist.

Je nach den Anforderungen des Pakets können auch andere Dateien in einer Distribution enthalten sein. Ein gut zusammengestelltes Präferenzpaket für die Verteilung eines visuellen Themas namens "DarkSide" für FreeCAD könnte wie folgt aussehen:

* package.xml
* resources/
** icons/
*** DarkSide.svg
* DarkSide/
** DarkSide.cfg
** DarkSide.qss

Note the omission of the ''pre.FCMacro'' and ''post.FCMacro'' files, which are often unnecessary, as well as the inclusion of an icon (for display by the [[Image:Std_AddonMgr.svg|24px|link=Std_AddonMgr]] [[Std_AddonMgr|Addon Manager]]), and the inclusion of a qss file (which will then be referenced in the ''DarkSide.cfg'' configuration data file).

The pre- and post- macro files are standard FreeCAD Python macros, and may contain any commands valid in such a macro. If the pre.FCMacro raises an exception (of any type), the application of the preference pack is cancelled. If the post.FCMacro raises an exception (of any type), the application of the pack is rolled back using the backup taken prior to its application. For example, these macros may be used to query the user for license acceptance, or to verify they are happy with the final state of their system after application.

Die Datei package.xml für dieses Beispielpaket könnte wie folgt aussehen:

<pre>
<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
<package format="1" xmlns="https://wiki.freecad.org/Package_Metadata">
  <name>DarkSide Theme Package</name>
  <description>A preference pack including a stylesheet and other GUI color information for a Dark mode.</description>
  <version>1.0.0</version>
  <maintainer email="chennes@pioneerlibrarysystem.org">Chris Hennes</maintainer>
  <license file="LICENSE">GPLv3</license>
  <url type="repository" branch="main">https://github.com/chennes/DarkSideThemePackage</url>
  <icon>resources/icons/DarkSide.svg</icon>

  <content>
    <preferencepack>
      <name>DarkSide</name>
      <description>Dark mode color scheme</description>
      <tag>color</tag>
      <tag>stylesheet</tag>
      <tag>dark</tag>
      <file>DarkSide.qss</file>
    </preferencepack>
  </content>

</package>
</pre>

<span id="Including_templates_in_your_add-on"></span>
=== Vorlagen in Ihr Addon einbinden ===

Many add-ons have user-specifiable preference information that is added to the user.cfg file. An add-on author may also choose to provide a Preference Pack Template file that lists the user configuration variables that can be automatically saved using the "Save new pack" method described above. To include these template files, add-on authors should create a subdirectory in their package called either "PreferencePackTemplates" or "preference_pack_templates". Within that folder should be one or more *.cfg files: each must be a valid, well-formed user.cfg XML file containing one or more configuration variables set to their default values. The name of the file should reflect its purpose, e.g. "colors.cfg", "active_tabs.cfg", etc. This set of files will be presented to the user when they save a new preference pack, with each file receiving a checkable entry in the list of items to save. The filename is used to generate the UI entry, with underscores replaced by spaces (and the extension omitted).

== Distributing a pack ==

Preference Packs are distributed identically to [[External_workbenches|External Workbenches]] through the  [[Image:Std_AddonMgr.svg|24px|link=Std_AddonMgr]] [[Std_AddonMgr|Addon Manager]]. To install a pack manually, use git to clone the package repository into your FreeCAD data directory (enter {{incode|App.getUserAppDataDir()}} in the [[Python_console|Python console]] to get this path), in a subdirectory called "Preference Packs". Note that user-installed packs with the same name as an included pack take precedence.

Siehe auch [[Private_Preference_Packs/de|Private Voreinstellungspakete]].


[[Category:User Documentation{{#translation:}}]]
[[Category:Developer Documentation{{#translation:}}]]