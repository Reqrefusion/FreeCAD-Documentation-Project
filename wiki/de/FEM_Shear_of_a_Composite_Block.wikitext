<languages/>

{{TutorialInfo/de
|Topic=Finite-Elemente-Analyse
|Level=Anfänger/Zwischenstufe
|Time=30 Minuten
|Author=[https://wiki.freecad.org/index.php?title=User: HarryvL]
|FCVersion=0.17.12960  oder höher
}}

<span id="Introduction"></span>
==Einleitung==

In diesem Tutorial analysieren wir die Scherverformung eines Verbundblocks, der aus einem steifen Kern besteht, der in eine weiche Matrix eingebettet ist. Es zeigt die Verwendung von BooleanFragments und CompoundFilter, um aus zwei konzentrischen Würfeln Volumenkörper für den Block und die Matrix zu erstellen. Dieser Arbeitsablauf stellt sicher, dass separate MeshRegions, Materialien und Randbedingungen für den Block und die umgebende Matrix definiert werden können. Zur Auswahl interner Bereiche können wir das [https://github.com/drhooves/SelectionTools-Makro von Markus Hovorka] verwenden oder einen alternativen Ansatz wählen. Die CalculiX-Ergebnisse zeigen deutlich den Einfluss des steifen Kerns auf das Verhalten des Verbundblocks.

<span id="Geometry"></span>
== Geometrie ==

Zunächst erstellen wir zwei konzentrische Würfel, einen mit einer Größe von 10 mm und einen mit einer Größe von 5 mm. Dies geschieht im [[Part_Workbench/de|Arbeitsbereich Part]]. Standardmäßig wird der Würfel am Ursprung [0, 0, 0] platziert, sodass der kleinere Würfel verkleinert und verschoben werden muss, indem die Einstellungen auf der Registerkarte Daten des Eigenschaften-Ansicht geändert werden. Um den Kern sichtbar zu machen, wird die Transparenz des äußeren Blocks in der Registerkarte Ansicht der [[Property_View/de|Eigenschaften-Ansicht]] auf 50 gesetzt. Das Ergebnis ist unten dargestellt.

[[Image:Pic1.png|700px]]

Als Nächstes die beiden Blöcke im Baum markieren und ein BooleanFragments-Objekt ('''Part → Teilen → Boolsche Fragmente''') erstellen. Im "Eigenschaftenfenster – Registerkarte Daten" den Modus zu CompSolid ändern. Nun die BooleanFragments im Objektbaum markieren und einen CompoundFilter ('''Part → Verbund → Verbundfilter''') erstellen.

[[Image:Pic2.png|700px]]

<span id="Mesh_and_Mesh_Regions"></span>
== Netze und Netzbereiche ==

Aus dem Arbeitsbereich FEM erstellen wir einen Analyse-Container. Dieser enthält alle für die CalculiX-Analyse erforderlichen Definitionen und deren Ergebnisse. Es ist zu beachten, dass dieser Analyse-Container bei jedem erneuten Laden der Datei oder nach dem Zurückwechseln von anderen Analysen aktiviert werden muss (Rechtsklick und "Analyse aktivieren" auswählen). Um den Vernetzungsprozess zu starten, markiert man den CompoundFilter im Objektbaum und aktiviert den Vernetzungsdialog '''Mesh → FEM-Vernetzung aus Form durch Gmsh'''. Den Dialog mit einem Klick auf OK verlassen. 

Ein Mesh-Objekt wird nun im Objektbaum erstellt. Dieses Objekt markieren und ein Mesh-Region-Objekt über '''Mesh → FEM-Mesh-Region''' erstellen. Das Dialogfeld für diese Mesh-Region durch Doppelklick öffnen und das Optionsfeld für Festkörper aktivieren. Anschließend auf die Schaltfläche "Referenz hinzfügen" klicken und das CompoundFilter-Objekt im Grafikfenster auswählen. Dadurch sollte eine Referenz zu "CompoundFilter:Solid1" in der Objektliste der Mesh Region hinzugefügt werden. Abschließend die maximale Elementgröße für diesen Bereich festlegen (5 mm in der aktuellen Analyse). Das Dialogfeld verlassen, indem man auf OK klickt.

[[Image:Pic3.png|700px]]

Als nächstes ein neues Mesh-Objekt wie oben beschrieben erstellen und mit dem Auswahlmakro (Tastenkombination S, E) das Objekt Cube_Core im Grafikfenster auswählen. Diesmal sollte in der Referenzliste "CompoundFilter:Solid2" angezeigt werden, wie unten dargestellt. Alternativ kann man das Compound-Objekt ausblenden und das Objekt Cube_Core anzeigen (indem man das Compound-Objekt in der Baumstruktur erweitert, jedes einzelne Element auswählt und die Leertaste drückt). Wir haben eine maximale Elementgröße von 1 mm gewählt. 

Hinweis 1: Die Auswahl von "CompoundFilter:Solid2" erfordert die Auswahl einer seiner Flächen. 

Hinweis 2: Wenn man Schwierigkeiten bei der Auswahl von "CompoundFilter:Solid2" hat, hat man möglicherweise vergessen, den BooleanFragments-Modus auf CompSolid zu setzen.

[[Image:Pic4.png|700px]]

<span id="Material_Assignment"></span>
== Materialzuweisungen ==

<div lang="en" dir="ltr" class="mw-content-ltr">
Material is assigned to Mesh Regions via a SolidMaterial object. In this tutorial we assign two materials; one for the Matrix and one for the Core.
</div> 

<div lang="en" dir="ltr" class="mw-content-ltr">
Start by selecting the CompoundFilter in the object tree. Then create a SolidMaterial object via menu option '''Model → FEM material for solid'''. Open the dialog and tick the radio button for Solid, press "Add Reference" and select the CompoundFilter object from the Graphical Window. The reference list should now show "CompoundFilter:Solid1", as before. We assign ABS material to the Matrix, with a Young's modulus approximately 1% of that of steel.
</div>   

[[Image:Pic5.png|700px]] 

<div lang="en" dir="ltr" class="mw-content-ltr">
Repeat the above procedure for the Core ("CompoundFilter:Solid2") with the help of the selection macro or the alternative approach discussed before. This time we assign CalculiX-Steel, which is much stiffer than the ABS material for the Matrix.
</div>

<span id="Sliding_Support"></span>
== Gleitende Unterstützung ==

<div lang="en" dir="ltr" class="mw-content-ltr">
To create a "Simple Shear" condition for the composite block the deformations at the boundaries need to be unconstrained. To achieve this, the block is placed on a sliding support. This leaves three degrees of freedom in the plane of the support (2 translations and a rotation) and those will be constrained later. (Note: as the plane prevents warping of the face, it still induces a minor constraint, which could be eliminated by a different choice of boundary conditions). To create a sliding boundary condition add a FemConstraintDisplacement object ('''Model → Mechanical boundary conditions and loads → Displacement boundary condition'''). With the dialog box open first select the face to which the boundary condition is to be applied and then click the Add button. As the block is allowed to slide in the x-y plane, only the "Fixed" radio button for "Displacement z" is selected and the other radio buttons are all left as "Free".
</div>

[[Image:Pic6.png|700px]]

<span id="Fixed_Nodes"></span>
== Feste Knoten ==

<div lang="en" dir="ltr" class="mw-content-ltr">
To prevent rigid body motion in the plane of sliding, three independent degrees of freedom need to be eliminated. To achieve this, one vertex in the plane of sliding is constrained in x and y direction (eliminating 2 degrees of freedom) and one vertex is fixed in the x direction (eliminating the last degree of freedom). For this purpose two additional FemConstraintDisplacement objects are created and the result is shown below.
</div>

[[Image:Pic7.png|700px]]

<span id="Shear_Forces"></span>
== Scherkräfte ==

<div lang="en" dir="ltr" class="mw-content-ltr">
The final step in the Analysis definition is the application of loads. To create a Simple Shear condition, a set of shear loads is applied as shown below. Each load is chosen as 1000 N and considering the directions of application, force and moment equilibrium is achieved for all translation and rotational degrees of freedom. In FC this requires addition of four FemConstraintForce objects ('''Model → Mechanical boundary conditions and loads → Force load''') - one for each face. With the dialog box open first press the Add Reference button and then select the face to which the boundary condition is to be applied (Note: this is a different sequence than with FemConstraintDisplacement). By default, this creates a set of forces perpendicular to the face (i.e. a normal force). To change this to a shear force, press the direction button and select a cube edge that runs in the desired direction. If the resulting force points in opposite direction of what is required, then select the radio button for "Reverse direction".
</div>

[[Image:Pic8.png|700px]]

<span id="CalculiX_Analysis"></span>
== CalculiX-Analyse ==

<div lang="en" dir="ltr" class="mw-content-ltr">
Now all mesh regions, material and boundary conditions have been defined we are ready to analyse the deformation of the block with CalculiX. Activate the Analysis by right clicking "Activate analysis", open the CalculiX dialog by double clicking the CalculiXccxTools object and select a directory for the temporary files created by both FC and CCX. Write CCX Input file and check for any warning or error messages.
</div>  

[[Image:PIC9.png|700px]]

Danach kann die Analyse durch Drücken der Schaltfläche RunCalculiX gestartet werden. Wenn alles gut geht, sollten im CCX-Ausgabefenster die folgenden Meldungen angezeigt werden.

[[Image:Pic10.png|700px]]

<span id="CalculiX_Results"></span>
== CalculiX-Ergebnisse ==

<div lang="en" dir="ltr" class="mw-content-ltr">
Upon completion of the analysis double click the "CalculiX_static_results" object and select the "Abs displacement" option. The maximum displacement of ~ 0.08mm will show up in the relevant output box. As the maximum displacement is relatively small compared to the dimensions of the block (<1% of the block size), the displacements need to be scaled up. This can be done under the heading "Displacement" by ticking the "Show" radio button and scaling the displacement by a factor of -say- 20. The maximum displacement will now be exaggerated to approximately 20% of the box size. After closing the dialog window, the deformed mesh can be made visible again by highlighting the Result_mesh object and pressing the space bar.
</div> 

[[Image:Figure 11 Deformed Mesh.png|700px]]

<div lang="en" dir="ltr" class="mw-content-ltr">
To investigate the deformation of the core we have to slice the block. This can be done by creating a clip filter. To activate this functionality, we first need to create a "post processing pipeline" by highlighting the "CalculiX_static_results" object and choosing '''Results → Post Pipeline from Result''' from the menu. Next, with the Pipeline selected create a Warp Filter (Results → Warp filter), set Vector=Displacement and Value=20 to scale the displacement and Display Mode = "Surface with Edges", Coloring Field = "Displacement", Vector = "Magnitude" to show colored displacement contours. Press Apply and OK. As a final step add a Clip Filter (Results → Clip filter) and create a plane with origin [5.0,2.5,5.0] and normal [0,1,0], i.e. at a core face with normal in the y-direction. Tick the "Cut Cells" radio button to create a flat surface. As before set Display Mode = "Surface with Edges", Coloring Field = "Displacement", Vector = "Magnitude" to show colored displacement contours. Press Apply and OK. Finally switch the Warp Filter to invisible to only show the cut block.
</div> 

[[Image:Figure12 Deformed Mesh Clipped View (2).png|700px]]

Aus dem Ergebnis geht hervor, dass der Kern weitgehend unverformt bleibt und dazu beiträgt, der Verformung der weichen Matrix entgegenzuwirken (vergleiche den Scherwinkel des blau gefärbten Teils mit dem des grün gefärbten Teils). Es wird jedoch auch deutlich, dass sich die Flächen des Verbundblocks unter einfachen Scherbedingungen verziehen, was darauf hindeutet, dass die Gleitrandbedingung an der Basis des Würfels eine unzulässige Einschränkung darstellt.

<span id="Further_work"></span>
== Weitere Arbeiten ==

Die folgenden Herausforderungen könnten als weitere Übung interessant sein:

1) Korrektur der durch die gleitende Randbedingung verursachten unzulässigen Einschränkung

2) Versuchen, die Kontaktrandbedingungen zwischen dem Kern und der Matrix zu erstellen, um zu sehen, ob eine Trennung auftritt.

Die FreeCAD-Datei für dieses Tutorial ist unten als Ausgangspunkt angehängt.

Diskussion im FreeCAD-Forum: 
https://forum.freecad.org/viewtopic.php?f=18&t=26517&start=20

Viel Spaß!


{{FEM_Tools_navi{{#translation:}}}}
{{Userdocnavi{{#translation:}}}}