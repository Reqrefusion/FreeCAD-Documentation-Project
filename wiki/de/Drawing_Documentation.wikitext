<languages/>
Diese Seite dokumentiert jcc242s Verständnis des Zeichnungsmoduls. Sie enthält Dateien und Funktionen, an denen er derzeit arbeitet und die möglicherweise noch nicht im Master-Zweig enthalten sind. Die Quelle für diese Dateien befindet sich auf [https://github.com/jcc242/FreeCAD seinem Github], aber man sei vorsichtig, da diese sehr instabil ist!

<span id="Base_(Mod/Drawing)"></span>
== Basis (Mod/Drawing) ==

=== gdtsvg.py ===
Python-Skript, das SVG-Schnipsel für Dinge wie GD&T-Symbole, Maßsymbole und grundlegende SVG-Elemente wie Linien, Kreise und Pfade generiert.

Es enthält mehrere Support-Dateien, die nicht wirklich viel bewirken. Man führt  DrawingTest.py aus, um eine Reihe von SVG-Symbolen im Symbolverzeichnis zu erstellen, die eine Vorschau verschiedener Symbole in der Datei gdtsvg.py anzeigt. settingslist.py, dimesettings und convert.py sind alle veraltete Einstellungsmethoden und sollten wahrscheinlich entfernt werden, da der Drawing-Zweig kurz vor der Zusammenführung mit dem Master steht. 

=== DrawingAlgos.py ===
Erstellt SVG-Linien aus einer Liste von Knoten und unterstützt sowohl versteckte als auch sichtbare Kanten. Sollte wahrscheinlich mit gdtsvg.py zusammengeführt werden, sobald diese Datei ausgereift ist.
 
==== createSVG ====
Akzeptiert Teil als Argument, projiziert den Teil in Linien aus dem Drawing.project-Objekt und zeichnet dann die SVG-Datei für jede Linie.

== App ==
Enthält die Backend-Seite des Zeichenmoduls.

=== AppDrawing.cpp ===
Initialisiert die verschiedenen Namespaces, Module und Elemente, die im Drawing-Modul verwendet werden. Wenn das Part-Modul nicht geladen werden kann, wird eine Fehlermeldung ausgegeben.

=== DrawingExport.cpp ===
Zwei Klassen: SVGOutput und DXFOutput. Beide enthalten Methoden zum Ausgeben des Codes in ihrer jeweiligen Sprache. In der Regel benötigen sie ein Objekt des entsprechenden Typedefs und manchmal zusätzliche Identifikationsinformationen.

=== FeatureClip.cpp ===
Callback-Methoden (?) für die Feature-Clipping-GUI, so scheint es. Allein aufgerufen erstellt sie den Clip-Pfad, wenn ShowFrame.getValue auf TRUE gesetzt ist, zeigt sie auch den Rahmenrand an.

=== FeaturePage.cpp ===
Verwaltet die Ansichten. 

onChanged() zum Ausführen von Aktionen, wenn Eigenschaften geändert werden. 

execute() zum Neuberechnen einer Formelement-Ansicht, so wird es zumindest behauptet. Es scheint Funktionen zum Überprüfen von bearbeitbaren Texten und zum Speichern von Zeichnungen zu geben. Muss noch weiter untersucht werden.

getEditableTextsFromTemplate() zum Abrufen von Text, der von FreeCAD aus einer SVG-Datei bearbeitet werden kann.

=== FeatureProjection.cpp ===
Objekt zu einem 2D-Bild abflachen?

=== FeatureView.cpp ===
Definiert die Ansichts-Eigenschaften.

=== FeatureViewAnnotation.cpp ===
Definiert Eigenschaften für Anmerkungen (derzeit nur Text) und verfügt über eine Ausführungsmethode, um den Text bei Änderungen/Verschiebungen zu aktualisieren.

=== FeatureViewPart.cpp ===
Konstruktor zum Hinzufügen von Eigenschaften. Ruft Darstellungselemente für projizierte Teile ab.

=== PageGroup.cpp ===
Just adds a property for a list of pages, does not much else.

=== Precompiled.cppp ===
Just #include "PreCompiled.h"

=== ProjectionAlgos.cpp ===
The constructor just runs the execute() method to update it's stuff

invertY: since SVG does its y-axis backwards to every other coordinate system in the world, we must invert it when converting from a FreeCAD part to an SVG projection for the Drawing view.

getSVG: fetches the SVG code from the DrawingExport stuff. Formats depending on type of line (hidden or not and some other stuff I need to figure out).

getDXF: same as getSVG except for DXF format.


<span id="Gui"></span>
== Grafische Benutzeroberfläche ==

=== AppDrawingGui.cpp ===
Initializes the drawing gui.

=== AppDrawingGuiPy.cpp ===
Provides opening, importing, and exporting interfaces? Looks like it is python accessible.

=== Command.cpp ===
Handles commands (from the toolbar?) such as creating new drawings and stuff. It looks like this handles QT calls from clicking the button to whatever command it needs to go to e.g. clicking the CmdDrawingOrthoViews button will show the Ortho views gui in the task dialog spot.

=== DrawingView.cpp ===
Does a bunch of qt gui stuff, need to read more on it.

=== TaskDialog.cpp ===
Creates the task dialog thing on the side and probably switches to it from the tree view, as appropriate.

=== TaskOrthoViews.cpp ===
Creates the task dialog for placing the orthographic views!

Does a lot of the calculations for where to position stuff (automatic calculations as well, it seems).

Takes the input from the TaskOrthoViews gui and does stuff with it. Uses the single inheritance method talked about [http://doc.qt.digia.com/qt/designer-using-a-ui-file.html on the qt website].

=== ViewProviderPage.cpp ===
Constructor adds some properties for the view stuff.
Destructor does nothing.
Attaches something (attaches what? attaches the view to the page?) sets and gets display modes (what are display modes? what do they do and what are possible options?)
Does something about updating some kind of data has a context menu that says "Show drawing", figure out what this means
Has a thing for double clicking to select the view (I think?)

showDrawingView seems to do some work on settings things up: gets the current document, sets the window icon and title, adds it to the main window (of FreeCAD?)

=== ViewProviderView.cpp ===
Doesn't seem to do much, though I am sure it is important.

=== Workbench.cpp ===
Adds the icons to the toolbars and stuff.

<span id="Workflow"></span>
= Arbeitsablauf =

== Program Flow ==
CanvasView is the actual QGraphicsScene object and DrawingView processes a list of FeatureView that are linked by reference in /App/FeatureViewPage. DrawingView then chooses the appropriate QGraphicsItem class (QGraphicsItemViewPart or QGraphicsItemViewDimension) and then calls a function in CanvasView to create this and add it to the scene.

== Adding commands to the Drawing Workbench ==
4 simple steps:
# Add a class to Command.cpp. Follow the others for an example of the formatting.
# Add a title, icon, tooltip, etc., again, follow the existing classes in command.cpp
# Add your class to the bottom of Command.cpp
# Add your information to Workbench.cpp, this will tell FreeCAD/Drawing module where to place the icons defined in command.cpp  in the actual freecad interface (the toolbars, dropdowns, etc.)

[[Category:Developer_Documentation{{#translation:}}]]
{{Drawing Tools navi{{#translation:}}}}
{{clear}}