<languages/>
[[Image:A2p_workbench.svg|thumb|128px|A2plus Arbeitsbereichssymbol]]

<span id="Introduction"></span>
== Einleitung ==

{{TOCright}}

Der Arbeitsbereich A2plus ist ein [[External workbenches/de|externer Arbeitsbereich]], zum [[Assembly/de|Zusammenbau]] verschiedener Teile in FreeCAD.

Diese Dokumentation beschreibt die A2plus-Version '''0.4.56 oder neuer'''.

<span id="Installing"></span>
== Installieren ==

Der A2plus Arbeitsbereich ist eine Erweiterung zu FreeCAD. Er kann einfach mit Hilfe des FreeCAD [[Image:AddonManager.svg|24px]] [[Std_AddonMgr/de|Erweiterungsverwalters]] aus dem {{MenuCommand|Werkzeuge → Erweiterungsverwalter}} Menü installiert werden.
A2plus wird aktiv weiterentwickelt und erhält häufig neue Funktionen. Deshalb solltest Du ihn regelmäßig aktualisieren, ebenfalls mittels des Menüs {{MenuCommand|Werkzeuge → [[Std_AddonMgr/de|Erweiterungsverwalter]]}}.
Der A2plus Code wird bereitgestellt und weiterentwickelt [https://github.com/kbwbe/A2plus auf GitHub]  und kann auch manuell durch kopieren in das FreeCAD {{FileName|Mod}} Verzeichnis installiert werden.

<span id="Getting_Started"></span>
== Einstieg ==

Wechsle zuerst in die A2plus Werkzeugleiste in FreeCAD. Um eine Baugruppe zu erstellen, erzeuge eine neue Datei in FreeCAD an. Diese Datei muss zuerst gespeichert werden. Es wird empfohlen (aber nicht notwendig), sie im gleichen Ordner zu speichern wie die Teile, die du zusammenbauen willst.

Jetzt können Teile durch Verwendung der Werkzeugleisten Schaltfläche [[Image:A2p ImportPart.svg|24px]] oder [[Image:A2p ShapeReference.svg|24px]] zur Baugruppe hinzugefügt werden. Die Schaltfläche [[Image:A2p ImportPart.svg|24px]] fügt alle Körper in der ausgewählten Datei als ein einzelnes Teil ein. Wenn Du die Schaltfläche [[Image:A2p ShapeReference.svg|24px]] benutzt, kannst Du wählen, welches Teil aus einer Datei zum Teil importiert werden soll. Auf diese Weise kann man z.B. nur eine Skizze importieren, um weitere Teile zu montieren, indem man die Skizze zur Bestimmung der Teilepositionen verwendet.

Das zuerst hinzugefügte Teil bekommt standardmäßig eine fixe Position. (Du kannst dies später über die Teil Eigenschaft {{PropertyData/de|fixed Position}} ändern.)

Teile, die sich bereits in der Baugruppe befinden, können mit der Schaltfläche [[Image:A2p_DuplicatePart.svg|24px]] in der Werkzeugleiste geklont werden.

Um ein Teil aus der Baugruppe zu bearbeiten, wähle es im Modellbaum aus und verwende die Werkzeugleistenschaltfläche [[Image:A2p EditPart.svg|24px]]. Dies öffnet das Bauteil in einem neuen Reiter in FreeCAD oder wechselt zu seinem Reiter, wenn die Datei bereits geöffnet ist.

Zum Aktualisieren veränderter Teile klicke auf die Schaltfläche [[Image:A2p_ImportPart_Update.svg|24px]]. Die Schaltfläche [[File:A2p_RecursiveUpdate.svg|24px]] importiert Teile ebenfalls, jedoch rekursiv über mögliche [[#Subassemblies|Subassemblies]]. Wenn Du eines oder mehrere Teile in FreeCAD's Modellbaum auswählst, dann wird A2plus nachfragen, nur die ausgewählten Teile zu aktualisieren.

Importierte Teile behalten ihre externen Abhängigkeiten und können bearbeitet werden. Für genau definierte Teile wie Schrauben ist es hingegen nützlich, dass ihre Form nicht verändert werden kann. Dies kann erreicht werden mit der Schaltfläche [[Image:A2p ConvertPart.svg|24px]], welche das ausgewählte Teil in eine statische Kopie des Originals konvertiert.

Um das Assembly zu speichern und danach zu schließen kann die Schaltfläche [[Image:A2p Save and exit.svg|24px]] verwendet werden.

Durch Umschalten der Symbolleisten-Schaltfläche [[Image:A2p CD_OneButton.svg|24px]] wird die Art festgelegt, wie mehrere Kanten, Flächen usw. ausgewählt werden können: Entweder mit einem einzelnen Klick oder durch {{KEY|Ctrl}} + Klick.

<span id="Assembling"></span>
== Der Zusammenbau ==

Der Zusammenbau von Teilen erfolgt durch Hinzufügen von Beschränkungen zwischen den Teilen. Nach einer Beschränkung wird A2plus die Teile nach Möglichkeit entsprechend der Beschränkung verschieben. 

Um eine Beschränkung zwischen Teilen zu erstellen, halte die {{KEY|Strg}} Taste gedrückt und wähle jeweils eine Kante oder Fläche von zwei Teilen aus. Klicke dann auf die Werkzeugleisten Schaltfläche der gewünschten Beschränkung.  Ein Dialogfeld wird aufgeklappt, das in Abschnitt [[#Beschränkungen|Beschränkungen]] beschrieben wird. Die Beschränkung wird in den Modellbaum eingefügt, der an die betroffenen Teile angehängt ist. 

Bei komplexen Beschränkungen zwischen Teilen kann A2plus die Beschränkungen möglicherweise nicht lösen. Schau dir daher auch Abschnitt [[#Troubleshooting|Fehlerbehebung]] für Strategien zur Lösung solcher Fälle an.

<span id="Keeping_track"></span>
=== Den Überblick behalten===

Je mehr Teile du hinzufügst, desto wichtiger ist es, den Überblick zu behalten. A2plus bietet daher diese Werkzeuge zum Verschieben und Anzeigen von Teilen:

* Um ein Teil in der Baugruppe zu verschieben, wähle es im Modellbaum aus und verwende die Werkzeugleistenschaltfläche [[Image:A2p MovePart.svg|24px]]. Wenn du das Teil dort platziert hast, wo es dir gefällt, links-klicke mit der Maustaste. Wenn das verschobene Teil bereits Beschränkungen aufweist, wird es durch Drücken der Werkzeugleistenschaltfläche [[Image:A2p solver.svg|24px]] entsprechend platziert, da dies die Auflösung aller Beschränkungen der Baugruppe auslöst.
* Um eine Beschränkung anzuzeigen, wähle sie im Modellbaum aus und verwende die Werkzeugleistenschaltfläche [[Image:A2p ViewConnection.svg|24px]]. Dadurch wird die gesamte Baugruppe transparent und die beiden Objekte, die über die Beschränkung verbunden sind, werden hervorgehoben. Um zur Normalansicht zurückzukehren, links-klicke in die Baugruppe.
* Um nur bestimmte Teile in der Baugruppe anzuzeigen, wähle diese Teile im Modellbaum aus und verwende die Werkzeugleistenschaltfläche [[Image:A2p Isolate Element.svg|24px]]. Alternativ kannst du ein bestimmtes Teil ausblenden, indem du es im Modellbaum markierst und {{KEY|Space}} drückst, um seine Sichtbarkeit umzuschalten.
* Um die Transparenzansicht der gesamten Baugruppe umzuschalten, kannst du die Werkzeugleistenschaltfläche [[Image:A2p ToggleTransparency.svg|24px]] verwenden.
* Jedes Teil kann mit der normalen FreeCAD Bearbeitung transparent gemacht werden. Manchmal geht jedoch die Transparenzeinstellung für Teile beim erneuten Öffnen der Baugruppe aufgrund eines Fehlers in FreeCAD verloren. Als Ausweichlösung kannst du den Werkzeugleistenknopf [[Image:A2p_Restore_Transparency.svg|24px]] verwenden, um die Transparenzeinstellungen wiederherzustellen.

<span id="Constraints"></span>
=== Beschränkungen ===

Bei der Erstellung einer Beschränkung wird ein solches Dialogfeld angezeigt, nachdem du eine Schaltfläche in der Beschränkungswerkzeugleiste gedrückt hast:

[[Image:A2p_ConstraintPropertiesDialog.png]]
{{Caption|Oben: Der A2plus Beschränkungseigenschaftsdialog}}

Bei bestimmten Beschränkungen erlaubt es dir, die Richtung der Beschränkung zu ändern. Mit der Schaltfläche {{Button|[[Image:A2p solver.svg|24px]] Solve}} kannst du vorab prüfen, ob diese neue Randbedingung von A2plus gelöst werden kann. Falls nicht, wirf  einen Blick auf Abschnitt [[#Troubleshooting/de|Fehlerbehebung]].

Beschränkungen können durch Ändern der [[Std_ToggleVisibility/de|Sichtbarkeit]] deaktiviert werden. Wähle dazu die Beschränkung in der Baumansicht aus und drücke  {{KEY|Space}}. Dadurch wird die Eigenschaft {{PropertyData/de|Suppressed}} umgeschaltet. Eine unterdrückte Beschränkung wird bei der Lösung der Baugruppe nicht berücksichtigt.

A2plus bietet die folgenden Beschränkungen:

<span id="Point_on_Point"></span>
==== Punkt auf Punkt ====

Wähle entweder einen [[Glossary/de#Vertex|Knoten]] (Punkt), Kreis oder Kugel auf jedem Teil. Wenn ein Kreis oder eine Kugel ausgewählt wurde, wird dessen Mittelpunkt für die Beschränkung verwendet. Die Werkzeugleistenschaltfläche [[Image:A2p PointIdentity.svg|24px]] fügt die Beschränkung {{Variable|pointIdentity}} hinzu, die die Knoten deckungsgleich werden lässt.

<span id="Point_on_Line"></span>
==== Punkt auf Linie ====

Wähle einen [[Glossary/de#Vertex|Knoten]] (Punkt), oder kreisförmig [[Glossary/de#Edge|Kante]] (wählt seinen Mittelpunkt aus), oder eine sphärische [[Glossary/de#Face|Fläche]] (wählt auch seinen Mittelpunkt) auf der einen Seite und ein [[Glossary/de#Edge|Kante]] auf dem anderen Teil. Die Werkzeugleistenschaltfläche [[Image:A2p PointOnLineConstraint.svg|24px]] fügt die Beschränkung {{Variable|pointOnLine}} hinzu. Dadurch wird der Knoten auf die Kante gesetzt.

<span id="Point_on_Plane"></span>
==== Punkt auf Ebene ====

Wähle einen [[Glossary/de#Vertex|Knoten]] (Punkt), oder kreisförmige [[Glossary/de#Edge|Kante]] (wählt seinen Mittelpunkt aus), oder eine sphärische [[Glossary/de#Face|Fläche]] (wählt auch seinen Mittelpunkt) auf einem Teil und eine Ebene auf dem anderen Teil. Die Werkzeugleistenschaltfläche [[Image:A2p PointOnPlaneConstraint.svg|24px]] fügt die Beschränkung {{Variable|pointOnPlane}} hinzu. Im Dialogfeld Beschränkung kannst du einen Versatz zwischen dem Punkt und der Ebene angeben. Dieser Versatz kann auch zwischen beiden Seiten der Ebene umgedreht werden. Wenn der Versatz gleich Null ist, setzt die Beschränkung den Knoten auf die Ebene.

<span id="Sphere_on_Sphere"></span>
==== Kugel auf Kugel ====

Wähle entweder eine kugelförmige [[Glossary/de#Face|Fläche]] oder einen [[Glossary/de#Vertex|Knoten]] (Punkt) auf beiden Teilen. Die Werkzeugleistenschaltfläche [[Image:A2p SphericalSurfaceConstraint.svg|24px]]  fügt die Beschränkung {{Variable|KugelMitteIdent}} hinzu. Sie bewirkt, dass entweder das Zentrum der Kugeln, das Zentrum der Kugel und der Knoten oder die Knoten deckungsgleich werden.

<span id="Circular_Edge_on_Circular_Edge"></span>
==== Kreiskante auf Kreiskante ====

Wähle eine kreisförmige [[Glossary/de#Edge|Kante]] bei beiden Teilen aus. Die Schaltfläche [[Image:A2p CircularEdgeConstraint.svg|24px]] fügt die Beschränkung {{Variable|circularEdge}} hinzu. Der Beschränkungs-Dialog erlaubt Dir einen Versatz zwischen beiden Kanten anzugeben. Der Versatz kann auch umgedreht werden. Du kannst außerdem die Richtung der Beschränkung bestimmen und die Verdrehung der Teile sperren. Wenn der Versatz gleich Null ist, wird die Beschränkung die Kanten konzentrisch in derselben Ebene anordnen.

<span id="Axis_Coincident"></span>
==== Achsdeckungsgleich ====

Wähle entweder eine zylindrische [[Glossary/de#Face|Fläche]] oder eine lineare [[Glossary/de#Edge|Kante]] auf beiden Teilen. Die Werkzeugleistenschaltfläche [[Image:A2p AxialConstraint.svg|24px]] fügt die Beschränkung {{Variable|AchseDeckungsgleich}} hinzu. Der Dialog Beschränkung erlaubt dir die Achsenrichtung anzugeben. Der Dialog ermöglicht es dir außerdem, die Drehung der Teile zu sperren. Durch die Beschränkung werden die Achsen oder Linien deckungsgleich.

<span id="Axis_Parallel"></span>
==== Achsparallel ====

Wähle bei beiden Teilen jeweils entweder eine zylindrische [[Glossary/de#Face|Fläche]] oder eine lineare [[Glossary/de#Edge|Kante]] aus. Die Schaltfläche [[Image:A2p AxisParallelConstraint.svg|24px]] fügt die Beschränkung {{Variable|Achsparallel}} hinzu. Der Dialog dieser Beschränkung erlaubt Dir die Achsrichtung anzugeben. Die Beschränkung setzt die Achsen oder Linien zueinander parallel.

<span id="Axis_on_Plane_parallel"></span>
==== Achse auf Ebene parallel  ====

Wähle entweder ein zylindrisches [[Glossary/de#Face|Fläche]] oder eine lineare [[Glossary/de#edge|Kante]] auf einem Teil und eine Ebene auf dem anderen Teil. Die Werkzeugleistenschaltfläche [[Image:A2p AxisPlaneParallelConstraint.svg|24px]] fügt die Beschränkung {{Variable|AchseEbeneParallel}} hinzu. Die Beschränkung macht die Achse oder Linie parallel zur Ebene.

<span id="Axis_on_Plane_normal"></span>
==== Achse normal auf Ebene ====

Wähle entweder ein zylindrisches [[Glossary/de#Face|Fläche]] oder eine lineare [[Glossary/de#edge|Kante]] auf einem Teil und eine Ebene auf dem anderen Teil. Die Werkzeugleistenschaltfläche [[Image:A2p AxisPlaneNormalConstraint.svg|24px]] fügt die Beschränkung {{Variable|AchseEbeneNormal}} hinzu. Durch die Beschränkung wird die Achse oder Linie normal zur Ebene gemacht.

<span id="Axis_on_Plane_angle"></span>
==== Achse im Winkel zu Ebene ====

Wähle entweder eine zylindrische [[Glossary/de#Face|Fläche]] oder eine lineare [[Glossary/de#edge|Kante]] auf einem Teil und eine Ebene auf dem anderen Teil.Mit der Werkzeugleistenschaltfläche [[Image:A2p AxisPlaneAngleConstraint.svg|24px]] wird die Beschränkung {{Variable|AchseEbeneWinkel}} hinzugefügt. Die Beschränkung macht die Achse zunächst parallel zur Ebene. Dann kannst du den Winkel für die Achse im erscheinenden Dialogfeld für die Beschränkungseinstellungen anpassen.

<span id="Plane_Parallel"></span>
==== Ebene parallel ====

Wähle eine Ebene auf beiden Teilen aus. Die Werkzeugleistenschaltfläche [[Image:A2p PlanesParallelConstraint.svg|24px]] fügt die Beschränkung {{Variable|EbenenParallel}} hinzu. Im Dialogfeld Beschränkung kannst du die Richtung der Beschränkung angeben. Durch die Beschränkung werden die Ebenen parallel gemacht.

<span id="Plane_on_Plane"></span>
==== Ebene auf Ebene ====

Wähle eine Ebene auf beiden Teilen aus. Die Werkzeugleistenschaltfläche [[Image:A2p PlaneCoincidentConstraint.svg|24px]] fügt die Beschränkung {{Variable|EbeneDeckungsgleich}} hinzu. Im Dialogfeld Beschränkung kannst du eine Beschränkungsrichtung und einen Versatz zwischen den Ebenen angeben. Dieser Versatz kann auch umgedreht werden. Wenn der Versatz gleich Null ist, bewirkt die Beschränkung, dass die Ebenen zusammenfallen.

<span id="Plane_Angular"></span>
==== Ebene Winklig ====

Wähle eine Ebene auf beiden Teilen aus. Die Werkzeugleistenschaltfläche [[Image:A2p AngleConstraint.svg|24px]] fügt die Beschränkung {{Variable|winkligeEbenen}} hinzu. Im Dialogfeld Beschränkung kannst du einen Winkel zwischen den Ebenen angeben. Durch die Beschränkung werden die Ebenen zunächst parallel, und der angegebene Winkel wird festgelegt.

<span id="Coincidence_at_Center_of_Mass"></span>
==== Deckungsgleichheit im Massenschwerpunkt ====

Wähle entweder eine geschlossene [[Glossary/de#Edge|Kante]] oder eine Ebene auf beiden Teilen. Die Werkzeugleistenschaltfläche [[Image:A2p CenterOfMassConstraint.svg|24px]] fügt die Beschränkung {{Variable|Massenschwerpunkt}} hinzu. Im Dialogfeld Beschränkung kannst du einen Versatz zwischen den Kanten oder Ebenen angeben. Dieser Versatz kann auch umgedreht werden. Außerdem kannst du die Beschränkungsrichtung festlegen und die Drehung der Teile sperren. Wenn der Versatz gleich Null ist, setzt die Beschränkung die Kanten oder Ebenen auf dieselbe Ebene.

<span id="Subassemblies"></span>
=== Unterbaugruppen ===

Eine Baugruppe kann andere Baugruppen enthalten. Sie werden wie Teile hinzugefügt, durch drücken der Werkzeugleistenschaltfläche [[Image:A2p ImportPart.svg|24px]] und Wahl einer {{FileName|*.FCStd}} Datei, die eine Baugruppe enthält. Solche Unterbaugruppen können auch wie Teile bearbeitet werden, indem die Werkzeugleisteschaltfläche [[Image:A2p EditPart.svg|24px]] verwendet wird. Bitte stelle bei höheren Baugruppenstufen sicher, dass du die Baugruppe rekursiv über die Werkzeugleistenschaltfläche [[File:A2p_RecursiveUpdate.svg|24px]] aktualisierst, wenn es Änderungen gab.

<span id="Constraint_Handling"></span>
== Handhabung von Beschränkungen ==

Mögliche Beschränkungen für eine Auswahl werden in der Werkzeugleiste und im Dialogfeld ''Beschränkungswerkzeuge'' angezeigt, durch aktivieren der entsprechenden Schaltflächen. Der ''Beschränkungswerkzeuge'' Dialog wird über die Werkzeugleistenschaltfläche  [[Image:A2p DefineConstraints.svg|24px]] geöffnet. Es ist beabsichtigt, offen zu bleiben, um der Baugruppe schnell mehrere Beschränkungen hinzufügen zu können.

Vorhandene Beschränkungen können bearbeitet werden, indem sie im Modellbaum ausgewählt und dann entweder doppelt angeklickt oder mit der Werkzeugleistenschaltfläche [[Image:A2p EditConstraint.svg|24px]] bearbeitet werden. Dadurch wird das Dialogfeld ''Beschränkungseigenschaften'' geöffnet.

Beschränkungen können vorübergehend unterdrückt werden, indem man sie im Modellbaum auswählt und die Baumelementeigenschaft {{PropertyData/de|Unterdrückt}} ändert.

Beschränkungen können entweder durch Auswahl im Modellbaum und Drücken von {{KEY|Entf}} oder durch Auswahl eines Teils mit Beschränkungen im Modellbaum und Verwendung der Werkzeugleistenschaltfläche  [[Image:A2p DeleteConnections.svg|24px]] gelöscht werden.

Alle Beschränkungen können jederzeit mit der Werkzeugleistenschaltfläche [[Image:A2p solver.svg|24px]] aufgelöst werden. Wenn die Werkzeugleistenschaltfläche [[Image:A2p ToggleAutoSolve.svg|24px]] aktiviert ist, wird nach jeder Bearbeitung einer Beschränkung automatisch eine Auflösung durchgeführt.

Die Werkzeugleistenschaltfläche [[Image:A2p FlipConstraint.svg|24px]] wirkt sich auf die zuletzt hinzugefügte Beschränkung aus. Sie kehrt die Richtung der Beschränkung um.

Mit dem Werkzeug [[Image:A2p CD_ConstraintViewer.svg|24px]] können vorhandene Beschränkungen angezeigt und überprüft werden. Nach dem Anklicken erscheint ein Dialogfeld. Man wählt dann entweder ein Teil in der Baumstruktur aus und klickt auf die Schaltfläche {{Button|Aus Part importieren}}, um alle Beschränkungen dieses Teils abzurufen, oder wählt eine oder mehrere Beschränkungen in der Baumstruktur aus und klickt auf die Schaltfläche {{Button|Aus der Baumansicht importieren}}. Als Ergebnis erhält man alle Informationen zu den Beschränkungen. Durch Klicken in die Spalte ''Unterdrücken (Suppress)'' kann eine einzelne Beschränkung unterdrückt werden. Weitere Funktionen findetie in den Tooltipps der anderen Dialogschaltflächen.

<span id="Part_Lists"></span>
== Stücklisten ==

Um Stücklisten von Baugruppen zu erstellen, müssen die verschiedenen Teile der Baugruppe Teilinformationen erhalten, die von A2plus gelesen werden können. Dies geschieht durch Bearbeiten des Teils mit Hilfe der Werkzeugleistenschaltfläche [[Image:A2p EditPart.svg|24px]]. Drücke im geöffneten Teil die Werkzeugleistenschaltfläche [[Image:A2p PartsInfo.svg|24px]] und ein [[Spreadsheet_Workbench|Tabellenblatt]] mit dem Namen ''#PARTINFO#'' wird erstellt.

Die Struktur des Tabellenblatts ist wie folgt:

[[Image:A2p PartinfoTable.png]]

Fülle die grauen Felder mit den Informationen aus, die du hast und in der endgültigen Stückliste haben möchtest.

Verwende in der Baugruppe oder Unterbaugruppe die Werkzeugleistenschaltfläche [[Image:A2p PartsList.svg|24px]]. Du  wirst gefragt, ob du rekursiv über alle Unterbaugruppen iterieren möchtest. Klicke auf ''Ja''. Dadurch wird ein neues Arbeitsblatt mit dem Namen ''#PARTSLIST#'' erstellt. Sie enthält die Informationen aus den verschiedenen ''#PARTSINFO#''-Tabellenblättern der Teile in einer Liste wie dieser:

[[Image:A2p PartslistTable.png]]

Die Position (POS) wird automatisch entsprechend der Darstellung der Teile im Modellbaum festgelegt. Das oberste Teil erhält die Position 1.

Die Menge (QTY) wird automatisch aus der Baugruppe berechnet. Wenn ein Teil zweimal in der Baugruppe vorkommt, erhält es die Menge 2.

Wenn man eine Teilinfo aktualisiert hat, können die Teileliste durch erneutes Drücken der Symbolleisten-Schaltfläche [[Image:A2p PartsList.svg|24px]] aktualisiert werden.

Für Unterbaugruppen kann man auch eine Info-Tabelle mit der Symbolleisten-Schaltfläche [[Image:A2p PartsInfo.svg|24px]] erstellen. Wenn man die Teileliste der Hauptbaugruppe erstellt oder aktualisiert, werden diese Informationen verwendet, wenn man auf ''Nein'' klickt, wenn man gefragt wird, ob man alle Unterbaugruppen rekursiv durchlaufen möchte. Dann sind die verschiedenen Teile nicht in der Teileliste enthalten, sondern nur die Unterbaugruppen.

<span id="Special_Features"></span>
== Sonderfunktionen ==

<span id="Assembly_Structure"></span>
=== Zusammenbaustruktur ===

Die Werkzeugleisten-Schaltfläche  [[Image:A2p Treeview.svg|24px]] erstellt eine HTML-Datei mit der Struktur der Baugruppe. Die Datei wird standardmäßig im Ordner der Baugruppendatei erstellt. Die Struktur sieht wie folgt aus:

:[[Image:A2p Dependency-Tree.jpg]]

<span id="Degrees_of_Freedom"></span>
=== Freiheitsgrade ===

Die Schaltfläche [[Image:A2p DOFs.svg|24px]] kennzeichnet jeden Teil der Baugruppe mit seinen Freiheitsgraden. Außerdem gibt er eine Liste mit allen Teilen und ihren Abhängigkeiten aus. Die Liste wird in FreeCADs Widget ''Ausgabefenster'' ausgegeben. Wenn dieses Widget derzeit nicht sichtbar ist, kann es entweder durch einen Rechtsklick auf einen leeren Bereich der FreeCAD-Symbolleiste und anschließende Auswahl im Kontextmenü oder über das Menü {{MenuCommand|Ansicht → Symbolleisten → [[Report view/de|Ausgabefenster]]}} angezeigt werden.

Die Beschriftungen der Anzahl der Freiheitsgrade können mittels eines Klicks auf die Schaltfläche [[Image:A2p DOFs.svg|24px]] entfernt werden.

<span id="Part_Labels"></span>
=== Teilkennzeichnungen === 

Die Schaltfläche [[Image:A2p PartLabel.svg|24px]] kennzeichnet jedes Teil der Baugruppe in der 3D-Ansicht mit seinem Namen. Die Teilekennzeichnungen können durch erneutes Klicken auf die Schaltfläche [[Image:A2p PartLabel.svg|24px]] wieder entfernt werden.

<span id="Shape_of_whole_Assembly"></span>
=== Form der gesamten Baugruppe ===

Manchmal ist es notwendig, die gesamte Baugruppe zu einer Form zusammenzufassen. Diese Form kann dann beispielsweise für den 3D-Druck im [[Mesh_Workbench/de|Arbeitsbereich Mesh]] oder für Zeichnungen im  [[TechDraw_Workbench|Arbeitsbereich TechDraw]] verwendet werden. Sie wird mit der Symbolleisten-Schaltfläche [[Image:A2p_SimpleAssemblyShape.svg|24px]] erstellt. Die Form ist standardmäßig nicht sichtbar. Man verwendet dieselbe Symbolleisten-Schaltfläche, um die Form bei Änderungen an der Baugruppe zu aktualisieren.

<span id="Convert_absolute_Paths_to_relative_Ones"></span>
=== Absolute Pfade in relative Pfade umwandeln ===

Mit dem Menü {{MenuCommand|A2plus → Verschiedenes → [[File:A2p_SetRelativePathes.svg|24px]] Absolute Pfade importierter Teile in relative Pfade umwandeln}} kann man absolute Pfade importierter Teile in relative Pfade umwandeln.

<span id="Preferences"></span>
== Einstellungen ==

Die A2plus-Einstellungen können über das FreeCAD-Menü {{MenuCommand|Bearbeiten → [[Preferences_Editor/de|Einstellungen]]}} und dort im Abschnitt ''A2plus'' aufgerufen werden. Die folgenden Optionen können eingestellt werden:

<span id="Default_solving_method"></span>
=== Standardlösungsmethode ===

; Verwendung der Lösung von Teilsystemen: Der Löser beginnt mit einem Teil, dessen Eigenschaft {{PropertyData/de|fixed Position}} auf ''true'' gesetzt ist, und einem daran befestigten Teil. Alle anderen Teile werden nicht berechnet. Wenn eine Lösung gefunden werden konnte, wird das nächste befestigte Teil zur Berechnung hinzugefügt und so weiter.
; ''Magnetischen'' Löser verwenden, alle Teile auf einmal lösen: Der Löser versucht, alle Teile auf einmal in Richtung eines Teils zu bewegen, für das die Eigenschaft {{PropertyData/de|fixed Position}} auf ''true'' gesetzt ist. Es ist zu beachten, dass dies in den meisten Fällen mehr Zeit für die Berechnung einer Lösung in Anspruch nimmt.
; Feste Position erzwingen: Hiermit wird die Eigenschaft {{PropertyData/de|fixed Position}} für alle Teile in der Baugruppe auf ''true'' gesetzt. Dann wird tatsächlich keine Berechnung durchgeführt, da alle Teile immer an den Positionen fixiert sind, an denen sie erstellt wurden.

<span id="Default_solver_behaviour"></span>
=== Standardlöserverhalten ===

; Automatisch lösen, wenn eine Beschränkungseigenschaft geändert wird: Der Löser wird automatisch gestartet. Entspricht dem Aktivieren der Symbolleisten-Schaltfläche. [[Image:A2p ToggleAutoSolve.svg|24px]].


<span id="Behaviour_when_updating_imported_parts"></span>
=== Verhalten beim Aktualisieren importierter Teile ===

; Importierte Teile vor der Aktualisierung neu berechnen: Alle Teile der Baugruppe, einschließlich Unterbaugruppen, werden in FreeCAD geöffnet, um anhand der Werte aus den Tabellenkalkulationen neu konstruiert zu werden. Diese Funktion dient der vollständig parametrischen Konstruktion. '''Hinweis:''' Diese Funktion ist sehr experimentell und wird für wichtige Projekte nicht empfohlen.<br/>Bekannte Probleme:
* Die Baugruppe kann aufgrund falscher Verweise auf topologische Namen in Teilen zerstört werden.
* Master-Tabellen können beschädigt werden, wenn sie bearbeitet werden, während eine referenzierte Teiledatei bereits geschlossen ist. Dies kann zum Absturz von FreeCAD führen.

; Rekursive Aktualisierung importierter Teile aktivieren: Öffnet alle Unterbaugruppen rekursiv, um sie zu aktualisieren.

; Experimentelle topologische Benennung verwenden: Beim Importieren von Teilen in die Baugruppe generiert ein Algorithmus topologische Namen für jedes Unterelement der importierten Form. Die topologischen Namen werden in die {{PropertyData/de|mux Info}} geschrieben. Wenn ein importiertes Teil aktualisiert werden muss, werden diese topologischen Namen verwendet, um die Unterelemente der Beschränkungen zu aktualisieren. Dadurch werden Baugruppen robuster gegenüber volatilen Unterelementnummern von FreeCAD. <br/> '''Hinweis:''' Dies erhöht die Dateigrößen und die Berechnungszeit beim Importieren von Teilen. Wenn die topologische Benennung verwendet werden soll, muss sie vor dem Erstellen der Baugruppe aktiviert werden.

; Transparenz pro Fläche von Teilen und Baugruppen übernehmen: Verwendet die Farb- und Transparenzeinstellungen aus importierten Teilen.<br/> '''Hinweis:''' Diese Funktion ist sehr experimentell und wird für wichtige Projekte nicht empfohlen.

; Unsichtbare Formen nicht importieren: Dadurch werden unsichtbare Bezugs-/Konstruktionsformen ausgeblendet. '''Hinweis:''' Es dürfen keine Beschränkungen mit Bezugs-/Konstruktionsformen in übergeordneten oder anderen Unterbaugruppen verbunden sein. Andernfalls kann die Baugruppe beschädigt werden.

Die Volumenvereinigung zum Importieren von Teilen und Unterbaugruppen verwenden: Alle importierten Teile werden direkt als Vereinigung zusammengefügt. Diese Funktion ist nützlich für [[FEM_Workbench/de|FEM]]-Simulationen oder [[Manual:Preparing_models_for_3D_printing/de|3D-Druck]], wenn nur ein Volumen zulässig ist. Alternativ kann später eine [[#Shape_of_whole_Assembly|Form der gesamten Baugruppe]] erstellt werden.

<span id="User_interface_settings"></span>
=== Benutzeroberflächeneinstellungen ===

<div lang="en" dir="ltr" class="mw-content-ltr">
; Show constraints in toolbar : If this option is not used, the toolbar buttons for the different constraints are not visible to save space in the toolbar. New constraints can still be set using the ''Constraint Tools'' dialog (toolbar button [[Image:A2p DefineConstraints.svg|24px]]).
; Use native file manager of your OS : If this option is used, you get the file dialog of your OS when selecting files for assemblies.
</div>

<span id="Storage_of_files"></span>
=== Speicherung von Dateien ===

<div lang="en" dir="ltr" class="mw-content-ltr">
; Use relative paths for imported parts : Uses relative file paths to the part files.
; Use absolute paths for imported parts : Uses absolute file paths to the part files.
; All files are in this project folder : All project files have to be in the specified folder. It doesn't matter if they are in subfolders of this folder. '''Note:''' No file is allowed to exist several times in the folder (e.g. in different subfolders).<br/>  This option is helpful to work on different machines because then one only has to copy the project folder.
</div>

<span id="Troubleshooting"></span>
== Problembehebung ==

Früher oder später wird man auf das Problem stoßen, dass A2plus die festgelegten Einschränkungen nicht lösen kann. Um dies zu überwinden, gibt es verschiedene Strategien:

<span id="Using_the_Conflict_Finder_Tool"></span>
=== Verwendung des Konfliktfinderwerkzeugs ===

<div lang="en" dir="ltr" class="mw-content-ltr">
This is the safest method when you have several constraints because this tool attempts to solve one constraint after another until it finds the conflicting constraint. Then you can go on with the other strategies to resolve the identified constraint. The tool is called using the toolbar button [[File:A2p_SearchConstraintConflicts.svg|24px]].
</div>

<span id="Checking_Constraint_Direction"></span>
=== Überprüfung der Beschränkungsrichtung ===

<div lang="en" dir="ltr" class="mw-content-ltr">
Sometimes constraints seem to be consistently defined but they can nevertheless not be solved. An example: Assume you have a {{Variable|[[#Plane_Parallel|planesParallel]]}} constraint set for two planes. Now you want to set for the same planes the {{Variable|[[#Plane_on_Plane|planeCoincident]]}} constraint and A2plus cannot solve this. Then the constraint directions of {{Variable|planesParallel}} and {{Variable|planeCoincident}} are different. Use the same direction for both constraints to fix this.
</div>

A2plus bietet die Möglichkeit, mithilfe der Symbolleisten-Schaltfläche [[Image:A2p_ReAdjustConstraints.svg|24px]] automatisch die richtige Ausrichtung für '''alle''' Beschränkungen der Baugruppe zu überprüfen.

<span id="Deleting_Constraints"></span>
=== Löschen von Beschränkungen ===

Die meisten Fälle von unlösbaren Benschränkungen treten direkt beim Hinzufügen einer neuen Benschränkung auf. Die Lösung besteht dann darin, die zuletzt hinzugefügte Benschränkung zu löschen. A2plus wird dies ebenfalls vorschlagen.

<div lang="en" dir="ltr" class="mw-content-ltr">
Sometimes the deletion strategy is the only one, for example when you edited a part in FreeCAD so that faces or edges connected to constraints are missing. You should then delete one constraint that is connected to the changed part at a time. Use the toolbar button [[Image:A2p solver.svg|24px]] after every deletion to see if you reached a solvable state.
</div>

Wenn man eine Baugruppe hat, die gelöst werden kann, fügt man Schritt für Schritt die erforderlichen Beschränkungen hinzu.

<span id="Moving_Parts"></span>
=== Bewegliche Teile ===

<div lang="en" dir="ltr" class="mw-content-ltr">
In some cases the solver only needs better start values to solve the constraints. Take for example the case that you have an axle part and a wheel part. You add a {{Variable|axisCoincident }} constraint and get no info that the solver failed but the parts are not moved accordingly and in the ''Report view'' widget of FreeCAD you see "''REACHED  POS-ACCURACY :0.0''". A solution for this is to move the parts closer to that position you like to get by the constraint.
</div>

<div lang="en" dir="ltr" class="mw-content-ltr">
'''Note:''' Assure that at least one part of the constraint has the property {{PropertyData|fixed Position}} set to ''false''.
</div>

<span id="Setting_the_Tip_Property"></span>
=== Festlegen der Eigenschaft Spitze ===

<div lang="en" dir="ltr" class="mw-content-ltr">
If you miss some features of your part after the import to an A2plus assembly, check the property {{PropertyData|[[PartDesign_MoveTip|Tip]]}}.
</div>

<div lang="en" dir="ltr" class="mw-content-ltr">
A2plus imports bodies of parts with all their features up to the tip feature. This is sensible because setting the tip to a certain feature means that all features behind the tip should not appear in the final part. So if you miss a part feature in A2plus, open the part via the toolbar button [[Image:A2p EditPart.svg|24px]], then select a body and look at its property {{PropertyData|Tip}}. If the tip is not at the feature where you want it, right-click on the feature where the tip should be and choose {{MenuCommand|[[File:PartDesign_MoveTip.svg|24px]] Set tip}}. Finally save the part and reload the assembly using the toolbar button [[Image:A2p ImportPart_Update.svg|24px]].
</div>

<span id="Repairing_Assembly_Tree"></span>
=== Baugruppenbaum reparieren ===

<div lang="en" dir="ltr" class="mw-content-ltr">
If you cannot see a clear reason why some constraints cannot be resolved, you can try to use the toolbar button [[Image:A2p RepairTree.svg|24px]]. This will resolve all constraints and re-group then again under the different parts.
</div>

<span id="Migrating_old_A2plus_assemblies"></span>
=== Migration alter A2plus Baugruppen ===

<div lang="en" dir="ltr" class="mw-content-ltr">
Assemblies created with A2plus older than March 2019 do not show the correct icons for imported parts and have obsolete properties. These assemblies can be migrated to A2plus version 0.4.35 and newer using the menu {{MenuCommand|A2plus → Misc → [[File:A2p_Upgrade.svg|24px]] Migrate proxies of imported parts}}. After doing this, you must save and reopen your assembly file.
</div>

<span id="Avoiding_Accented_Characters"></span>
=== Vermeidung von Sonderzeichen ===

'''Diese Strategie ist für Windows nicht erforderlich.'''

<div lang="en" dir="ltr" class="mw-content-ltr">
On some operating systems you can get problems if the file names or the file paths of parts or the assembly contain accented characters. Therefore avoid such characters and also special characters in general.
</div>

<span id="Fixing_Position"></span>
=== Festlegen der Position ===

<div lang="en" dir="ltr" class="mw-content-ltr">
'''This strategy is no longer necessary for assemblies created with A2plus 0.3.11 or newer because A2plus issues now a warning for missing fixed positions.'''
</div>

<div lang="en" dir="ltr" class="mw-content-ltr">
When you set a constraint between two parts and no part has the property {{PropertyData|fixed Position}} set to ''true'' or is connected by a constraint to a part with {{PropertyData|fixed Position}} set to ''true'', the constraint cannot be solved. The same happens if both parts of the constraint have {{PropertyData|fixed Position}} set to ''true''.
</div>

<div lang="en" dir="ltr" class="mw-content-ltr">
Then A2plus outputs the info about the failed solution, but sometimes you only see that the parts are not moved accordingly and in the ''Report view'' widget of FreeCAD you see "''REACHED  POS-ACCURACY :0.0''". This means the solver finished without errors but it could actually not solve the constraints.
</div>

<div lang="en" dir="ltr" class="mw-content-ltr">
Therefore check that at least one of your parts in the assembly has {{PropertyData|fixed Position}} set to ''true''. Then assure that you only set constraints to a part which is somehow connected to the fixed part. To visualise these dependencies, see section [[#Assembly_Structure|Assembly Structure]].
</div>

<span id="Rotating_Parts"></span>
=== Drehende Teile ===

<div lang="en" dir="ltr" class="mw-content-ltr">
'''This strategy is no longer necessary for assemblies created with A2plus 0.4.0 or newer because A2plus rotates the parts now automatically a bit in the background to get a sufficient start angle for the solver.'''
</div>

<div lang="en" dir="ltr" class="mw-content-ltr">
The solver often fails for the constraint {{Variable|angledPlanes}} if the two selected planes have currently an angle of 0° or 180°. (The parts are not moved accordingly and in the ''Report view'' widget of FreeCAD you see "''REACHED  POS-ACCURACY :0.0''".) A solution for this is to rotate one part by a few degrees using FreeCAD's transform feature (right-click on the part in the model tree and select in the context menu {{MenuCommand|Transform}}).
</div>

'''Hinweis:''' Sicherstellen, dass mindestens ein Teil der Beschränkung die Eigenschaft {{PropertyData/de|fixed Position}} auf ''false'' gesetzt aufweist.

== Animation ==

A2plus bietet Animationen per Drag & Drop und über Python-Skripte.

<span id="Dragging"></span>
=== Ziehen ===

<div lang="en" dir="ltr" class="mw-content-ltr">
Dragging animations are interactive since you trigger it by dragging a part of the assembly.
To get these kind of animations:
# Fully constrain the part whose movement or rotation should be animated
# Click on the toolbar button [[Image:A2p MovePartUnderConstraints.svg|24px]]. This enables the dragging mode.
# Click on the desired part in the assembly.
# Now you can move the mouse and the part will follow the movement of the mouse within the defined constraints.
# To end the dragging mode, left click in the assembly or press ESC.
</div>

Hier ist ein Beispiel für eine Baugruppe, mit der die Ziehanimation ausprobiert werden kann: [https://forum.freecad.org/download/file.php?id=99204 A2p_example-for-dragging-animation.FCStd]

[[Image:A2p_dragging-animation-result.gif]]

{{Caption|Oben: Die Zieh-Animation unter Verwendung der Beispielbaugruppe}}

<span id="Scripting"></span>
=== Skripten ===

Obwohl der Ziehen-Modus schöne interaktive Animationen bietet, sind diese manchmal für Screencasts oder Videos nicht präzise genug. Skriptbasierte Animationen haben den Vorteil, dass sie Bewegungen und Drehungen auf definierte Weise animieren. Man kann beispielsweise ein Teil um genau 10° vor und zurück drehen. Die folgenden Beispiele verwenden eine Baugruppe, in der ein Teil gedreht werden soll. Wenn man versucht, dies mit dem Ziehen-Modus zu animieren, wird man feststellen, wie schwierig es ist, eine Vor- und Rückwärtsdrehung zu erzielen, die man beispielsweise dem Chef in einer Präsentation zeigen könnte. Mit dem interaktiven Beispielskript ist dies jedoch eine leichte Aufgabe.

<div lang="en" dir="ltr" class="mw-content-ltr">
A scripted animation works usually this way:
# The assembly is fully constrained
# The script changes a parameter, for example the position or rotation angle of a part
# After the parameter change, the assembly constraints are solved
# Step 2. and 3. are repeated to get the animation
</div>

Es ist auch möglich, anstelle eines Platzierungs-Parameters eine Beschränkung zu ändern, beispielsweise den Abstand zwischen zwei Ebenen.

<span id="Simple_Script_Example"></span>
==== Einfaches Skriptbeispiel ====

Die einfachste Art, eine Animation zu programmieren, ist eine nicht interaktive Animation, die einer definierten Bewegung folgt. Hier ein Beispiel:
Lade zunächst diese Assembly-Datei herunter.: [https://forum.freecad.org/download/file.php?id=97554 A2p_animated-example.FCStd] und auch dieses Python-Skript: [https://forum.freecad.org/download/file.php?id=97981 A2p_animation-example-script.py].

<div class="mw-collapsible mw-collapsed toccolours">
Dies ist der Inhalt des Skripts, und die mit einem '#' beginnenden Zeilen beschreiben, was die verschiedenen Skriptzeilen bewirken:
<div class="mw-collapsible-content">
{{Code|code=
# Bibliotheken importieren
import time, math, PySide
import A2plus.a2p_solversystem as a2p_solver

<div lang="en" dir="ltr" class="mw-content-ltr">
# we use steps of 1 degree
step = 1
# wait 1 ms between every step
timeout = 0.001
# initial angle is 0 degree
angle = 0
# we take the currently opened document
document = FreeCAD.activeDocument()
# we want later change the rotation angle of the part "star_wheel_001"
starWheel = document.getObject("star_wheel_001")
# define a progress dialog running from 0 to 360
progressDialog = PySide.QtGui.QProgressDialog(u"Animation progress", u"Stop", 0, 360)
</div>

<div lang="en" dir="ltr" class="mw-content-ltr">
# the while block is the main loop to change the angle and solve
# the assembly constraints subsequently
while angle < 360: # run this loop until we have one full turn (360 degrees)
    # increase the rotation angle
    angle += step
    # set the new angle to the progress dialog
    progressDialog.setValue(angle)
    # change the rotation angle of the part "star_wheel_001"
    starWheel.Placement.Rotation.Angle = math.radians(angle)
    # solve the constraints 
    a2p_solver.solveConstraints(document, useTransaction=True)
    # update the view after the solving ('Gui' stands for 'graphical user interface')
    FreeCADGui.updateGui()
    # bring the progress dialog to front
    PySide.QtGui.QWidget.raise_(progressDialog)
    # if 'Stop' was pressed in the dialog, exit the loop
    if progressDialog.wasCanceled():
        angle = 360
    # wait some time before performing the next step
    time.sleep(timeout)
}}
</div>
</div>
</div>

<div lang="en" dir="ltr" class="mw-content-ltr">
To use the script to perform the animation, we must
# Open the assembly file in FreeCAD.
# Open the script file in FreeCAD.
# Click on the toolbar button [[Image:Menu_Std_DlgMacroExecute_fr_02.png|24px]] to execute the script (also called macro).
# Change to the tab of the assembly to see the rotation.
</div>

Um zu üben, ändert man einfach etwas im Skript und führt es anschließend aus. Man erhöht beispielsweise ''step'' auf ''5''.

Dies ist das Ergebnis der Beispielanimation:

[[Image:A2p animated-example-result.gif]]

<span id="Interactive_Script_Example"></span>
==== Interaktives Skriptbeispiel ====

Das erste Skriptbeispiel zeigte, wie man eine Animation ohne Benutzerrückmeldung erstellt. Bei den meisten Anwendungen muss man mit der Animation interagieren. Das Interessante an diesem Beispiel ist beispielsweise, zu sehen, wie die Antriebsstifte die mittlere Nut des Rades überqueren. Um sich das genauer anzusehen, möchte man dieses Detail vielleicht dem Kollegen oder dem Chef zeigen. Daher benötigt man eine interaktive Lösung.

Dies kann mithilfe eines benutzerdefinierten Animationsdialogs mit einem Schieberegler erfolgen. Durch Verschieben des Schiebereglers kann man den Drehwinkel einstellen und so an interessanten Positionen hin und her drehen.

Wir verwenden dieselbe Assembly-Datei: [https://forum.freecad.org/download/file.php?id=97554 A2p_animated-example.FCStd] und dieses  Python-Skript: [https://forum.freecad.org/download/file.php?id=97982 A2p_animation-example-script.py].

<div class="mw-collapsible mw-collapsed toccolours">
Dies ist der Inhalt des Skripts, um den interaktiven Animationsdialog aufzurufen:
<div class="mw-collapsible-content">
{{Code|code=
# Bibliotheken importieren
import time, math, PySide, sys
import FreeCAD.A2plus.a2p_solversystem as a2p_solver
from FreeCAD import Units
from PySide import QtCore, QtGui

<div lang="en" dir="ltr" class="mw-content-ltr">
# wait 1 ms after every calculation
timeout = 0.001
# we take the currently opened document
document = FreeCAD.activeDocument()
# we want later change the rotation angle of the part "star_wheel_001"
starWheel = document.getObject("star_wheel_001")
</div>

class AnimationDlg(QtGui.QWidget): # Der Animations-Dialog

    <div lang="en" dir="ltr" class="mw-content-ltr">
def __init__(self): # to initialize the dialog
        super(AnimationDlg, self).__init__()
        self.initUI()
</div>

    <div lang="en" dir="ltr" class="mw-content-ltr">
def initUI(self): # the definition of the dialog components
        self.setMinimumSize(self.minimumSizeHint()) # set the minimal dialog size to minimum
        self.setWindowTitle('Animation Dialog')
        # use a grid layout for the whole form
        self.mainLayout = QtGui.QGridLayout()
        self.lineNo = 0 # first dialog grid line
        # add description label
        DescriptionLabel = QtGui.QLabel(self)
        DescriptionLabel.setText("Change slider to change rotation angle")
        self.mainLayout.addWidget(DescriptionLabel,self.lineNo,0,1,4)
         # next dialog grid line
        self.lineNo += 1
        # add a label; there is no need for the "self." prefix because we don't want to change the label later
        LabelMin = QtGui.QLabel(self)
        LabelMin.setText("Min")
        LabelMin.setFixedHeight(32)
        self.mainLayout.addWidget(LabelMin,self.lineNo,0)
        # add a spin edit to define the slider minimum
        self.MinEdit = QtGui.QSpinBox(self)
        # get the angle unit as string
        self.MinEdit.setSuffix(" " + str(FreeCAD.Units.Quantity(1, FreeCAD.Units.Angle))[2:])
        self.MinEdit.setMaximum(999)
        self.MinEdit.setMinimum(0)
        self.MinEdit.setSingleStep(10)
        self.MinEdit.setValue(0)
        self.MinEdit.setFixedHeight(32)
        self.MinEdit.setToolTip("Minimal angle for the slider")
        QtCore.QObject.connect(self.MinEdit, QtCore.SIGNAL("valueChanged(int)"), self.setMinEdit)
        self.mainLayout.addWidget(self.MinEdit,self.lineNo,1)
        # add the slider
        self.slider = QtGui.QSlider(QtCore.Qt.Horizontal, self)
        self.slider.setRange(0, 360)
        self.slider.setValue(0)
        self.slider.setFixedHeight(32)
        self.slider.setToolTip("Move the slider to change the rotation angle")
        QtCore.QObject.connect(self.slider, QtCore.SIGNAL("sliderMoved(int)"), self.handleSliderValue)
        self.mainLayout.addWidget(self.slider,self.lineNo,2)
        # add a label
        LabelMax = QtGui.QLabel(self)
        LabelMax.setText("Max")
        LabelMax.setFixedHeight(32)
        self.mainLayout.addWidget(LabelMax,self.lineNo,3)
        # add a spin edit to define the slider maximum
        self.MaxEdit = QtGui.QSpinBox(self)
        # get the angle unit as string
        self.MaxEdit.setSuffix(" " + str(FreeCAD.Units.Quantity(1, FreeCAD.Units.Angle))[2:])
        self.MaxEdit.setMaximum(999)
        self.MaxEdit.setMinimum(1)
        self.MaxEdit.setSingleStep(10)
        self.MaxEdit.setValue(360)
        self.MaxEdit.setFixedHeight(32)
        self.MaxEdit.setToolTip("Maximal angle for the slider")
        QtCore.QObject.connect(self.MaxEdit, QtCore.SIGNAL("valueChanged(int)"), self.setMaxEdit)
        self.mainLayout.addWidget(self.MaxEdit,self.lineNo,4)
         # next dialog grid line
        self.lineNo += 1
        # add a spacer
        self.mainLayout.addItem(QtGui.QSpacerItem(10,10), 0, 0)
        # add a label
        LabelCurrent = QtGui.QLabel(self)
        LabelCurrent.setText("Current angle:")
        LabelCurrent.setFixedHeight(32)
        self.mainLayout.addWidget(LabelCurrent,self.lineNo,1)
        # output the current angle
        self.CurrentAngle = QtGui.QLineEdit(self)
        self.CurrentAngle.setText(str(0))
        self.CurrentAngle.setFixedHeight(32)
        self.CurrentAngle.setToolTip("Current rotation angle")
        self.CurrentAngle.isReadOnly()
        self.mainLayout.addWidget(self.CurrentAngle,self.lineNo,2)
        # add label for the unit
        LabelUnit = QtGui.QLabel(self)
        LabelUnit.setText("deg")
        LabelUnit.setFixedHeight(32)
        self.mainLayout.addWidget(LabelUnit,self.lineNo,3)
        # button to close the dialog
        self.Close = QtGui.QPushButton(self)
        self.Close.setText("Close")
        self.Close.setFixedHeight(32)
        self.Close.setToolTip("Closes the dialog")
        QtCore.QObject.connect(self.Close, QtCore.SIGNAL("clicked()"), self.CloseClicked)
        self.mainLayout.addWidget(self.Close,self.lineNo,4)
        # place the defined grid layout to the dialog
        self.setLayout(self.mainLayout)
        self.update()
</div>

    <div lang="en" dir="ltr" class="mw-content-ltr">
def handleSliderValue(self):
        # set slider value as angle
        starWheel.Placement.Rotation.Angle = math.radians(self.slider.value())
        # output current angle
        self.CurrentAngle.setText(str(self.slider.value()))
        # solve the constraints 
        a2p_solver.solveConstraints(document)
        # update the view after the solving ('Gui' stands for 'graphical user interface')
        FreeCADGui.updateGui()
        # wait some time, important to give time to perform calculations
        time.sleep(timeout)
</div>

    <div lang="en" dir="ltr" class="mw-content-ltr">
def setMinEdit(self):
        # assure that the minimum is samller than the maximum
        if self.MinEdit.value() >=  self.MaxEdit.value():
            self.MaxEdit.setValue(self.MinEdit.value() + 1)
        self.slider.setRange(self.MinEdit.value(), self.MaxEdit.value())
</div>

    <div lang="en" dir="ltr" class="mw-content-ltr">
def setMaxEdit(self):
        # assure that the minimum is samller than the maximum
        if self.MinEdit.value() >=  self.MaxEdit.value():
            self.MinEdit.setValue(self.MaxEdit.value() - 1)
        self.slider.setRange(self.MinEdit.value(), self.MaxEdit.value())
</div>

    def CloseClicked(self):
        AnimationDialog.close()

# Erstellen und Anzeigen des definierten Dialogfelds
AnimationDialog = AnimationDlg()
AnimationDialog.show()

<div lang="en" dir="ltr" class="mw-content-ltr">
# run this loop when the dialog is visible
while AnimationDialog.isVisible():
    # update the view; important to give the OS feedback the dialog is alive
    FreeCADGui.updateGui()
    # bring the dialog to front, so that the dialog is always visible
    QtGui.QWidget.raise_(AnimationDialog)
    # output slider value here too because during the calculation the slider might have been moved
    AnimationDialog.CurrentAngle.setText(str(AnimationDialog.slider.value()))
}}
</div>
</div>
</div>

Der im Skript definierte Dialog sieht wie folgt aus:

[[Image:A2p_AnimationDialog.png]]

<span id="Script_Commands"></span>
=== Skriptbefehle ===

Um die Skriptsyntax besser zu verstehen, findet man hier einige Informationen zu den Befehlen:
{{Code|code= starWheel.Placement.Rotation.Angle = math.radians(angle)}} 

Hier ändern wir die Positionierungseigenschaft {{incode|Rotation.Angle}} des zuvor als {{incode|starWheel}} erhaltenen Teils. Diese Eigenschaft erhält den Winkel als [https://de.wikipedia.org/wiki/Radiant_(Einheit) Radiant (Einheit)]. Die Funktion {{incode|radians()}} aus der Bibliothek {{incode|math}} konvertiert den Winkel von Grad in Radiant.

Die Eigenschaft {{incode|Rotation.Angle}} verwendet die aktuelle Positionierungsachse des Teils (in unserem Beispiel die X-Achse). Um das Teil beispielsweise um die Z-Achse zu drehen, kann man die Drehachse (vor dem Aufruf des Drehbefehls) mit dem folgenden Befehl festlegen:
{{Code|code= starWheel.Placement.Rotation.Axis = FreeCAD.Vector(0,0,1)}}
Anstelle des Drehens können Teile auch verschoben werden. Um beispielsweise die Position des Rades in Y-Richtung zu ändern, lautet der Befehl: 
{{Code|code= starWheel.Placement.Base.y = PositionShift}}
In diesem Fall würden wir nicht die Variable {{incode|angle}} definieren, sondern {{incode|PositionShift}}, die wir bei jedem Durchlauf der Schleife ändern.

Es gibt verschiedene Möglichkeiten, die Positionierung eines Teils festzulegen. Einige davon sind [[Placement/de| hier dokumentiert]]. Leider gibt es (noch) keine Liste mit allen möglichen Positionierungsbefehlen.
{{Code|code=a2p_solver.solveConstraints(document, useTransaction=False/True)}} 

Dies ist ein A2plus-spezifischer Befehl. Er löst die Baugruppenbeschränkungen der Baugruppe, die wir zuvor als {{incode|document}} erhalten haben. Die Option {{incode|useTransaction}} legt fest, ob FreeCAD jede Änderung im Undo/Redo-Stack speichern soll. Bei großen Animationen kann man diese Option daher auf {{FALSE}} setzen.

{{Userdocnavi{{#translation:}}}}
[[Category:Addons{{#translation:}}]]
[[Category:External Workbenches{{#translation:}}]]