{{UnfinishedDocu{{#translation:}}}}
<languages/>
{{TOCright}}

<span id="Introduction"></span>
==Introduzione==

Si consideri che [[Image:Workbench_Sketcher.svg|24px]] [[Sketcher_Workbench/it|Sketcher]] abbia bisogno di alcuni esempi che non siano tutorial o video dettagliati...

<span id="Film_hinge"></span>
==Cerniera a pellicola==

Una cerniera a pellicola è un piccolo pezzo di plastica flessibile che collega i due lati di un oggetto stampato a iniezione, come un condotto con un coperchio, o entrambe le metà di un involucro di protezione antipolvere.

Questo esempio utilizza una sorta di schizzo principale su cui sovrapporre alcuni schizzi dipendenti. Mostra inoltre come collegare e animare una semplice clip basata su feature di [[Image:Workbench_PartDesign.svg|16px]] [[PartDesign_Workbench/it|PartDesign]] e vincoli di [[Image:Workbench_Sketcher.svg|16px]] [[Sketcher_Workbench/it|Sketcher]]. L'utilizzo di [[Image:Bound-expression.svg|16px]] [[Expressions/it|espressioni]] come descritto di seguito richiede FreeCAD '''V 0.21 o superiore'''.

<span id="Basic_sketch"></span>
===Schizzo di base===

Solitamente un oggetto viene modellato in condizione chiusa. Successivamente, la parte mobile deve essere capovolta di 180° per essere modellata in condizione aperta.<br>La striscia pieghevole è rappresentata da un arco di cerchio per la condizione chiusa e da una linea retta per la condizione aperta, entrambi con lo stesso punto di partenza.<br>Il punto medio di una linea che collega entrambi i punti finali indica la posizione dell'asse di capovolgimento, che è normale al piano dello schizzo. (È posizionato sull'origine dello schizzo in modo che l'asse globale normale al piano dello schizzo possa essere utilizzato come asse di capovolgimento)

 <div class="mw-collapsible mw-collapsed">
(Some hidden extra explanation and workflow description can be expanded over there --> 

[[Image:Sketcher_ExampleHinge-01.gif|400px]]
{{Caption|Schizzo principale e cardine del film finale animato (cliccare sull'immagine se l'animazione si è interrotta dopo alcune ripetizioni)}}

<div class="mw-collapsible-content toccolours">

Per un semicerchio, la lunghezza dell'arco è il raggio moltiplicato per Pi greco ('''l = r * Pi greco'''). Il raggio è detto NeutralRadius e la linea è detta DevelopedLength. Un'espressione per DevelopedLength mette in relazione entrambi i valori: {{incode|.Constraints.NeutralRadius * pi greco}}
: All'interno dello stesso schizzo, un'espressione inizia con {{incode|.}} seguito da ValueType.ValueName per indirizzare un altro valore.

</div> <!-- End of collapsible element for content section. Do not remove! -->

<span id="Intermediate_sketch"></span>
===Schizzo intermedio===

L'arco di questa cerniera a pellicola ha lunghezza costante e raggio variabile. Un input è il NeutralRadius dello schizzo di base; per averlo a portata di mano in questo schizzo, è collegato come [[Image:Sketcher_Projection.svg|16px]] [[Sketcher_Projection/it|geometria di proiezione esterna]] con una dimensione di riferimento chiamata ReferenceRadius

<div class="mw-collapsible-content toccolours">

Un segmento di torta nella geometria di costruzione mostra la relazione tra l'arco e il raggio per un dato angolo.<br>
'''InputLength = ReferenceRadius * Pi'''<br>
e<br>
'''ArcLength = DynamicRadius * Pi * ArcAngle / 180°'''<br>
con lunghezza costante risulta:<br>
'''ReferenceRadius * Pi = DynamicRadius * Pi * ArcAngle / 180°'''<br>
E eliminando Pi otteniamo:<br>
'''ReferenceRadius = DynamicRadius * ArcAngle / 180°''' oppure '''DynamicRadius = ReferenceRadius * 180° / ArcAngle'''
: L'[[Image:Bound-expression.svg|16px]] [[Expressions|espressione]] per il valore DynamicRadius: {{incode|.Constraints.ReferenceRadius * 180 ° / .Constraints.AngoloArco}}

Una cerniera a pellicola è solitamente simmetrica, quindi per l'output viene utilizzato un altro arco con lo stesso punto centrale, chiamato HalfArc, che rappresenta metà dell'arco della cerniera.
: [[Image:Bound-expression.svg|16px]] [[Expressions|espressione]] per il valore HalfArc: {{incode|.Constraints.ArcAngle / 2}}

</div> <!-- End of collapsible element for content section. Do not remove! -->

[[Image:Sketcher_ExampleHinge-02.png|400px]]
{{Caption|Schizzo intermedio che mostra il raggio dinamico dell'arco di cerniera di 4 (mm) a un dato angolo di 45° (e il mezzo arco per l'output)}}

<span id="Film_hinge_sketch"></span>
===Schizzo della cerniera a pellicola===

Questo schizzo definisce lo spessore e la geometria adiacente alla cerniera della pellicola. Pertanto, si indichi il semiarco dello schizzo intermedio come geometria esterna per utilizzarlo come base per la parte della pellicola (in questo caso, una frazione di 180°).

Questa cerniera a pellicola ha lo scopo di mantenere le parti collegate a contatto tra loro quando sono chiuse. Questo risultato può essere ottenuto calcolando un arco circolare della lunghezza necessaria, quindi creando una striscia di spessore costante e infine applicando dei raccordi nel punto in cui la striscia incontra le metà dell'oggetto. L'ultimo passaggio accorcia in qualche modo l'anello, ma nel mondo reale questo non rappresenta un problema, perché l'arco non sarà mai circolare e quindi i raccordi influiscono sulla curvatura dell'arco ma non sulla sua funzionalità.

[[Image:Sketcher_ExampleHinge-03.png|400px]]
{{Caption|Schizzo della cerniera che mostra il contorno della cerniera in base alla geometria esterna del semiarco dello schizzo intermedio}}


[[Image:Sketcher_ExampleHinge-04.png|300px]] 
[[Image:Sketcher_ExampleHinge-05.png|300px]]
{{Caption|A sinistra: [[Image:PartDesign_Pad.svg|16px]] [[PartDesign_Pad/it|mezza cerniera imbottita]] con schizzo visibile. A destra: mezza cerniera con aggiunta di un [[Image:PartDesign_Fillet.svg|16px]] [[PartDesign_Filletit|raccordo]]}}


[[Image:Sketcher_ExampleHinge-06.png|300px]] [[Image:Button_right.svg|16px|link=]] 
[[Image:Sketcher_ExampleHinge-07.png|300px]]
{{Caption|Mezza cerniera con piano di riflessione selezionato → [[Image:PartDesign_Mirrored.svg|16px]] [[PartDesign_Mirrored/it|cerniera a pellicola speculare]]}}


Suggerimento: [[Image:Part_Mirror.svg|16px]] [[Part_Mirror/it|Specchia di Part]] accetta solo i tre piani di base e quindi non può essere utilizzato in questo caso.
: (Col senno di poi, è stata una saggia decisione iniziare questo esempio con la combinazione di PartDesign e Sketcher.)


Infine, due parametri definiscono la dimensione della cerniera della pellicola:
* il raggio neutro dello schizzo di base
* il valore dello spessore dello schizzo della cerniera della pellicola

<span id="Bending_the_film_hinge"></span>
===Piegatura della cerniera della pellicola===

L'angolo di piega è controllato dal vincolo ArcAngle dello schizzo intermedio e può essere modificato nella sua Vista Proprietà.<br>Ma noi siamo dei veri progettisti e abbiamo dato un nome correttamente ai vincoli e alle dimensioni dei nostri schizzi, quindi possiamo gestire l'angolo di controllo tramite Python.<br>Alcune righe di codice di base da incorporare in un contesto GUI potrebbero apparire così:

{{Code|code=
doc=App.ActiveDocument
sketch=doc.getObjectsByLabel('IntermediateSketch')[0]
 ...
sketch.getDatum('ArcAngle')
 ...
sketch.setDatum('ArcAngle',App.Units.Quantity('50.000000 deg'))
doc.recompute(None,True,True)
}}  

<div class="mw-collapsible-content toccolours">

<div lang="en" dir="ltr" class="mw-content-ltr">
A short explanation:
* {{Incode|doc {{=}} App.ActiveDocument}}: To address the active document by an alias called '''doc'''
*{{Incode|sketch {{=}} doc.getObjectsByLabel('IntermediateSketch')[0]}}: To address the relevant sketch by the alias '''sketch'''.
*: The method '''getObjectsByLabel()''' returns a list of objects and we have to suffix index {{value|0}} to pick the first object in the list. (We do not expect any other object having the same label and so do not have to care about other items in the list.)
* {{Incode|sketch.getDatum('ArcAngle')}}: Returns the current value of the dimensional constraint '''ArcAngle''' (to the Report view)
* {{Incode|sketch.setDatum('ArcAngle', App.Units.Quantity('50.0 deg'))}}: Sets the value of '''ArcAngle''' to {{value|50°}} 
* {{Incode|doc.recompute(None,True,True)}}: To update the whole document to show the changes of dependant geometry as well.
</div>

</div> <!-- End of collapsible element for content section. Do not remove! -->

<span id="Connecting_geometry"></span>
===Connettere la Geometria===

<div lang="en" dir="ltr" class="mw-content-ltr">
Two halves of a clip stuff are waiting to get attached to the hinge, one on the static side and one on the movable side.
</div>

[[Image:Sketcher_ExampleHinge-08.png|300px]]
<div lang="en" dir="ltr" class="mw-content-ltr">
{{Caption|Two halves of a simple clip}}
</div>

<div lang="en" dir="ltr" class="mw-content-ltr">
<div class="mw-collapsible-content toccolours">
</div>

<div lang="en" dir="ltr" class="mw-content-ltr">
The static side is easy: 
# Activate the body and adjust the position and orientation properties in the properties editor until it matches with the film hinge.
# Activate the hinge body.
# Select the [[Image:PartDesign_Boolean.svg|16px]] [[PartDesign_Boolean|PartDesign Boolean]] tool with the (default) Fuse option.
# In the dialog press the {{Button|Add body}} button.
# select the '''body''' of the static half of the clip.
# Press OK to finish and close the dialog.
</div>

<div lang="en" dir="ltr" class="mw-content-ltr">
</div> <!-- End of collapsible element for content section. Do not remove! -->
</div>

[[Image:Sketcher_ExampleHinge-09.png|300px]] [[Image:Button_right.svg|16px|link=]] 
[[Image:Sketcher_ExampleHinge-10.png|300px]]
<div lang="en" dir="ltr" class="mw-content-ltr">
{{Caption|Film hinge and static half in modelling position → film hinge with relocated and [[Image:PartDesign_Boolean.svg|16px]] [[PartDesign_Boolean|fused]] static half}}
</div>

<div lang="en" dir="ltr" class="mw-content-ltr">
<div class="mw-collapsible-content toccolours">
</div>

<div lang="en" dir="ltr" class="mw-content-ltr">
But the moving side is different: The related half of the clip geometry has to move into the right position before a (re-) calculation of a Fuse operation gets started.
</div>

<div lang="en" dir="ltr" class="mw-content-ltr">
At this point I'm missing an "Attachment with offset" function like that of Assembly3 to attach the clip geometry to one of the moving faces. But after a bit of experimenting and tweaking I found out:
</div>

<div lang="en" dir="ltr" class="mw-content-ltr">
* [[Image:Std_Part.svg|16px]] [[Std_Part|Std Part]] and [[Image:PartDesign_Body.svg|16px]] [[PartDesign_Body|PartDesign Body]] containers are not supported by [[Image:Part_EditAttachment.svg|16px]] [[Part_EditAttachment#Limitations|Part Attachment]]. 
:While it is possible to use Attachment to align them, the attachment won't be parametrically linked.
* Attachment can be applied to a PartDesign feature. This and features depending on it are repositioned according to the base geometry. But!:
** Independent PartDesign features won't move and so it will change the resulting shape and break it in the end.
** We are advised to keep features independent to avoid impacts due to the [[Topological_naming_problem|Topological naming problem]].
* [[File:PartDesign_Clone.svg|16px]] [[PartDesign_Clone|PartDesign Clone]] creates a body with a single feature that can be use with Attachment.
</div>


<div lang="en" dir="ltr" class="mw-content-ltr">
With that in mind, a workflow could look like this:
</div>

<div lang="en" dir="ltr" class="mw-content-ltr">
# Select the body of the movable half.
# Use the [[File:PartDesign_Clone.svg|16px]] [[PartDesign_Clone|Clone]] command.
# In the new body select the Clone object in the Tree View.
# Use the [[Image:Part_EditAttachment.svg|16px]] [[Part_EditAttachment|Part Attachment]] tool to add attachment properties to the Clone object.
# The Attachment dialog opens.
#* Select a vertex for the origin.
#* Select an edge for the first direction.
#* Select an edge for the second direction.
#* Probe the attachment modes to find the best fitting one.
#* Tweak rotation and coordinate values until until the geometry is in modelling position again.
# Press OK to close the dialog.
# With the hinge body still active select the [[Image:PartDesign_Boolean.svg|16px]] [[PartDesign_Boolean|PartDesign Boolean]] tool.
# In the dialog press the {{Button|Add body}} button.
# select the body of the movable half .
# Press OK to finish and close the dialog.
</div>

<div lang="en" dir="ltr" class="mw-content-ltr">
</div> <!-- End of collapsible element for content section. Do not remove! -->
</div> <!-- End of collapsible element for ... section. Do not remove! -->
</div>

[[Image:Sketcher_ExampleHinge-14.png|300px]]
<div lang="en" dir="ltr" class="mw-content-ltr">
{{Caption|The movable half will be [[Image:Part_EditAttachment.svg|16px]] [[Part_EditAttachment|attached]] to a corner of the movable hinge side (Map Mode OXZ: vertex, edge, edge)}}
</div>

<div lang="en" dir="ltr" class="mw-content-ltr">
In retrospect it would have been wiser to provide the attachment geometry with the IntermediateSketch to avoid another source of the [[Topological_naming_problem|Topological naming problem]].
</div>

[[Image:Sketcher_ExampleHinge-11.png|300px]] [[Image:Button_right.svg|16px|link=]] 
[[Image:Sketcher_ExampleHinge-12.png|300px]]
<div lang="en" dir="ltr" class="mw-content-ltr">
{{Caption|The clip so far and the movable half in modelling position → finished clip with [[Image:Part_EditAttachment.svg|16px]] [[Part_EditAttachment|attached]] and [[Image:PartDesign_Boolean.svg|16px]] [[PartDesign_Boolean|fused]] movable half}}
</div>

<div lang="en" dir="ltr" class="mw-content-ltr">
Now the result should be a single solid clip, that can be closed and opened by changing the ArcAngle of the film hinge. Allowed angles: 0.1° to 180°, the film section must not get straight, and more than closed doesn't make sense. (At 180° the object may get fused at tangent or overlapping areas, but a little extra gap could help if that is not acceptable.)
</div>

[[Image:Sketcher_ExampleHinge-13.png|200px]] [[Image:Button_right.svg|16px|link=]] 
[[Image:Sketcher_ExampleHinge-15.png|200px]] [[Image:Button_right.svg|16px|link=]] 
[[Image:Sketcher_ExampleHinge-16.png|200px]]
<div lang="en" dir="ltr" class="mw-content-ltr">
{{Caption|Clip almost closed → Clip half closed → Clip in mould condition}}
</div>

{{PartDesign Tools navi{{#translation:}}}}
{{Sketcher_Tools_navi{{#translation:}}}}
{{Userdocnavi{{#translation:}}}}