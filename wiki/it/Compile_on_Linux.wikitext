<languages/>

{{docnav/it|[[Compile_on_Windows/it|Compilazione in Windows]]|[[Compile_on_MacOS/it|Compilazione in MacOS]]}}

{{VeryImportantMessage|Esiste un contenitore Docker FreeCAD sperimentale, che viene testato per lo sviluppo di FreeCAD. Leggi di più su [[Compile_on_Docker/it|Compilazione con Docker]]}}

{{TOCright}}

<span id="Overview"></span>
==Panoramica==

<div class="mw-translate-fuzzy">
Nelle distribuzioni Linux recenti FreeCAD si compila facilmente, dato che di solito tutte le dipendenze sono fornite dal gestore di pacchetti. Fondamentalmente si tratta di eseguire tre passaggi:
# Ottenere il codice sorgente di FreeCAD
# Ottenere le dipendenze (i pacchetti da cui dipende FreeCAD)
# Configurare con {{incode|cmake}} e compilare con {{incode|make}}
</div>

<div class="mw-translate-fuzzy">
Qui, di seguito, troverete le spiegazioni dettagliate di tutto il processo, delle particolarità che si possono incontrare e alcuni [[#Script di compilazione automatica|script di compilazione automatica]]. Se trovate qualcosa di sbagliato o di non aggiornato nel testo successivo (le distribuzioni Linux cambiano spesso), o se utilizzate una distribuzione che non è elencata, discutete il problema nel [https://forum.freecadweb.org/index.php forum], e aiutateci a correggerlo.
</div>

[[File:FreeCAD_source_compilation_workflow.svg|800px]]

{{Caption|Flusso di lavoro generale per compilare FreeCAD da sorgente. Le dipendenze di terzi devono essere nel sistema, così come il codice sorgente di FreeCAD. CMake configura il sistema in modo che con una singola istruzione make venga compilato l'intero progetto.}}

<span id="Getting_the_source"></span>
== Ottenere il codice sorgente ==

=== Git ===

Il modo migliore per ottenere il codice è clonare il  [https://github.com/FreeCAD/FreeCAD repository Git]. Per questo è necessario il programma {{incode|git}} che può essere facilmente installato nella maggior parte delle distribuzioni Linux e può anche essere ottenuto dal [http://git-scm.com/ sito web ufficiale].

Git può essere installato tramite il seguente comando:

{{Code|lang=bash|code=
sudo apt install git
}}

Il seguente comando crea una copia locale della versione più recente del codice sorgente di FreeCAD in una nuova directory chiamata {{incode|freecad-source}}.

{{Code|lang=bash|code=
git clone --recurse-submodules https://github.com/FreeCAD/FreeCAD.git freecad-source
}}

Per ulteriori informazioni sull'uso di Git e sul contributo del codice al progetto, vedere [[Source_code_management/it|Gestione del codice sorgente]].

<span id="Getting_the_dependencies"></span>
== Ottenere le dipendenze ==

Per compilare FreeCAD si devono installare le dipendenze necessarie menzionate in [[Third Party Libraries/it|Librerie di terze parti]]; i pacchetti che contengono queste dipendenze sono elencati di seguito per diverse distribuzioni Linux. Si noti che i nomi e la disponibilità delle librerie dipendono dalla propria particolare distribuzione; se la distribuzione è vecchia, alcuni pacchetti potrebbero non essere disponibili o avere un nome diverso. In questo caso, consultare la sezione [[#Distribuzioni precedenti e non convenzionali|distribuzioni precedenti e non convenzionali]] sottostante.

Dopo aver installato tutte le dipendenze, procedere con la [[#Compilare FreeCAD|compilazione di FreeCAD]].

Notare che il codice sorgente di FreeCAD ha una dimensione di circa 500 MB; potrebbe essere tre volte più grande se clonate il repository Git con la sua intera cronologia delle modifiche. Ottenere tutte le dipendenze potrebbe richiedere il download di almeno 500 MB di nuovi file; quando questi file vengono decompressi potrebbero richiedere almeno 1500 MB di spazio. Attenzione anche che il processo di compilazione può generare fino a 1500 MB di file aggiuntivi mentre il sistema copia e modifica l'intero codice sorgente. Pertanto, assicurarsi di disporre di spazio libero sufficiente sul disco rigido, almeno 4 GB, durante il tentativo di compilazione.

<div class="mw-collapsible mw-collapsed toccolours">

<span id="Debian_and_Ubuntu"></span>
=== Debian e Ubuntu ===

<div class="mw-collapsible-content">

Sui sistemi basati su Debian (Debian, Ubuntu, Mint, ecc.) è abbastanza facile installare tutte le dipendenze necessarie. La maggior parte delle librerie sono disponibili tramite {{incode|apt}} o il gestore di pacchetti Synaptic.

Se si ha già installato FreeCAD dai repository ufficiali, si possono installare le sue dipendenze di compilazione con questa singola riga di codice in un terminale:

{{Code|code=
sudo apt build-dep freecad
}}

In alternativa, sostituire {{incode|freecad}} con {{incode|freecad-daily}} per installare le dipendenze di build per il ramo di sviluppo principale. Sarà necessario aggiungere i [[Installing_on_Linux/it#Development_PPA_(Daily)|freecad-stable/freecad-daily PPA]] alle origini del software.

Tuttavia, se la versione di FreeCAD nei repository è vecchia, le dipendenze potrebbero essere quelle sbagliate per compilare una versione recente di FreeCAD. Pertanto, verificare di aver installato i seguenti pacchetti.

Questi pacchetti sono essenziali per il successo di qualsiasi tipo di compilazione:
*{{incode|build-essential}}, installa i compilatori C e C++, le librerie di sviluppo C e il programma {{incode|make}}.
*{{incode|cmake}}, strumento essenziale per configurare il sorgente di FreeCAD. Si potrebbe anche voler installare {{incode|cmake-gui}} e {{incode|cmake-curses-gui}} per un'opzione grafica.
*{{incode|libtool}}, strumenti essenziali per produrre librerie condivise.
*{{incode|lsb-release}}, l'utilità standard di reporting di base è normalmente già installata in un sistema Debian e consente di distinguere programmaticamente tra un'installazione Debian pura o una variante, come Ubuntu o Linux Mint. Non rimuovere questo pacchetto, poiché molti altri pacchetti di sistema potrebbero dipendere da esso.

La compilazione di FreeCAD utilizza il linguaggio Python ed è utilizzato anche in fase di esecuzione come linguaggio di scripting. Se si sta usando una distribuzione basata su Debian, l'interprete Python è normalmente già installato.
*{{incode|python3}}
*{{incode|swig}}, lo strumento che crea interfacce tra codice C++ e Python.

Le librerie Boost devono essere installate:

*{{incode|libboost-dev}}
*{{incode|libboost-date-time-dev}}
*{{incode|libboost-filesystem-dev}}
*{{incode|libboost-graph-dev}}
*{{incode|libboost-iostreams-dev}}
*{{incode|libboost-program-options-dev}}
*{{incode|libboost-python-dev}}
*{{incode|libboost-regex-dev}}
*{{incode|libboost-serialization-dev}}
*{{incode|libboost-thread-dev}}

Le librerie di Coin devono essere installate:
*{{incode|libcoin-dev}}, per Debian Buster, Ubuntu 19.04 e successivi, così come per Ubuntu 18.04/18.10 con il [[Installing_on_Linux/it#Development_PPA_(Daily)|freecad-stable/freecad-daily PPA]] aggiunto alle sorgenti software.

Diverse librerie, che si occupano di matematica, superfici triangolate, ordinamento, mesh, visione artificiale, proiezioni cartografiche, visualizzazione 3D, Librerie Point Cloud, il sistema X11 Window, parsing XML e lettura di file Zip:

*{{incode|libeigen3-dev}}
*{{incode|libgts-bin}}
*{{incode|libgts-dev}}
*{{incode|libkdtree++-dev}}
*{{incode|libmedc-dev}}
*{{incode|libopencv-dev}} or {{incode|libcv-dev}}
*{{incode|libproj-dev}}
*{{incode|libvtk9-dev}}, {{incode|libvtk8-dev}}, {{incode|libvtk7-dev}} or {{incode|libvtk6-dev}}
*{{incode|libx11-dev}}
*{{incode|libxerces-c-dev}}
*{{incode|libyaml-cpp-dev}}
*{{incode|libzipios++-dev}}
*{{incode|libpcl-dev}}


<span id="Python_3_and_Qt6"></span>
=== Python 3 e Qt6 ===

Per compilare FreeCAD per Debian Trixie installare le seguenti dipendenze.

*{{incode|pybind11-dev}}
*{{incode|qt6-base-dev}}
*{{incode|qt6-svg-dev}}
*{{incode|qt6-tools-dev}}
*{{incode|qt6-webengine-dev}}
*{{incode|libpyside6-dev}}
*{{incode|libshiboken6-dev}}
*{{incode|pyside6-tools}}
*{{incode|pyqt6-dev-tools}}
*{{incode|python3-dev}}
*{{incode|python3-matplotlib}}
*{{incode|python3-packaging}}
*{{incode|python3-pivy}}
*{{incode|python3-ply}}
*{{incode|python3-pyside6.qtcore}}
*{{incode|python3-pyside6.qtgui}}
*{{incode|python3-pyside6.qtnetwork}}
*{{incode|python3-pyside6.qtsvg}}
*{{incode|python3-pyside6.qtwebchannel}}
*{{incode|python3-pyside6.qtwebenginecore}}
*{{incode|python3-pyside6.qtwebenginequick}}
*{{incode|python3-pyside6.qtwebenginewidgets}}
*{{incode|python3-pyside6.qtwidgets}}

<span id="Python_3_and_Qt5"></span>
=== Python 3 e Qt5 ===

Per compilare FreeCAD per Debian Buster, Ubuntu 19.04 e versioni successive, nonché Ubuntu 18.04/18.10 con il [[Installing_on_Linux/it#Development_PPA_(Daily)|freecad-stable/freecad-daily PPA]] aggiunto alle sorgenti software, installare le seguenti dipendenze.

*{{incode|qtbase5-dev}}
*{{incode|qttools5-dev}}
*{{incode|qt5-default}} (if compiling 0.20 on a machine that still has Qt4)
*{{incode|libqt5opengl5-dev}}
*{{incode|libqt5svg5-dev}}
*{{incode|qtwebengine5-dev}}
*{{incode|libqt5xmlpatterns5-dev}}
*{{incode|libqt5x11extras5-dev}}
*{{incode|libpyside2-dev}}
*{{incode|libshiboken2-dev}}
*{{incode|pyside2-tools}}
*{{incode|pyqt5-dev-tools}}
*{{incode|python3-dev}}
*{{incode|python3-matplotlib}}
*{{incode|python3-packaging}}
*{{incode|python3-pivy}}
*{{incode|python3-ply}}
*{{incode|python3-pyside2.qtcore}}
*{{incode|python3-pyside2.qtgui}}
*{{incode|python3-pyside2.qtsvg}}
*{{incode|python3-pyside2.qtwidgets}}
*{{incode|python3-pyside2.qtnetwork}}
*{{incode|python3-pyside2.qtwebengine}}
*{{incode|python3-pyside2.qtwebenginecore}}
*{{incode|python3-pyside2.qtwebenginewidgets}}
*{{incode|python3-pyside2.qtwebchannel}}
*{{incode|python3-pyside2uic}} (not required on Ubuntu 20.04 and later)

<span id="OpenCascade_kernel"></span>
==== Kernel OpenCascade ====

Il kernel OpenCascade è la libreria grafica di base per creare forme 3D. Esiste in una versione ufficiale OCCT e in una versione comunitaria OCE. La versione community non è più consigliata perché obsoleta.

Per Debian Buster e Ubuntu 18.10 e successivi, così come Ubuntu 18.04 con [[Installing_on_Linux/it#Development_PPA_(Daily)|freecad-stable/freecad-daily PPA]] aggiunto alle sorgenti software, installare i pacchetti ufficiali.

*{{incode|libocct*-dev}}
**{{incode|libocct-data-exchange-dev}}
**{{incode|libocct-draw-dev}}
**{{incode|libocct-foundation-dev}}
**{{incode|libocct-modeling-algorithms-dev}}
**{{incode|libocct-modeling-data-dev}}
**{{incode|libocct-ocaf-dev}}
**{{incode|libocct-visualization-dev}}
*{{incode|occt-draw}}

Per Debian Jessie, Stretch, Ubuntu 16.04 e versioni successive, installare i pacchetti della community edition.

*{{incode|liboce*-dev}}
**{{incode|liboce-foundation-dev}}
**{{incode|liboce-modeling-dev}}
**{{incode|liboce-ocaf-dev}}
**{{incode|liboce-ocaf-lite-dev}}
**{{incode|liboce-visualization-dev}}
*{{incode|oce-draw}}

È possibile installare le librerie singolarmente o utilizzando l'espansione dell'asterisco. Cambiare {{incode|occ}} con {{incode|oce}} se si vogliono installare le librerie della comunità.

{{Code|code=
sudo apt install libocct*-dev
}}

<span id="Optional_packages"></span>
==== Pacchetti opzionali ====

Opzionalmente si possono anche installare i seguenti pacchetti extra:
* {{incode|libsimage-dev}}, per fare in modo che Coin supporti formati di file immagine aggiuntivi.
* {{incode|doxygen}} e {{incode|libcoin-doc}} (o {{incode|libcoin80-doc}} per i sistemi precedenti), se si vuole generare la documentazione del codice sorgente.
* {{incode|libspnav-dev}}, per il supporto di [[3D_input_devices/it|dispositivi di input 3D]], come "Space Navigator" o "Space Pilot" di 3Dconnexion.
* {{incode|checkinstall}}, se si intende registrare i file installati nel gestore pacchetti del tuo sistema, in modo da poterlo disinstallare in seguito.

<span id="Single_command_for_Python_3_and_Qt5"></span>
==== Comando Singolo per Python 3 e Qt5 ====

Richiede Pyside2 disponibile in Debian buster e nel [[Installing_on_Linux/it#Versione_ufficiale|freecad-stable/freecad-daily PPA|freecad-stable/freecad-daily PPA]].

{{Code|lang=bash|code=
sudo apt install cmake cmake-gui libboost-date-time-dev libboost-dev libboost-filesystem-dev libboost-graph-dev libboost-iostreams-dev libboost-program-options-dev libboost-python-dev libboost-regex-dev libboost-serialization-dev libboost-thread-dev libcoin-dev libeigen3-dev libgts-bin libgts-dev libkdtree++-dev libmedc-dev libocct-data-exchange-dev libocct-ocaf-dev libocct-visualization-dev libopencv-dev libproj-dev libpyside2-dev libqt5opengl5-dev libqt5svg5-dev qtwebengine5-dev libqt5x11extras5-dev libqt5xmlpatterns5-dev libshiboken2-dev libspnav-dev libvtk7-dev libx11-dev libxerces-c-dev libzipios++-dev occt-draw pyside2-tools python3-dev python3-matplotlib python3-packaging python3-pivy python3-ply python3-pyside2.qtcore python3-pyside2.qtgui python3-pyside2.qtsvg python3-pyside2.qtwidgets python3-pyside2.qtnetwork python3-pyside2.qtwebengine python3-pyside2.qtwebenginecore python3-pyside2.qtwebenginewidgets python3-pyside2.qtwebchannel python3-markdown python3-git python3-pyside2uic qtbase5-dev qttools5-dev swig libyaml-cpp-dev
}}

<div class="mw-translate-fuzzy">
NOTA: su alcune versioni di Ubuntu e alcune versioni di Qt, si riceverà un errore che python3-pyside2uic non può essere trovato - su quei sistemi puoi tranquillamente ometterlo. Su Ubuntu 20.04 si dovrà aggiungere {{incode|pyqt5-dev-tools}}. Maggiori informazioni possono essere trovate in [https://forum.freecadweb.org/viewtopic.php?t=51324 questa discussione del forum].
</div>

<div class="mw-collapsible mw-collapsed" style="background-color:#e0e0e0">

<div class="mw-collapsible-content">

{{Code|lang=bash|code=
sudo apt install cmake debhelper dh-exec dh-python libboost-date-time-dev libboost-dev libboost-filesystem-dev libboost-graph-dev libboost-iostreams-dev libboost-program-options-dev libboost-python-dev libboost-regex-dev libboost-serialization-dev libboost-thread-dev libcoin80-dev libeigen3-dev libgts-bin libgts-dev libkdtree++-dev libmedc-dev libocct-data-exchange-dev libocct-ocaf-dev libocct-visualization-dev libopencv-dev libproj-dev libpyside-dev libqt4-dev libqt4-opengl-dev libqtwebkit-dev libshiboken-dev libspnav-dev libvtk6-dev libx11-dev libxerces-c-dev libzipios++-dev lsb-release occt-draw pyside-tools python-dev python-matplotlib python-pivy python-ply swig
}}


<div class="mw-translate-fuzzy">
Gli utenti di Ubuntu 16.04 possono consultare anche la discussione sulla compilazione nel forum: [http://forum.freecadweb.org/viewtopic.php?f=4&t=16292 Compilazione su Linux (Kubuntu): CMake non riesce a trovare VTK].
</div>

</div>
</div>
</div>
</div>

<div class="mw-collapsible mw-collapsed toccolours">

=== Raspberry Pi ===

<div class="mw-collapsible-content">
Seguire gli stessi passaggi di Debian e Ubuntu.

Sono stati segnalati problemi durante il tentativo di compilazione in Raspberry PI OS a 32 bit con Python 3 e Qt5, ma la combinazione Python 3 e Qt4 sembra funzionare per le versioni precedenti di FreeCAD (con problemi minori).

Per le versioni più recenti di FreeCAD (>= 0.20) la compilazione con Py3/Qt5 va a buon fine se il sistema operativo installato è Raspberry Pi OS 64-bit o Ubuntu 20.04.

A causa di diversi problemi con Qt, in Ubuntu 20.04 non verranno trovati i normali strumenti PySide.
{{Code|lang=bash|code=
E: Unable to locate package python3-pyside2uic
}}

In questo caso, si possono installare i pacchetti da PyQt e creare collegamenti simbolici agli strumenti necessari.
{{Code|lang=bash|code=
sudo apt-get install pyqt5-dev
sudo apt-get install pyqt5-dev-tools
cd /usr/bin/
ln -s pyrcc5 pyside2-rcc
ln -s pyuic5 pyside2-uic
}}

Ora la compilazione può procedere.
{{Code|lang=bash|code=
cd build/
cmake ../ -DBUILD_QT5=ON -DPYTHON_EXECUTABLE=/usr/bin/python3 -DUSE_PYBIND11=ON
make -j2
}}

L'opzione {{incode|-j}} di {{incode|make}} non dovrebbe essere maggiore di 3 perché il Raspberry Pi ha una memoria limitata. Ci vorranno diverse ore per compilare, quindi è meglio farlo durante la notte.

<div class="mw-translate-fuzzy">
Per ulteriori informazioni, [https://forum.freecadweb.org/viewtopic.php?f=42&t=37458&start=160#p396652 FreeCAD e Raspberry Pi 4].
</div>
</div>
</div>

<div class="mw-collapsible mw-collapsed toccolours">

=== Fedora ===

<div class="mw-collapsible-content">
C'è un bug nei file cmake opencascade che fa sì che cmake non riesca a trovare le librerie opencascade in Fedora. Questo può essere facilmente risolto apportando una piccola modifica al file cmake di livello superiore di opencascade installato su Fedora. Dettagli qui:
https://bugzilla.redhat.com/show_bug.cgi?id=2083568.

Nella parte superiore del file {{FileName|OpenCASCADEConfig.cmake}}, modificare la seguente riga per utilizzare {{Incode|REAL_PATH()}}. Questa operazione corregge un bug innescato dall'uso di un collegamento simbolico da {{Incode|/lib}} a {{Incode|/usr/lib}} di Fedora, che lo script cmake non riesce a gestire correttamente. Ciò è dovuto alle ipotesi restrittive su dove si trovano solitamente i file include su Linux e al mancato test per un risultato valido. 

Questo file è solitamente installato in {{FileName|/usr/lib64/cmake/opencascade/OpenCASCADEConfig.cmake}}.

{{Code|lang=bash|code=
get_filename_component (OpenCASCADE_INSTALL_PREFIX "${OpenCASCADE_INSTALL_PREFIX}" PATH)
}}

cambiare in:

{{Code|lang=bash|code=
file (REAL_PATH ${OpenCASCADE_INSTALL_PREFIX} OpenCASCADE_INSTALL_PREFIX)
}}

Questa banale modifica deve essere apportata all'interno della directory di build una volta che cmake è stato eseguito e ha avuto esito negativo. La riesecuzione di cmake rileverà quindi correttamente le librerie OCCT nel modo normale. 

==== Fedora40 ====

<div class="mw-translate-fuzzy">
Fedora consente l'installazione simultanea delle librerie Qt5 e Qt6. L'aggiunta delle librerie Qt6 rilevanti per FreeCAD può essere eseguita tramite dnf:
</div>

{{Code|lang=bash|code=
dnf install python3-shiboken6 python3-shiboken6-devel python3-pyside6 python3-pyside6-devel\
 pyside6-tools qt6-qtsvg qt6-qtsvg-devel qt6-qttools-devel python3-pyqt6-devel
}}

'''ATTENZIONE:''' Una nuova funzionalità, PCL, è stata introdotta a marzo 2025. Richiede due pacchetti aggiuntivi: pcl e pcl-devel. Tuttavia, non riesce a compilare su Fedora quando si usano le librerie Qt6. Aggiungere quanto segue alla riga di comando cmake per disabilitare questo codice.

{{Code|lang=bash|code=
-DFREECAD_USE_PCL=Off 
}}

Ora è incluso di default un po' di codice remoto di Google per il test automatico delle coding practice. Se non si vuole includere questo codice esterno, che è soggetto a modifiche senza preavviso, usare l'opzione cmake:

{{Code|lang=bash|code=
-DENABLE_DEVELOPER_TESTS=Off
}}

Il seguente comando cmake dovrebbe essere adatto per Fedora 40 con Qt6:

{{Code|lang=bash|code=
cmake -DCMAKE_BUILD_TYPE=Release -DFREECAD_QT_VERSION=6 -Wno-dev -DENABLE_DEVELOPER_TESTS=Off -DFREECAD_USE_PCL=Off  ../FreeCAD
}}

Modificare la directory finale in modo che punti alla directory del codice sorgente di FreeCAD.

==== Fedora38/39 ====

Ora installa Python 3.11. Ciò include un notevole cambiamento nel modo in cui Python si inizializza durante l'esecuzione di un programma. Di conseguenza FreeCAD non riesce a trovare OpenCamLib, il che significa che [[CAM_Surface/it|3D Surface]] e [[CAM_Waterline/it|Waterline]] non sono disponibili nell'ambiente [[CAM_Workbench/it|CAM]]. Questo problema è stato risolto nel ramo master il 20 marzo 2024 ([https://github.com/FreeCAD/FreeCAD/pull/13059 Pull request #13059]).

Sono necessari i seguenti pacchetti:

*{{Incode|gcc-c++}} (or possibly another C++ compiler?)
*{{Incode|cmake}}
*{{Incode|doxygen}}
*{{Incode|swig}}
*{{Incode|gettext}}
*{{Incode|dos2unix}}
*{{Incode|desktop-file-utils}}
*{{Incode|libXmu-devel}}
*{{Incode|freeimage-devel}}
*{{Incode|mesa-libGLU-devel}}
*{{Incode|opencascade-devel}}
*{{Incode|openmpi-devel}}
*{{Incode|python3}}
*{{Incode|python3-devel}}
*{{Incode|python3-pyside2}}
*{{Incode|python3-pyside2-devel}}
*{{Incode|pyside2-tools}}
*{{Incode|boost-devel}}
*{{Incode|tbb-devel}}
*{{Incode|eigen3-devel}}
*{{Incode|qt-devel}}
*{{Incode|qt5-qtwebengine-devel}}
*{{Incode|qt5-qtxmlpatterns}}
*{{Incode|qt5-qtxmlpatterns-devel}}
*{{Incode|qt5-qtsvg-devel}}
*{{Incode|qt5-qttools-static}}
*{{Incode|ode-devel}}
*{{Incode|xerces-c}}
*{{Incode|xerces-c-devel}}
*{{Incode|opencv-devel}}
*{{Incode|smesh-devel}}
*{{Incode|Coin3}}
*{{Incode|Coin3-devel}}
*{{Incode|yaml-cpp}}

(Aprile 2021, sono disponibili Coin4 e Coin4-devel)
(se coin2 è l'ultimo disponibile per la tua versione di Fedora, usare i packages di http://www.zultron.com/rpm-repo/)

*{{Incode|SoQt-devel}}
*{{Incode|freetype}}
*{{Incode|freetype-devel}}
*{{Incode|vtk}}
*{{Incode|vtk-devel}}
*{{Incode|med}}
*{{Incode|med-devel}}

E facoltativamente: 

*{{Incode|libspnav-devel}} (per il supporto di dispositivi 3Dconnexion come Space Navigator o Space Pilot)
*{{Incode|python3-pivy}} ( https://bugzilla.redhat.com/show_bug.cgi?id=458975 Pivy non è obbligatorio ma necessario per l'ambiente Draft)
*python3-markdown (affinché Addon Manager visualizzi il markdown nativo)
*{{Incode|python3-GitPython}} (affinché Addon Manager utilizzi git per il checkout e l'aggiornamento di workbench e macro)

Per installare tutte le dipendenze contemporaneamente (testato su fedora 36 e 37):

{{Code|lang=bash|code=
sudo dnf install gcc-c++ cmake doxygen swig gettext dos2unix desktop-file-utils libXmu-devel freeimage-devel mesa-libGLU-devel opencascade-devel openmpi-devel python3 python3-devel python3-pyside2 python3-pyside2-devel pyside2-tools boost-devel tbb-devel eigen3-devel qt-devel qt5-qtwebengine-devel qt5-qtxmlpatterns qt5-qtxmlpatterns-devel qt5-qtsvg-devel qt5-qttools-static ode-devel xerces-c xerces-c-devel opencv-devel smesh-devel Coin3 Coin3-devel SoQt-devel freetype freetype-devel vtk vtk-devel med med-devel libspnav-devel python3-pivy python3-markdown python3-GitPython yaml-cpp
}}

</div>
</div>
<div class="mw-collapsible mw-collapsed toccolours">

=== Gentoo ===

<div class="mw-collapsible-content">

Il modo più semplice per verificare quali pacchetti sono necessari per compilare FreeCAD è verificare tramite portage:

<tt>emerge -pv freecad</tt>

Questo dovrebbe fornire un bel elenco di pacchetti extra che devi installare sul tuo sistema.

Se FreeCAD non è disponibile su portage, è disponibile su [https://github.com/waebbl/waebbl-gentoo waebbl overlay]. Il tracker dei problemi sull'overlay waebbl Github può aiutare a navigare attraverso alcuni problemi, che si potrebbero incontrare. L'overlay fornisce <tt>freecad-9999</tt>, che si può scegliere di compilare o semplicemente usare per ottenere le dipendenze.

<tt>layman -a waebbl</tt>

</div>
</div>
<div class="mw-collapsible mw-collapsed toccolours">

=== openSUSE ===

<div class="mw-collapsible-content">

==== Tumbleweed ====

I seguenti comandi installeranno i pacchetti richiesti per la creazione di FreeCAD con Qt5 e Python 3.

{{Code|code=
zypper in --no-recommends -t pattern devel_C_C++ devel_qt5

zypper in libqt5-qtbase-devel libqt5-qtsvg-devel libqt5-qttools-devel boost-devel swig libboost_program_options-devel libboost_mpi_python3-devel libboost_system-devel libboost_program_options-devel libboost_regex-devel libboost_python3-devel libboost_thread-devel libboost_system-devel libboost_headers-devel libboost_graph-devel python3 python3-devel python3-matplotlib python3-matplotlib-qt5 python3-pyside2 python3-pyside2-devel python3-pivy gcc gcc-fortran cmake occt-devel libXi-devel opencv-devel libxerces-c-devel Coin-devel SoQt-devel freetype2-devel eigen3-devel libode6 vtk-devel libmed-devel hdf5-openmpi-devel openmpi2-devel netgen-devel freeglut-devel libspnav-devel f2c doxygen dos2unix glew-devel yaml-cpp
}}

Il seguente comando installerà Qt Creator e GNU Project Debugger.

{{Code|code=zypper in libqt5-creator gdb}}

Se mancano dei pacchetti, si può controllare il file Tumbleweed [https://build.opensuse.org/package/view_file/openSUSE:Factory/FreeCAD/FreeCAD.spec "FreeCAD.spec"] su [https://build.opensuse.org/package/show/openSUSE:Factory/FreeCAD Open Build Service].

Inoltre, controllare se ci sono patch che devono essere applicate (come [https://build.opensuse.org/package/view_file/openSUSE:Factory/FreeCAD/0001-find-openmpi2-include-files.patch 0001 -find-openmpi2-include-files.patch]).

==== Leap ====

Se c'è una differenza tra i pacchetti disponibili su Tumbleweed e Leap, allora si può leggere il Leap [https://build.opensuse.org/package/view_file/openSUSE:Leap:15.0/FreeCAD/FreeCAD.spec "FreeCAD.spec "] su [https://build.opensuse.org/ Open Build Service] per determinare i pacchetti richiesti.

<div class="mw-translate-fuzzy">
Vedere la guida [https://forum.freecadweb.org/viewtopic.php?f=4&t=49726 piano_jonas unofficial "Compile On openSUSE"].
</div>

</div>
</div>
<div class="mw-collapsible mw-collapsed toccolours">

=== Arch Linux ===

<div class="mw-collapsible-content">

Ci sarà bisogno delle seguenti librerie dai repository ufficiali:

*{{incode|boost}}
*{{incode|cmake}}
*{{incode|coin}}
*{{incode|curl}}
*{{incode|desktop-file-utils}}
*{{incode|eigen}}
*{{incode|gcc-fortran}}
*{{incode|git}}
*{{incode|glew}}
*{{incode|hicolor-icon-theme}}
*{{incode|jsoncpp}}
*{{incode|libspnav}}
*{{incode|med}}
*{{incode|nlohmann-json}}
*{{incode|opencascade}}
*{{incode|pyside2-tools}}
*{{incode|pyside2}}
*{{incode|python-matplotlib}}
*{{incode|python-netcdf4}}
*{{incode|python-packaging}}
*{{incode|python-pivy}}
*{{incode|qt5-svg}}
*{{incode|qt5-tools}}
*{{incode|qt5-webengine}}
*{{incode|shared-mime-info}}
*{{incode|shiboken2}}
*{{incode|swig}}
*{{incode|utf8cpp}}
*{{incode|verdict}}
*{{incode|xerces-c}}
*{{incode|yaml-cpp}}

{{Code|code=
sudo pacman -S --needed --asdeps boost cmake coin curl desktop-file-utils eigen gcc-fortran git glew hicolor-icon-theme jsoncpp libspnav med nlohmann-json opencascade python-matplotlib python-netcdf4 python-packaging python-pivy qt5-svg qt5-tools qt5-webengine shared-mime-info swig utf8cpp xerces-c yaml-cpp 
}}

FreeCAD currently uses QT5. This requires packages which have been moved from the official repositories to the AUR. These packages will be compiled by source and may take a long time depending on the available hardware. 

{{Code|code=
yay -S --needed --asdeps pyside2 pyside2-tools shiboken2
}}

<!--T:139-->
</div>
</div>

<div class="mw-collapsible mw-collapsed toccolours">

<span id="Older_and_non-conventional_distributions"></span>
=== Distribuzioni precedenti e non convenzionali ===

<div class="mw-collapsible-content">

Su altre distribuzioni, abbiamo pochissimi feedback dagli utenti, quindi potrebbe essere più difficile trovare i pacchetti richiesti.

Inizialmente provare ad individuare le librerie richieste menzionate in [[Third_Party_Libraries/it|librerie di terze parti]] nel tuo gestore di pacchetti. Attenzione che alcuni di essi potrebbero avere un nome di pacchetto leggermente diverso; cerca {{incode|name}}, ma anche {{incode|libname}}, {{incode|name-dev}}, {{incode|name-devel}} e simili. Se ciò non fosse possibile, provare a compilare tu stesso quelle librerie.

FreeCAD richiede la versione del compilatore GNU g++ uguale o superiore alla 3.0.0, poiché FreeCAD è scritto principalmente in C++. Durante la compilazione vengono eseguiti alcuni script Python, quindi l'interprete Python deve funzionare correttamente. Per evitare qualsiasi problema con il linker è anche una buona idea avere i percorsi della libreria nella variabile {{incode|LD_LIBRARY_PATH}} o nel file {{incode|ld.so.conf}}. Questo è già presente nelle moderne distribuzioni Linux, ma potrebbe essere necessario impostarlo in quelle più vecchie.

</div>
</div>

=== Pivy ===

[[Pivy/it|Pivy]] (Python wrapper per Coin3d) non è necessario per compilare FreeCAD o per avviarlo, ma è necessario come dipendenza di runtime per [[Draft_Workbench/it|l'ambiente Draft]]. Se non si utilizzerà questo ambiente di lavoro, non ci sarà bisogno di Pivy. Tuttavia, si noti che Draft Workbench è utilizzato internamente da altri workbench, come [[BIM_Workbench/it|BIM]], quindi Pivy deve essere installato anche per poter utilizzare questi workbench.

Entro novembre 2015 la versione obsoleta di Pivy inclusa nel codice sorgente di FreeCAD non verrà più compilata su molti sistemi. Questo non dovrebbe essere un grosso problema, poiché normalmente si dovrebbe ottenere Pivy dal gestore dei pacchetti della tua distribuzione; se non si riesce a trovare Pivy, si potrebbe doverlo compilare da solo, vedere [[Extra_python_modules/it#Pivy|Istruzioni per la compilazione di Pivy]].

<span id="Debug_symbols"></span>
=== Simboli di Debug ===

Per risolvere i problemi di crash in FreeCAD, è utile disporre dei simboli di debug di importanti librerie di dipendenze come Qt. A tal fine, si provi ad installare i pacchetti di dipendenza, che terminano con {{incode|-dbg}}, {{incode|-dbgsym}}, {{incode|-debuginfo}} o simili, a seconda della propria distribuzione Linux.

Per Ubuntu, potrebbe essere necessario abilitare repository speciali per poter vedere e installare questi pacchetti di debug con il gestore pacchetti. Vedere [https://wiki.ubuntu.com/Debug_Symbol_Packages Pacchetti di simboli di debug] per ulteriori informazioni.

<span id="Compile_FreeCAD"></span>
== Compilare FreeCAD ==

{{VeryImportantMessage|La compilazione di FreeCAD 0.20 richiede almeno Python 3.6 e Qt 5.9.}}

FreeCAD utilizza CMake come sistema di compilazione principale, poiché è disponibile su tutti i principali sistemi operativi. La compilazione con CMake è solitamente molto semplice e avviene in due passaggi.

# CMake verifica che tutti i programmi e le librerie necessari siano presenti sul tuo sistema e genera un {{incode|Makefile}} configurato per il secondo passaggio. FreeCAD ha diverse opzioni di configurazione tra cui scegliere, ma viene fornito con impostazioni predefinite ragionevoli. Alcune alternative sono dettagliate di seguito.
# La compilazione stessa, che viene eseguita con il programma {{incode|make}} e che genera gli eseguibili di FreeCAD.

Poiché FreeCAD è un'applicazione di grandi dimensioni, la compilazione dell'intero codice sorgente può richiedere da 10 minuti a un'ora, a seconda della CPU e del numero di core della CPU utilizzati per la compilazione.

<span id="Building"></span>
== Compilazione ==

Per compilare è sufficiente creare una directory di build, {{incode|build}}. Quindi da questa directory di build puntare {{incode|cmake}} alla cartella di origine corretta. Puoi usare {{incode|cmake-gui}} o {{incode|ccmake}} invece di {{incode|cmake}} anche nelle istruzioni seguenti. Una volta che {{incode|cmake}} ha finito di configurare l'ambiente, usare {{incode|make}} per avviare la compilazione vera e propria.

{{Code|lang=bash|code=
# from your freecad-source folder:
mkdir build
cd build
cmake ../
make -j$(nproc --ignore=2)
}}

L'opzione {{incode|-j}} di {{incode|make}} controlla quanti lavori (file) vengono compilati in parallelo. Il programma {{incode|nproc}} stampa il numero di core della CPU nel tuo sistema; utilizzandolo insieme all'opzione {{incode|-j}} si può scegliere di processare tanti file quanti sono i core, in modo da velocizzare la compilazione complessiva del programma. Nell'esempio sopra, si utilizzeranno tutti i core del sistema tranne due; questo manterrà il tuo computer reattivo per altri usi mentre la compilazione procede in background. L'eseguibile di FreeCAD apparirà infine nella directory {{incode|build/bin}}. Vedere anche [[Compiling_(Speeding_up)/it|Velocizzare la compilazione]] per migliorare la velocità di compilazione.

<span id="Resolving_cmake_issues"></span>
=== Risoluzione dei problemi di cmake ===

Se si è già eseguita una build e si rimane bloccati su una dipendenza, che non viene riconosciuta o non sembra essere risolta, si provi quanto segue:

* Eliminare il contenuto della directory di build prima di eseguire nuovamente cmake. FreeCAD è un obiettivo in rapido movimento, si potrebbe incappare su informazioni cmake memorizzate nella cache che puntano a una versione precedente rispetto a quella che il nuovo head del repository può utilizzare. Svuotare la cache può consentire a cmake di recuperare e riconoscere la versione effettivamente necessaria.

* Se cmake segnala la mancanza di un file specifico, utilizzare uno strumento come "apt-file search", o il suo equivalente in altri sistemi di pacchetti, per scoprire a quale pacchetto appartiene quel file ed installarlo. Tenere presente, che probabilmente si avrà bisogno della versione -dev del pacchetto,che contiene i file di intestazione o di configurazione necessari a FreeCAD per utilizzare il pacchetto.

<span id="Compiling_against_GNU_libc_2.34_and_later"></span>
=== Compilazione con GNU libc 2.34 e successivi ===

GNU libc 2.34 introduce una modifica alla libreria che può causare il fallimento delle build su alcuni sistemi Linux con un errore come:

{{Code|lang=bash|code=
No rule to make target '/usr/lib/x86_64-linux-gnu/libdl.so
}}

Per risolvere questo problema, è necessario creare manualmente un collegamento simbolico dal libdl.so.* installato nel sistema (ora vuoto) alla posizione indicata dal compilatore, che sta cercando il file. Ad esempio (se la copia effettivamente installata di libdl.so sul tuo sistema è /usr/lib/x86_64-linux-gnu/libdl.so.2):

{{Code|lang=bash|code=
sudo ln -s /usr/lib/x86_64-linux-gnu/libdl.so.2 /usr/lib/x86_64-linux-gnu/libdl.so
}}

Adattare il comando alla struttura del sistema cercando libdl.so* e collegandolo alla posizione appropriata.

<span id="How_to_repair_your_source_code_directory"></span>
=== Come riparare la directory del codice sorgente ===

Se si è accidentalmente eseguita una compilazione all'interno della directory del codice sorgente o si sono aggiunti strani file e si desidera ripristinare i contenuti solo nel codice sorgente originale, si possono eseguire i seguenti passaggi.

{{Code|lang=bash|code=
> .gitignore
git clean -df
git reset --hard HEAD
}}

La prima riga cancella il file {{incode|.gitignore}}. Ciò garantisce che i seguenti comandi di pulizia e ripristino influiranno su tutto nella directory e non ignoreranno gli elementi che corrispondono alle espressioni in {{incode|.gitignore}}. La seconda riga elimina tutti i file e le directory, che non sono tracciati dal repository git; quindi l'ultimo comando ripristinerà qualsiasi modifica ai file tracciati, incluso il primo comando che ha cancellato il file {{incode|.gitignore}}.

Se non si cancella la directory di origine, le successive esecuzioni di {{incode|cmake}} potrebbero non acquisire nuove opzioni per il sistema se il codice cambia.

<span id="Configuration"></span>
===Configurazione===

Passando opzioni diverse a {{incode|cmake}}, si può modificare il modo in cui FreeCAD viene compilato. La sintassi è la seguente.

{{Code|code=
cmake -D <var>:<type>=<value> $SOURCE_DIR
}}

Dove {{incode|$SOURCE_DIR}} è la directory che contiene il codice sorgente. {{incode|<type>}} può essere omesso nella maggior parte dei casi. Lo spazio dopo l'opzione {{incode|-D}} può anche essere omesso.

Ad esempio, per evitare di creare l'[[FEM Workbench/it|Ambiente FEM]]

{{Code|lang=bash|code=
cmake -D BUILD_FEM:BOOL=OFF ../
cmake -DBUILD_FEM=OFF ../
}}

Tutte le possibili variabili sono elencate nel file {{incode|InitializeFreeCADBuildOptions.cmake}}, che si trova nella directory {{incode|cMake/FreeCAD_Helpers}}. In questo file, cercare la parola {{incode|option}} per arrivare alle variabili, che possono essere impostate e vedere i loro valori predefiniti.

<!--Do not remove the <pre> </pre> tags-->
<pre>
# ==============================================================================
# =================   All the options for the build process    =================
# ==============================================================================

option(BUILD_FORCE_DIRECTORY "The build directory must be different to the source directory." OFF)
option(BUILD_GUI "Build FreeCAD Gui. Otherwise you have only the command line and the Python import module." ON)
option(FREECAD_USE_EXTERNAL_ZIPIOS "Use system installed zipios++ instead of the bundled." OFF)
option(FREECAD_USE_EXTERNAL_SMESH "Use system installed smesh instead of the bundled." OFF)
...
</pre>
<!--Do not remove the <pre> </pre> tags-->

Come alternativa, utilizzare il comando {{incode|cmake -LH}} per elencare la configurazione corrente, e quindi tutte le variabili, che possono essere modificate. Si può anche installare ed utilizzare {{incode|cmake-gui}} per avviare un'interfaccia grafica, che mostra tutte le variabili che possono essere modificate. Nelle sezioni successive si elencano alcune delle opzioni più rilevanti, che si potrebbe voler utilizzare.

<span id="For_a_Debug_build"></span>
===== Per una compilazione di Debug ===== 

Creare una build {{incode|Debug}} per risolvere i problemi di crash in FreeCAD. Attenzione che con questa build l'[[Sketcher_Workbench/it|Ambiente Sketcher]] diventa molto lento quando sono presenti schizzi complessi.

{{Code|lang=bash|code=
cmake -DPYTHON_EXECUTABLE=/usr/bin/python3 -DCMAKE_BUILD_TYPE=Debug ../
}}

<span id="For_a_Release_build"></span>
==== Per una build di rilascio ====

Creare una build {{incode|Release}} per testare il codice, che non vada in crash. Una build {{incode|Release}} verrà eseguita molto più velocemente di una build {{incode|Debug}}.

{{Code|lang=bash|code=
cmake -DPYTHON_EXECUTABLE=/usr/bin/python3 -DCMAKE_BUILD_TYPE=Release ../
}}

<span id="Building_against_Python_3_and_Qt5"></span>
==== Compilare per Python 3 e Qt5 ====

<div class="mw-translate-fuzzy">
Il supporto per Python 2 e Qt4 è stato rimosso in FreeCAD 0.20 e non è necessario abilitare esplicitamente Qt5 e Python 3 se si compilano le versioni più recenti. Il supporto Qt6 è attualmente in fase di sviluppo, ma non funziona ancora. A meno che non si preveda di assistere nello sforzo di migrazione Qt6, FREECAD_QT_VERSION dovrebbe essere lasciato su "Auto" (impostazione predefinita) o impostato esplicitamente su "5".
</div>

Per la 0.20 e 0.21_dev:
{{Code|lang=bash|code=
cmake ../
}}

Si noti che quando si passa dalla build 0.20 a quella 0.21_dev, potrebbe essere necessario eliminare CMakeCache.txt prima di eseguire cmake.

<span id="Building_for_a_specific_Python_version"></span>
==== Compilazione per una specifica versione di Python ====

<div class="mw-translate-fuzzy">
Se l'eseguibile {{incode|python}} predefinito nel tuo sistema è un collegamento simbolico a Python 2, {{incode|cmake}} tenterà di configurare FreeCAD per questa versione. Si deve quindi scegliere un'altra versione di Python dando il percorso a uno specifico eseguibile:
</div>

{{Code|lang=bash|code=
cmake -DPYTHON_EXECUTABLE=/usr/bin/python3 ../
}}

Se non dovesse funzionare, potrebbe essere necessario definire variabili aggiuntive, che puntano alle librerie Python desiderate e includere le directory:

{{Code|lang=bash|code=
cmake -DPYTHON_EXECUTABLE=/usr/bin/python3.6 \
    -DPYTHON_INCLUDE_DIR=/usr/include/python3.6m \
    -DPYTHON_LIBRARY=/usr/lib/x86_64-linux-gnu/libpython3.6m.so \
    -DPYTHON_PACKAGES_PATH=/usr/lib/python3.6/site-packages/ \
    ../
}}

È possibile avere diverse versioni indipendenti di Python nello stesso sistema, quindi le posizioni e i numeri di versione dei tuoi file Python dipenderanno dalla tua particolare distribuzione Linux. Usare {{incode|python3 -V}} per visualizzare la versione di Python che si sta usando attualmente; sono necessari solo i primi due numeri; ad esempio, se il risultato è {{incode|Python 3.6.8}}, è necessario specificare le directory relative alla versione 3.6. Se non si conoscono le directory giuste, provare a cercarle con il comando {{incode|locate}}.

{{Code|code=
locate python3.6
}}

Si può usare {{incode|python3 -m site}} in un terminale per determinare la directory {{incode|site-packages}}, o {{incode|dist-packages}} per i sistemi Debian.

Alcuni componenti di FreeCAD, come PySide, provano a rilevare automaticamente la versione più recente di Python installata sul tuo sistema, che potrebbe fallire se è diversa da quella che si è inserito sopra. L'aggiunta della seguente opzione cMake potrebbe risolvere il problema:

{{Code|lang=bash|code=
-DPython3_FIND_STRATEGY=LOCATION
}}

<span id="Building_with_Qt_Creator_against_Python_3_and_Qt5"></span>
==== Compilare con Qt Creator per Python 3 e Qt5 ====

1. Avviare Qt Creator.

2. Cliccare su {{MenuCommand|Apri progetto}}.

3. Passare alla directory in cui si trova il codice sorgente, {{incode|freecad-source/}}, e scegliere il file {{incode|CMakeLists.txt}} più in alto.

4. Selezionando il file, si eseguirà automaticamente {{incode|cmake}} su di esso, ma potrebbe fallire se le opzioni appropriate non sono impostate correttamente.

5. Andare a {{MenuCommand|Projects → Build & Run → Imported Kit → Build → Build Settings → CMake}}. Impostare la directory di compilazione appropriata, {{incode|build/}}.

6. Impostare le variabili appropriate nella finestra di dialogo Valore-chiave, di tipo {{incode|String}} e {{incode|Bool}}.
{{Code|code=
PYTHON_EXECUTABLE=/usr/bin/python3
}}

7. Se le variabili non caricano correttamente il progetto, potrebbe essere necessario andare su {{MenuCommand|Projects → Manage Kits → Kits → Default (or Imported Kit or similar) → CMake Configuration}}.
Quindi premere {{Button|Change}} e aggiungere la configurazione appropriata come descritto sopra. Potrebbe essere necessario aggiungere più variabili sui percorsi Python, se il sistema Python non viene trovato.
{{Code|code=
PYTHON_EXECUTABLE:STRING=/usr/bin/python3.7
PYTHON_INCLUDE_DIR:STRING=/usr/include/python3.7m
PYTHON_LIBRARY:STRING=/usr/lib/x86_64-linux-gnu/libpython3.7m.so
PYTHON_PACKAGES_PATH:STRING=/usr/lib/python3.7/site-packages
}}

7.1. Premere {{Button|Apply}}, quindi {{Button|OK}}.

7.2. Assicurarsi che il resto delle opzioni siano impostate correttamente, ad esempio, {{MenuCommand|Qt version}} dovrebbe essere una versione presente installata nel sistema, come {{incode|Qt 5.9.5 in PATH (qt5)}}.

Premere {{Button|Apply}}, quindi {{Button|OK}} per chiudere la configurazione.

Il programma {{incode|cmake}} dovrebbe essere eseguito di nuovo automaticamente e dovrebbe riempire l'intera finestra di dialogo Valore-chiave con tutte le variabili, che possono essere configurate.

8. Andare su {{MenuCommand|Projects → Build & Run → Imported Kit → Run → Run Settings → Run → Run Configuration}} e scegliere {{incode|FreeCADMain}} per compilare la versione grafica di FreeCAD, o {{incode| FreeCADMainCMD}} per compilare solo la versione della riga di comando.

9. Infine, andare al menu {{MenuCommand|Build → Crea progetto "FreeCAD"}}. Se si tratta di una nuova compilazione, dovrebbero essere necessari diversi minuti, o addirittura ore, a seconda del numero di processori disponibili.

<span id="Qt_designer_plugin"></span>
==== Plug-in Qt designer ====

Se si desidera sviluppare codice Qt per FreeCAD, ci sarà bisogno del plug-in Qt Designer, che fornisce tutti i widget personalizzati di FreeCAD.

Andare in una directory ausiliaria del codice sorgente, eseguire {{incode|qmake}} con il file di progetto indicato, per creare un {{incode|Makefile}}; quindi esegui {{incode|make}} per compilare il plugin.

{{Code|lang=bash|code=
cd freecad-source/src/Tools/plugins/widget
qmake plugin.pro
make
}}

Se si sta compilando per Qt5, assicurarsi che il binario {{incode|qmake}} sia quello per questa versione, in modo che il risultante {{incode|Makefile}} contenga le informazioni necessarie per Qt5.

{{Code|lang=bash|code=
cd freecad-source/src/Tools/plugins/widget
$QT_DIR/bin/qmake plugin.pro
make
}}

dove {{incode|$QT_DIR}} è la directory, che memorizza le librerie binarie Qt, ad esempio {{incode|/usr/lib/x86_64-linux-gnu/qt5}}.

La libreria creata è {{incode|libFreeCAD_widgets.so}}, che deve essere copiata in {{incode|$QT_DIR/plugins/designer}}.

{{Code|lang=bash|code=
sudo cp libFreeCAD_widgets.so $QT_DIR/plugins/designer
}}

<span id="External_or_internal_Pivy"></span>
==== Pivy esterno o interno ====

In precedenza, era inclusa una versione di Pivy  nel codice sorgente di FreeCAD (interno). Se si desiderava usare la copia del tuo sistema di Pivy (esterna), si doveva usare <code>-DFREECAD_USE_EXTERNAL_PIVY=1</code>.

L'utilizzo di Pivy esterno è diventato l'impostazione predefinita durante lo sviluppo di FreeCAD 0.16, pertanto questa opzione non deve più essere impostata manualmente.

<span id="Doxygen_documentation"></span>
==== Documentazione Doxygen ====

Se si ha installato Doxygen si può compilare la documentazione del codice sorgente. Vedere la [[source documentation/it|documentazione del codice sorgente]] per le istruzioni.

<span id="Additional_documentation"></span>
=== Informazioni aggiuntive ===

Il codice sorgente di FreeCAD è molto vasto e con CMake è possibile configurare molte opzioni. Imparare a utilizzare completamente CMake può essere utile per scegliere le opzioni giuste per le tue esigenze particolari.
* [https://cmake.org/documentation/ CMake Reference Documentation] di Kitware.
* [https://preshing.com/20170511/how-to-build-a-cmake-based-project/ How to Build a CMake-Based Project] (blog) di Preshing sulla programmazione.
* [https://preshing.com/20170522/learn-cmakes-scripting-language-in-15-minutes/ Learn CMake's Scripting Language in 15 Minutes] (blog) di Preshing sulla programmazione.

<span id="Making_a_debian_package"></span>
=== Creazione di un pacchetto debian ===

Se si ha intenzione di creare un pacchetto Debian dai sorgenti, si devono prima installare alcuni pacchetti:

{{Code|lang=bash|code=
sudo apt install dh-make devscripts lintian
}}

Andare nella directory di FreeCAD e chiamare

{{Code|lang=bash|code=
debuild
}}

Una volta compilato il pacchetto, si può usare {{incode|lintian}} per controllare se il pacchetto contiene errori

{{Code|lang=bash|code=
lintian freecad-package.deb
}}

<span id="*.deb_package_with_checkinstall"></span>
==== Pacchetto *.deb con checkinstall ====

Lo script Debian {{incode|checkinstall}} permette di creare un pacchetto *.deb che può essere installato e rimosso con i comandi standard {{incode|dpkg}}. Potrebbe essere necessario installarlo prima (su Ubuntu usare {{incode|sudo apt install checkinstall}}). È interattivo e richiede le informazioni richieste fornendo impostazioni predefinite utili. Durante il processo viene installato il pacchetto e vengono creati un file *.deb e un archivio di backup.

È una buona idea definire un nome e una breve descrizione per il pacchetto. Il nome deve essere inserito per disinstallarlo nuovamente e la descrizione sarà elencata da {{incode|dpkg -l}}. Il nome predefinito "build" non è molto informativo.

Esempio:

{{Code|lang=bash|code=
cd freecad-source/build
cmake ..
make
sudo checkinstall                                  # e.g. name=freecad-test1
}}

Il risultato è un file *.deb nella cartella build. {{incode|checkinstall}} installerà la build per impostazione predefinita. Ecco come installarlo o disinstallarlo:

{{Code|lang=bash|code=
cd freecad-source/build
ls <nowiki>|</nowiki> grep freecad
        freecad-test1_20220814-1_amd64.deb
sudo dpkg -i freecad-test1_20220814-1_amd64.deb   # install
dkpg -l <nowiki>|</nowiki> grep freecad                            # find by name
sudo dpkg -r freecad-test1                        # uninstall by name
}}

<span id="Updating_the_source_code"></span>
===Aggiornare il codice sorgente===

Il sistema CMake permette di aggiornare in modo intelligente il codice sorgente, e ricompilare solo ciò che è cambiato, rendendo più veloci le compilazioni successive.

Spostarsi nella posizione in cui è stato scaricato per la prima volta il codice sorgente di FreeCAD ed estrarre il nuovo codice:

{{Code|lang=bash|code=
cd freecad-source
git pull
}}

Quindi spostarsi nella directory di build in cui il codice è stato compilato inizialmente ed eseguire {{incode|cmake}}, specificando la directory presente (indicata da un punto); quindi attivare la ricompilazione con {{incode|make}}.

{{Code|lang=bash|code=
cd build
cmake ../
make -j$(nproc --ignore=2)
}}

<span id="Uninstalling_the_source_code"></span>
== Disinstallazione del codice sorgente ==

Nel caso in cui il codice sorgente compilato sia stato installato con {{incode|sudo make install}} (per Debian) i file sono stati copiati nella cartella {{FileName|/usr/local}} in diverse sottocartelle. Per la disinstallazione è possibile utilizzare il file {{FileName|install_manifest.txt}}. È stato creato nella cartella build durante la compilazione e contiene tutti i file installati. Finché esiste questo file, l'installazione può essere disinstallata.

{{Code|lang=bash|code=
cd freecad-source/build
xargs sudo rm < install_manifest.txt
}}

<span id="Troubleshooting"></span>
== Risoluzione dei problemi ==

<span id="For_64_bit_systems"></span>
=== Per sistemi a 64 bit ===

Quando si compila FreeCAD per 64 bit, esiste un problema noto con il pacchetto OpenCASCADE (OCCT) a 64 bit. Per far funzionare correttamente FreeCAD, potrebbe essere necessario eseguire lo script {{incode|configure}} e impostare ulteriori {{incode|CXXFLAGS}}:

{{Code|lang=bash|code=
./configure CXXFLAGS="-D_OCC64"
}}

Per i sistemi basati su Debian questa opzione non è necessaria quando si usano i pacchetti OpenCASCADE precompilati, perché questi impostano internamente il {{incode|CXXFLAGS}} appropriato.

<span id="Automatic_build_scripts"></span>
== Script di compilazione automatica ==

Ecco tutto quello che serve per una compilazione completa di FreeCAD. Si tratta di uno script di approccio e funziona su una distro di recente installazione. I comandi richiedono la password di root per l'installazione dei pacchetti e dei nuovi repository online. Questi script dovrebbero funzionare su versioni a 32 e 64 bit. Sono stati scritti per diverse versioni, e dovrebbero essere eseguibili anche su versioni successive, con o senza grandi cambiamenti.

<div class="mw-translate-fuzzy">
Se si ha uno script di questo tipo per la propria distribuzione preferita, lo si discuta sul [https://forum.freecadweb.org/viewforum.php?f=21&sid=e3c22dca9da076fefb56b1d5c5fb3134 forum di FreeCAD] in modo che possa essere incorporato.
</div>

<div class="mw-collapsible mw-collapsed toccolours">

=== Ubuntu === 

<div class="mw-collapsible-content">

Questi script forniscono un modo affidabile, per installare il set corretto di dipendenze necessarie per creare ed eseguire FreeCAD su Ubuntu. Fanno uso degli archivi dei pacchetti personali di Ubuntu (PPA) e dovrebbero funzionare su qualsiasi versione di Ubuntu considerata dal PPA. Il PPA [https://launchpad.net/~freecad-maintainers/+archive/ubuntu/freecad-daily freecad-daily] contempla le versioni recenti di Ubuntu, mentre il [https://launchpad.net/~freecad-maintainers/ +archive/ubuntu/freecad-stable freecad-stable] PPA si rivolge alle versioni ufficialmente supportate di Ubuntu.

Questo script installa l'istantanea compilata quotidianamente di FreeCAD e le sue dipendenze. Aggiunge il repository giornaliero, ottiene le dipendenze per creare questa versione e installa i pacchetti richiesti. Successivamente procede a inserire il codice sorgente in una directory particolare, crea una directory di compilazione e vi si modifica, configura l'ambiente di compilazione con {{incode|cmake}} e infine compila l'intero programma con {{incode|make}}. Salvare lo script in un file, renderlo eseguibile ed eseguirlo, ma non usare {{incode|sudo}}; i privilegi di superutente verranno richiesti solo per i comandi selezionati.

{{Code|lang=bash|code=
#!/bin/sh
sudo add-apt-repository --enable-source ppa:freecad-maintainers/freecad-daily && sudo apt-get update
sudo apt-get build-dep freecad-daily
sudo apt-get install freecad-daily

git clone --recurse-submodules https://github.com/FreeCAD/FreeCAD.git freecad-source
mkdir freecad-source/build
cd freecad-source/build
cmake -DPYTHON_EXECUTABLE=/usr/bin/python3 -DFREECAD_USE_PYBIND11=ON ../
make -j$(nproc --ignore=2)
}}

Se lo si desidera, si può disinstallare la versione precompilata di FreeCAD ({{incode|freecad-daily}}) lasciando le dipendenze in posizione, tuttavia, lasciare questo pacchetto installato consentirà al gestore di pacchetti di mantenere aggiornate anche le sue dipendenze; questo è utile soprattutto se si intende seguire lo sviluppo di FreeCAD e aggiornare e compilare costantemente i sorgenti dal repository Git.

Lo script precedente presuppone, che si voglia compilare l'ultima versione di FreeCAD, quindi che si stia usando il repository "daily", per ottenere le dipendenze. Tuttavia, si può invece ottenere le dipendenze di build della versione "stabile" per l'attuale versione di Ubuntu. In tal caso, sostituire la parte superiore dello script precedente con le seguenti istruzioni. Per Ubuntu 12.04, omettere {{incode|--enable-source}} dal comando.

{{Code|lang=bash|code=
#!/bin/sh
sudo add-apt-repository --enable-source ppa:freecad-maintainers/freecad-stable && sudo apt-get update
sudo apt-get build-dep freecad
sudo apt-get install libqt5xmlpatterns5-dev   # Needed for 0.20; should go away on next packaging update 
sudo apt-get install freecad
}}

Una volta installato il pacchetto {{incode|freecad}} dal repository {{incode|freecad-stable}}, questo sostituirà l'eseguibile di FreeCAD disponibile dal repository Universe Ubuntu. L'eseguibile sarà chiamato semplicemente {{incode|freecad}}, e non {{incode|freecad-stable}}.

</div>
</div>
<div class="mw-collapsible mw-collapsed toccolours">

=== openSUSE ===

<div class="mw-collapsible-content">

Non sono necessari repository esterni per compilare FreeCAD. Tuttavia, esiste un'incompatibilità con python3-devel, che deve essere rimossa. FreeCAD può essere compilato da GIT

{{Code|lang=bash|code=
# install needed packages for development
sudo zypper install gcc cmake OpenCASCADE-devel libXerces-c-devel \
python-devel libqt4-devel python-qt4 Coin-devel SoQt-devel boost-devel \
libode-devel libQtWebKit-devel libeigen3-devel gcc-fortran git swig
 
# create new dir, and go into it
mkdir FreeCAD-Compiled 
cd FreeCAD-Compiled
 
# get the source
git clone --recurse-submodules https://github.com/FreeCAD/FreeCAD.git free-cad
 
# Now you will have a subfolder in this location called free-cad. It contains the source
 
# make another dir for compilation, and go into it
mkdir FreeCAD-Build1
cd FreeCAD-Build1 
 
# build configuration 
cmake ../free-cad
 
# build FreeCAD
make
 
# test FreeCAD
cd bin
./FreeCAD -t 0
}}

Dato che si sta usando git, la prossima volta che si desidera compilare non è necessario clonare tutto, basta estrarre da git e ricompilare

{{Code|lang=bash|code=
# go into free-cad dir created earlier
cd free-cad
 
# pull
git pull
 
# get back to previous dir
cd ..
 
# Now repeat last few steps from before.
 
# make another dir for compilation, and go into it
mkdir FreeCAD-Build2
cd FreeCAD-Build2
 
# build configuration 
cmake ../free-cad
 
# build FreeCAD
# Note: to speed up build use all CPU cores: make -j$(nproc)
make
 
# test FreeCAD
cd bin
./FreeCAD -t 0
}}
</div>
</div>

<div class="mw-collapsible mw-collapsed toccolours">

=== Debian Squeeze ===

<div class="mw-collapsible-content">
{{Code|lang=bash|code=
# get the needed tools and libs
sudo apt-get install build-essential python libcoin60-dev libsoqt4-dev \
libxerces-c2-dev libboost-dev libboost-date-time-dev libboost-filesystem-dev \
libboost-graph-dev libboost-iostreams-dev libboost-program-options-dev \
libboost-serialization-dev libboost-signals-dev libboost-regex-dev \
libqt4-dev qt4-dev-tools python2.5-dev \
libsimage-dev libopencascade-dev \
libsoqt4-dev libode-dev subversion cmake libeigen2-dev python-pivy \
libtool autotools-dev automake gfortran
 
# checkout the latest source
git clone --recurse-submodules https://github.com/FreeCAD/FreeCAD.git freecad
 
# go to source dir
cd freecad
 
# build configuration 
cmake .
 
# build FreeCAD
# Note: to speed up build use all CPU cores: make -j$(nproc)
make
 
# test FreeCAD
cd bin
./FreeCAD -t 0
}}
</div>
</div>
<div class="mw-collapsible mw-collapsed toccolours">

=== Fedora 27/28/29 === 

<div class="mw-collapsible-content">

<div class="mw-translate-fuzzy">
Postato dall'utente [[http://forum.freecadweb.org/memberlist.php?mode=viewprofile&u=3666 PrzemoF]] nel forum.
</div>

{{Code|lang=bash|code=
#!/bin/bash

ARCH=$(arch)

MAIN_DIR=FreeCAD
BUILD_DIR=build

#FEDORA_VERSION=27
#FEDORA_VERSION=28
FEDORA_VERSION=29

PACKAGES="gcc cmake gcc-c++ boost-devel zlib-devel swig eigen3 qt-devel \
shiboken shiboken-devel pyside-tools python-pyside python-pyside-devel xerces-c \
xerces-c-devel OCE-devel smesh graphviz python-pivy python-matplotlib tbb-devel \
 freeimage-devel Coin3 Coin3-devel med-devel vtk-devel"

FEDORA_29_PACKAGES="boost-python2 boost-python3 boost-python2-devel boost-python3-devel"

if [ "$FEDORA_VERSION" = "29" ]; then
    PACKAGES="$PACKAGES $FEDORA_29_PACKAGES"
fi

echo "Installing packages required to build FreeCAD"
sudo dnf -y install $PACKAGES
cd ~
mkdir $MAIN_DIR <nowiki>||</nowiki> { echo "~/$MAIN_DIR already exist. Quitting.."; exit; }
cd $MAIN_DIR
git clone --recurse-submodules https://github.com/FreeCAD/FreeCAD.git
mkdir $BUILD_DIR <nowiki>||</nowiki> { echo "~/$BUILD_DIR already exist. Quitting.."; exit; }
cd $BUILD_DIR
cmake ../FreeCAD 
make -j$(nproc)
}}
</div>
</div>

<div class="mw-collapsible mw-collapsed toccolours">

<span id="Arch_using_AUR"></span>
=== Arch usando AUR ===

<div class="mw-collapsible-content">

[https://aur.archlinux.org/ Arch User Repository (AUR)] è una raccolta di ricette create dagli utenti per creare pacchetti, che non sono ufficialmente supportati dai manutentori della distribuzione/comunità. Di solito sono sicuri. Puoi vedere chi mantiene il pacchetto e per quanto tempo lo ha fatto. Si consiglia di controllare i file di compilazione. In quest'area sono disponibili anche software non open source, anche se mantenuti dalla società proprietaria ufficiale.

Prerequisito: git

Passaggi:
#Aprire un terminale. Facoltativamente, creare una directory, ad es. {{incode | mkdir git}}. Opzionalmente cambiare directory es. {{incode|cd git}}.
#Clonare il repository AUR: {{incode|git clone https://aur.archlinux.org/freecad-git.git}}
#Inserire la cartella del repository AUR: {{incode|cd freecad-git}}
#Compilare, usando [https://wiki.archlinux.org/index.php/Makepkg Arch makepkg] : {{incode|makepkg -s}}. Il flag -s o --syncdeps installerà anche le dipendenze richieste.
#Installare il pacchetto creato: {{incode|makepkg --install}} o fare doppio clic su pkgname-pkgver.pkg.tar.xz all'interno del browser dei file.

Per aggiornare FreeCAD all'ultima build basta ripetere dal passaggio 3. Aggiornare il repository AUR quando c'è qualche modifica sostanziale nella ricetta o nuove funzionalità, usando {{incode|git checkout -f}} all'interno della cartella.
</div>
</div>


{{docnav/it|[[Compile_on_Windows/it|Compilazione in Windows]]|[[Compile_on_MacOS/it|Compilazione in MacOS]]}}

{{Userdocnavi{{#translation:}}}}
[[Category:Developer_Documentation{{#translation:}}]]
[[Category:Developer{{#translation:}}]]