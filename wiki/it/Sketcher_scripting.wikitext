<languages/>
{{TOCright}}

<span id="Creating_a_SketchObject_using_Python"></span>
== Creazione di uno SketchObject utilizzando Python ==

Creiamo uno SketchObject come questo:

{{Code|code=
import FreeCAD as App
import Part
import Sketcher

doc = App.newDocument()  

sketch = doc.addObject("Sketcher::SketchObject", "Sketch")
sketch.addGeometry(Part.LineSegment(App.Vector(1.2, 1.8, 0),
                                    App.Vector(5.2, 5.3, 0)), False)
sketch.addGeometry(Part.LineSegment(App.Vector(6.5, 1.5, 0),
                                    App.Vector(10.2, 5.0, 0)), False)
sketch.addGeometry(Part.LineSegment(App.Vector(12.2, 1.0, 0),
                                    App.Vector(15.4, 5.0, 0)), False)

doc.recompute()
}}

Aggiunge inoltre tre [[Topological_data_scripting/it#Line|linee]] nello Sketch appena creato.

<span id="Creating_a_constraint_using_Python"></span>
== Creare un vincolo usando Python ==

Un vincolo geometrico [[File:Sketcher_ConstrainCoincident.svg|24px]] [[File:Sketcher_ConstrainPointOnObject.svg|24px]] [[File:Sketcher_ConstrainVertical.svg|24px]] [[File:Sketcher_ConstrainHorizontal.svg|24px]] [[File:Sketcher_ConstrainParallel.svg|24px]] [[File:Sketcher_ConstrainPerpendicular.svg|24px]] [[File:Sketcher_ConstrainTangent.svg|24px]] [[File:Sketcher_ConstrainEqual.svg|24px]] [[File:Sketcher_ConstrainSymmetric.svg|24px]] e [[File:Sketcher_ConstrainBlock.svg|24px]] può essere creato da una macro e dalla console Python utilizzando il seguente comando:

{{Code|code=sketch.addConstraint(Sketcher.Constraint(ConstraintType, EdgeOrPartOfEdge…)) }}

Un vincolo dimensionale [[File:Sketcher_ConstrainLock.svg|24px]] [[File:Sketcher_ConstrainDistanceX.svg|24px]] [[File:Sketcher_ConstrainDistanceY.svg|24px]] [[File:Sketcher_ConstrainDistance.svg|24px]] [[File:Sketcher_ConstrainRadius.svg|24px]] [[File:Sketcher_ConstrainDiameter.svg|24px]] [[File:Sketcher_ConstrainAngle.svg|24px]] e lo speciale [[File:Sketcher_ConstrainSnellsLaw.svg|24px]] [[Sketcher_ConstrainSnellsLaw/it|refraction constraint]] può essere creato da macro e dalla console Python utilizzando il seguente comando:

{{Code|code=sketch.addConstraint(Sketcher.Constraint(DimensionalConstraintType, EdgeOrPartOfEdge…, App.Units.Quantity("float_value unit"))) }}

per esempio

{{Code|code=sketch.addConstraint(Sketcher.Constraint(DimensionalConstraintType, EdgeOrPartOfEdge…, App.Units.Quantity("123.0 mm"))) }}

Il primo argomento {{incode|ConstraintType}} è descritto di seguito in [[#Tipi_di_vincoli|Tipi di vincoli]].

Un vincolo può accettare fino a sei argomenti, che sono spigoli o indicano quale sottoparte di uno spigolo viene utilizzata dal vincolo. Consultare la documentazione dei singoli vincoli per i dettagli sulle combinazioni di spigoli e sottoparti di spigoli che possono essere passate come argomenti.
Il problema principale di questa funzione è identificare correttamente il numero di riga e il numero di vertice delle righe che si desidera elaborare.
Le sezioni seguenti descrivono come [[#Identificare_la_numerazione_di_una_riga|identificare la numerazione di una riga]] e come [[#Identificare_la_numerazione_delle_sottoparti_di_una_riga|identificare la numerazione delle sottoparti di una riga]].

<span id="Constraint_types"></span>
== Tipi di vincoli ==

Per i vincoli geometrici, il primo argomento è uno dei seguenti. Consultare la pagina delle funzionalità corrispondente per le possibili combinazioni di argomenti consentite per ciascun vincolo.

{| class="wikitable"
|-
! Code !! Icon !! Feature
|-
| {{incode|"Coincident"}} || [[File:Sketcher_ConstrainCoincident.svg|24px]] || [[Sketcher_ConstrainCoincident|Coincident Constraint]]
|-
| {{incode|"PointOnObject"}} || [[File:Sketcher_ConstrainPointOnObject.svg|24px]] || [[Sketcher_ConstrainPointOnObject|Point-On-Object Constraint]]
|-
| {{incode|"Vertical"}} || [[File:Sketcher_ConstrainVertical.svg|24px]] || [[Sketcher_ConstrainVertical|Vertical Constraint]]
|-
| {{incode|"Horizontal"}} || [[File:Sketcher_ConstrainHorizontal.svg|24px]] || [[Sketcher_ConstrainHorizontal|Horizontal Constraint]]
|-
| {{incode|"Parallel"}} || [[File:Sketcher_ConstrainParallel.svg|24px]] || [[Sketcher_ConstrainParallel|Parallel Constraint]]
|-
| {{incode|"Perpendicular"}} || [[File:Sketcher_ConstrainPerpendicular.svg|24px]] || [[Sketcher_ConstrainPerpendicular|Perpendicular Constraint]]
|-
| {{incode|"Tangent"}} || [[File:Sketcher_ConstrainTangent.svg|24px]] || [[Sketcher_ConstrainTangent|Tangent/Collinear Constraint]]
|-
| {{incode|"Equal"}} || [[File:Sketcher_ConstrainEqual.svg|24px]] || [[Sketcher_ConstrainEqual|Equal Constraint]]
|-
| {{incode|"Symmetric"}} || [[File:Sketcher_ConstrainSymmetric.svg|24px]] || [[Sketcher_ConstrainSymmetric|Symmetric Constraint]]
|-
| {{incode|"Block"}} || [[Image:Sketcher_ConstrainBlock.svg|24px]] || [[Sketcher_ConstrainBlock|Block Constraint]]
|}

Per i vincoli dimensionali, il primo argomento è uno dei seguenti. Consultare la pagina delle funzionalità corrispondente per le possibili combinazioni di argomenti consentite per ciascun vincolo.

{| class="wikitable"
|-
! Code !! Icon !! Feature
|-
| {{incode|"DistanceX"}} || [[File:Sketcher_ConstrainDistanceX.svg|24px]] || [[Sketcher_ConstrainDistanceX|Horizontal Dimension]]
|-
| {{incode|"DistanceY"}} || [[File:Sketcher_ConstrainDistanceY.svg|24px]] || [[Sketcher_ConstrainDistanceY|Vertical Dimension]]
|-
| {{incode|"Distance"}} || [[File:Sketcher_ConstrainDistance.svg|24px]] || [[Sketcher_ConstrainDistance|Distance Dimension]]
|-
| {{incode|"Radius"}} || [[File:Sketcher_ConstrainRadius.svg|24px]] || [[Sketcher_ConstrainRadius|Radius Dimension]]
|-
| {{incode|"Diameter"}} || [[File:Sketcher_ConstrainDiameter.svg|24px]] || [[Sketcher_ConstrainDiameter|Diameter Dimension]]
|-
| {{incode|"Angle"}} || [[File:Sketcher_ConstrainAngle.svg|24px]] || [[Sketcher_ConstrainAngle|Angle Dimension]]
|-
| {{incode|"AngleViaPoint"}} || [[File:Sketcher_ConstrainAngle.svg|24px]] || [[Sketcher_ConstrainAngle|Angle Dimension]]
|}

I [[File:Sketcher_ConstrainSnellsLaw.svg|24px]] [[Sketcher_ConstrainSnellsLaw/it|vincoli di rifrazione]] si comportano come vincoli dimensionali ai fini della creazione di script. Anche in questo caso, consultare la pagina delle funzionalità corrispondente per le possibili combinazioni di argomenti consentite per ciascun vincolo.

{| class="wikitable"
|-
! Codice !! Icona !! Funzione
|-
| {{incode|"SnellsLaw"}} || [[File:Sketcher_ConstrainSnellsLaw.svg|24px]] || [[Sketcher_ConstrainSnellsLaw/it|Vincolo rifrazione]]
|}

The [[File:Sketcher_ConstrainLock.svg|24px]] [[Sketcher_ConstrainLock|lock position]] constraint is a GUI command which creates a [[File:Sketcher_ConstrainDistanceX.svg|24px]] [[Sketcher_ConstrainDistanceX|horizontal dimension]] and a [[File:Sketcher_ConstrainDistanceY.svg|24px]] [[Sketcher_ConstrainDistanceY|vertical dimension]] constraint, it is not a constraint of its own.

<span id="Identifying_the_numbering_of_a_line"></span>
==Identificare la numerazione di una riga==

Sono state disegnate tre linee come mostrato nella figura seguente.

[[File:PartDesignConstraintPointOnPointScriptingFigure1.jpg|600px]]

Spostando il cursore del mouse sopra la linea è possibile vedere il numero della linea in basso a sinistra della finestra di FreeCAD, vedere la figura successiva.

[[File:PartDesignConstraintPointOnPointScriptingFigure2.jpg|600px]]

Sfortunatamente la numerazione visualizzata nelle finestre di FreeCAD inizia da 1, mentre la numerazione delle linee utilizzate per lo script inizia da 0: questo significa che bisogna sottrarre uno ogni volta che si vuole fare riferimento a una linea.

I numeri positivi indicano i bordi dello schizzo (linee rette, cerchi, coniche, B-spline e così via). I seguenti valori possono essere utilizzati per indicare elementi che non sono bordi dello schizzo:

* {{incode|-1}} denotes the horizontal x axis
* {{incode|-2}} denotes the vertical y axis
* {{incode|-n}} denotes the external geometry element number {{incode|n-3}} (e.g. the external geometry element with index 0 in the flattened list {{incode|sketch.ExternalGeometry}} would be denoted by -3, the following element in the flattened list would be -4 and so on).

<span id="Identifying_the_numbering_of_the_sub-parts_of_a_line"></span>
==Identificare la numerazione delle sottoparti di una riga==

When qualifying which part of a line is affected by a constraint, the following values can be used:
* {{incode|0}} to indicate that the constraint affects the entire edge.
* {{incode|1}} to indicate that the constraint affects the start point of the edge (a full circle has no starting point).
* {{incode|2}} to indicate that the constraint affects the endpoint of the edge.
* {{incode|3}} to indicate that the constraint affects the center point of the edge. Can only be used for circles, circular arcs, ellipses and elliptical arcs.
* {{incode|n}} to indicate that the constraint affects the n-th pole of a B-spline.

I vertici indicati con 1 e 2 sono numerati in base al loro ordine di creazione. Per scoprire l'ordine della loro creazione (se hai molte linee, non puoi ricordare quale vertice hai creato per primo), devi semplicemente spostare il cursore del mouse sopra i due vertici di una linea, vedi figura seguente.

[[File:PartDesignConstraintPointOnPointScriptingFigure3.jpg|600px]]

Se si leggono ad esempio 4 e 5, significa che il vertice con il numero più basso (4 in questo esempio) verrà referenziato utilizzando il numero 1 (primo nel comando script) e il vertice con il numero più alto (5 in questo esempio) verrà referenziato utilizzando il numero 2 nel comando script.

<span id="Example"></span>
== Esempio ==

Prendiamo l'esempio precedente delle tre linee. La figura successiva indica la numerazione di ciascuna linea e dei relativi vertici secondo la convenzione di scripting.

[[Image:PartDesignConstraintPointOnPointScriptingFigure3Bis.jpg|600px]]

{{Caption|<b>testo blu:</b> numerazione delle linee, <b>testo nero:</b> numerazione dei vertici}}

Il comando {{incode|sketch.addConstraint(Sketcher.Constraint("Coincident", 1, 2, 2, 1))}} produce il seguente risultato:

[[Image:PartDesignConstraintPointOnPointScriptingFigure4.jpg|600px]]

Il codice completo per disegnare le tre linee e aggiungere un vincolo Coincidente su due punti da due linee è il seguente:

{{Code|code=
import FreeCAD as App
import Part
import Sketcher

doc = App.newDocument()  

sketch = doc.addObject("Sketcher::SketchObject", "Sketch")
sketch.addGeometry(Part.LineSegment(App.Vector(1.2, 1.8, 0),
                                    App.Vector(5.2, 5.3, 0)), False)
sketch.addGeometry(Part.LineSegment(App.Vector(6.5, 1.5, 0),
                                    App.Vector(10.2, 5.0, 0)), False)
sketch.addGeometry(Part.LineSegment(App.Vector(12.2, 1.0, 0),
                                    App.Vector(15.4, 5.0, 0)), False)
sketch.addConstraint(Sketcher.Constraint("Coincident", 1, 2, 2, 1))

doc.recompute()
}}  


{{Sketcher_Tools_navi{{#translation:}}}}
{{Userdocnavi{{#translation:}}}}