<languages/>
{{TOCright}}

<span id="Creating_a_SketchObject_using_Python"></span>
== Creazione di uno SketchObject utilizzando Python ==

Creiamo uno SketchObject come questo:

{{Code|code=
import FreeCAD as App
import Part
import Sketcher

doc = App.newDocument()  

sketch = doc.addObject("Sketcher::SketchObject", "Sketch")
sketch.addGeometry(Part.LineSegment(App.Vector(1.2, 1.8, 0),
                                    App.Vector(5.2, 5.3, 0)), False)
sketch.addGeometry(Part.LineSegment(App.Vector(6.5, 1.5, 0),
                                    App.Vector(10.2, 5.0, 0)), False)
sketch.addGeometry(Part.LineSegment(App.Vector(12.2, 1.0, 0),
                                    App.Vector(15.4, 5.0, 0)), False)

doc.recompute()
}}

Aggiunge inoltre tre [[Topological_data_scripting/it#Line|linee]] nello Sketch appena creato.

<span id="Creating_a_constraint_using_Python"></span>
== Creare un vincolo usando Python ==

Un vincolo geometrico [[File:Sketcher_ConstrainCoincident.svg|24px]] [[File:Sketcher_ConstrainPointOnObject.svg|24px]] [[File:Sketcher_ConstrainVertical.svg|24px]] [[File:Sketcher_ConstrainHorizontal.svg|24px]] [[File:Sketcher_ConstrainParallel.svg|24px]] [[File:Sketcher_ConstrainPerpendicular.svg|24px]] [[File:Sketcher_ConstrainTangent.svg|24px]] [[File:Sketcher_ConstrainEqual.svg|24px]] [[File:Sketcher_ConstrainSymmetric.svg|24px]] e [[File:Sketcher_ConstrainBlock.svg|24px]] può essere creato da una macro e dalla console Python utilizzando il seguente comando:

{{Code|code=sketch.addConstraint(Sketcher.Constraint(ConstraintType, EdgeOrPartOfEdge…)) }}

Un vincolo dimensionale [[File:Sketcher_ConstrainLock.svg|24px]] [[File:Sketcher_ConstrainDistanceX.svg|24px]] [[File:Sketcher_ConstrainDistanceY.svg|24px]] [[File:Sketcher_ConstrainDistance.svg|24px]] [[File:Sketcher_ConstrainRadius.svg|24px]] [[File:Sketcher_ConstrainDiameter.svg|24px]] [[File:Sketcher_ConstrainAngle.svg|24px]] e lo speciale [[File:Sketcher_ConstrainSnellsLaw.svg|24px]] [[Sketcher_ConstrainSnellsLaw/it|refraction constraint]] può essere creato da macro e dalla console Python utilizzando il seguente comando:

{{Code|code=sketch.addConstraint(Sketcher.Constraint(DimensionalConstraintType, EdgeOrPartOfEdge…, App.Units.Quantity("float_value unit"))) }}

per esempio

{{Code|code=sketch.addConstraint(Sketcher.Constraint(DimensionalConstraintType, EdgeOrPartOfEdge…, App.Units.Quantity("123.0 mm"))) }}

Il primo argomento {{incode|ConstraintType}} è descritto di seguito in [[#Tipi_di_vincoli|Tipi di vincoli]].

Un vincolo può accettare fino a sei argomenti, che sono spigoli o indicano quale sottoparte di uno spigolo viene utilizzata dal vincolo. Consultare la documentazione dei singoli vincoli per i dettagli sulle combinazioni di spigoli e sottoparti di spigoli che possono essere passate come argomenti.
Il problema principale di questa funzione è identificare correttamente il numero di linea e il numero di vertice delle linee che si desidera elaborare.
Le sezioni seguenti descrivono come [[#Identificare_la_numerazione_di_una_linea|identificare la numerazione di una linea]] e come [[#Identificare_la_numerazione_delle_sottoparti_di_una_linea|identificare la numerazione delle sottoparti di una linea]].

<span id="Constraint_types"></span>
== Tipi di vincoli ==

Per i vincoli geometrici, il primo argomento è uno dei seguenti. Consultare la pagina delle funzionalità corrispondente per le possibili combinazioni di argomenti consentite per ciascun vincolo.

{| class="wikitable"
|-
! Codice !! Icona !! Funzione
|-
| {{incode|"Coincident"}} || [[File:Sketcher_ConstrainCoincident.svg|24px]] || [[Sketcher_ConstrainCoincident/it|Vincolo Coincidente]]
|-
| {{incode|"PointOnObject"}} || [[File:Sketcher_ConstrainPointOnObject.svg|24px]] || [[Sketcher_ConstrainPointOnObject/it|Vincolo Punto-Su-Oggetto]]
|-
| {{incode|"Vertical"}} || [[File:Sketcher_ConstrainVertical.svg|24px]] || [[Sketcher_ConstrainVertical/it|Vincolo Verticale]]
|-
| {{incode|"Horizontal"}} || [[File:Sketcher_ConstrainHorizontal.svg|24px]] || [[Sketcher_ConstrainHorizontal/it|Vincolo Orizzontale]]
|-
| {{incode|"Parallel"}} || [[File:Sketcher_ConstrainParallel.svg|24px]] || [[Sketcher_ConstrainParallel/it|Vincolo Parallelo]]
|-
| {{incode|"Perpendicular"}} || [[File:Sketcher_ConstrainPerpendicular.svg|24px]] || [[Sketcher_ConstrainPerpendicular/it|Vincolo Perpendicolare]]
|-
| {{incode|"Tangent"}} || [[File:Sketcher_ConstrainTangent.svg|24px]] || [[Sketcher_ConstrainTangent/it|Vincolo Tangente/Collineare]]
|-
| {{incode|"Equal"}} || [[File:Sketcher_ConstrainEqual.svg|24px]] || [[Sketcher_ConstrainEqual/it|Vincolo Uguale]]
|-
| {{incode|"Symmetric"}} || [[File:Sketcher_ConstrainSymmetric.svg|24px]] || [[Sketcher_ConstrainSymmetric/it|Vincolo Simmetrico]]
|-
| {{incode|"Block"}} || [[Image:Sketcher_ConstrainBlock.svg|24px]] || [[Sketcher_ConstrainBlock/it|Vincolo Blocco]]
|}

Per i vincoli dimensionali, il primo argomento è uno dei seguenti. Consultare la pagina delle funzionalità corrispondente per le possibili combinazioni di argomenti consentite per ciascun vincolo.

{| class="wikitable"
|-
! Codice !! Icona !! Funzione
|-
| {{incode|"DistanceX"}} || [[File:Sketcher_ConstrainDistanceX.svg|24px]] || [[Sketcher_ConstrainDistanceX/it|Distanza Orizzontale]]
|-
| {{incode|"DistanceY"}} || [[File:Sketcher_ConstrainDistanceY.svg|24px]] || [[Sketcher_ConstrainDistanceY/it|Distanza Verticale]]
|-
| {{incode|"Distance"}} || [[File:Sketcher_ConstrainDistance.svg|24px]] || [[Sketcher_ConstrainDistance/it|Distanza]]
|-
| {{incode|"Radius"}} || [[File:Sketcher_ConstrainRadius.svg|24px]] || [[Sketcher_ConstrainRadius/it|Raggio]]
|-
| {{incode|"Diameter"}} || [[File:Sketcher_ConstrainDiameter.svg|24px]] || [[Sketcher_ConstrainDiameter/it|Diametro]]
|-
| {{incode|"Angle"}} || [[File:Sketcher_ConstrainAngle.svg|24px]] || [[Sketcher_ConstrainAngle/it|Angolo]]
|-
| {{incode|"AngleViaPoint"}} || [[File:Sketcher_ConstrainAngle.svg|24px]] || [[Sketcher_ConstrainAngle/it|Angolo]]
|}

I [[File:Sketcher_ConstrainSnellsLaw.svg|24px]] [[Sketcher_ConstrainSnellsLaw/it|vincoli di rifrazione]] si comportano come vincoli dimensionali ai fini della creazione di script. Anche in questo caso, consultare la pagina delle funzionalità corrispondente per le possibili combinazioni di argomenti consentite per ciascun vincolo.

{| class="wikitable"
|-
! Codice !! Icona !! Funzione
|-
| {{incode|"SnellsLaw"}} || [[File:Sketcher_ConstrainSnellsLaw.svg|24px]] || [[Sketcher_ConstrainSnellsLaw/it|Vincolo rifrazione]]
|}

Il vincolo di [[File:Sketcher_ConstrainLock.svg|24px]] [[Sketcher_ConstrainLock/it|blocco posizione]] è un comando GUI che crea un vincolo [[File:Sketcher_ConstrainDistanceX.svg|24px]] [[Sketcher_ConstrainDistanceX/it|distanza orizzontale]] e un vincolo [[File:Sketcher_ConstrainDistanceY.svg|24px]] [[Sketcher_ConstrainDistanceY/it|distanza verticale]], non è un vincolo a sé stante.

<span id="Identifying_the_numbering_of_a_line"></span>
==Identificare la numerazione di una linea==

Sono state disegnate tre linee come mostrato nella figura seguente.

[[File:PartDesignConstraintPointOnPointScriptingFigure1.jpg|600px]]

Spostando il cursore del mouse sopra la linea è possibile vedere il numero della linea in basso a sinistra della finestra di FreeCAD, vedere la figura successiva.

[[File:PartDesignConstraintPointOnPointScriptingFigure2.jpg|600px]]

Sfortunatamente la numerazione visualizzata nelle finestre di FreeCAD inizia da 1, mentre la numerazione delle linee utilizzate per lo script inizia da 0: questo significa che bisogna sottrarre uno ogni volta che si vuole fare riferimento a una linea.

I numeri positivi indicano i bordi dello schizzo (linee rette, cerchi, coniche, B-spline e così via). I seguenti valori possono essere utilizzati per indicare elementi che non sono bordi dello schizzo:

* {{incode|-1}} indica l'asse orizzontale x
* {{incode|-2}} indica l'asse verticale y
* {{incode|-n}} indica il numero dell'elemento geometrico esterno {{incode|n-3}} (ad esempio, l'elemento geometrico esterno con indice 0 nell'elenco appiattito {{incode|sketch.ExternalGeometry}} sarebbe indicato da -3, l'elemento successivo nell'elenco svolto sarebbe -4 e così via).

<span id="Identifying_the_numbering_of_the_sub-parts_of_a_line"></span>
==Identificare la numerazione delle sottoparti di una linea==

Per specificare quale parte di una linea è interessata da un vincolo, è possibile utilizzare i seguenti valori:
* {{incode|0}} per indicare che il vincolo interessa l'intero bordo.
* {{incode|1}} per indicare che il vincolo interessa il punto iniziale del bordo (un cerchio completo non ha un punto iniziale).
* {{incode|2}} per indicare che il vincolo interessa il punto finale del bordo.
* {{incode|3}} per indicare che il vincolo interessa il punto centrale del bordo. Può essere utilizzato solo per cerchi, archi circolari, ellissi e archi ellittici.
* {{incode|n}} per indicare che il vincolo interessa l'n-esimo polo di una B-spline.

I vertici indicati con 1 e 2 sono numerati in base al loro ordine di creazione. Per scoprire l'ordine della loro creazione (se hai molte linee, non puoi ricordare quale vertice hai creato per primo), devi semplicemente spostare il cursore del mouse sopra i due vertici di una linea, vedi figura seguente.

[[File:PartDesignConstraintPointOnPointScriptingFigure3.jpg|600px]]

Se si leggono ad esempio 4 e 5, significa che il vertice con il numero più basso (4 in questo esempio) verrà referenziato utilizzando il numero 1 (primo nel comando script) e il vertice con il numero più alto (5 in questo esempio) verrà referenziato utilizzando il numero 2 nel comando script.

<span id="Example"></span>
== Esempio ==

Prendiamo l'esempio precedente delle tre linee. La figura successiva indica la numerazione di ciascuna linea e dei relativi vertici secondo la convenzione di scripting.

[[Image:PartDesignConstraintPointOnPointScriptingFigure3Bis.jpg|600px]]

{{Caption|<b>testo blu:</b> numerazione delle linee, <b>testo nero:</b> numerazione dei vertici}}

Il comando {{incode|sketch.addConstraint(Sketcher.Constraint("Coincident", 1, 2, 2, 1))}} produce il seguente risultato:

[[Image:PartDesignConstraintPointOnPointScriptingFigure4.jpg|600px]]

Il codice completo per disegnare le tre linee e aggiungere un vincolo Coincidente su due punti da due linee è il seguente:

{{Code|code=
import FreeCAD as App
import Part
import Sketcher

doc = App.newDocument()  

sketch = doc.addObject("Sketcher::SketchObject", "Sketch")
sketch.addGeometry(Part.LineSegment(App.Vector(1.2, 1.8, 0),
                                    App.Vector(5.2, 5.3, 0)), False)
sketch.addGeometry(Part.LineSegment(App.Vector(6.5, 1.5, 0),
                                    App.Vector(10.2, 5.0, 0)), False)
sketch.addGeometry(Part.LineSegment(App.Vector(12.2, 1.0, 0),
                                    App.Vector(15.4, 5.0, 0)), False)
sketch.addConstraint(Sketcher.Constraint("Coincident", 1, 2, 2, 1))

doc.recompute()
}}  


{{Sketcher_Tools_navi{{#translation:}}}}
{{Userdocnavi{{#translation:}}}}