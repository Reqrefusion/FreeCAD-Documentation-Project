<languages/>

<div lang="en" dir="ltr" class="mw-content-ltr">
{{Macro
|Name=Download Classifications
|Description=Downloads a package of BIM classification systems for use in FreeCAD
|Author=yorik
|Version=1.0
|Date=2024-12-13
|FCVersion=All
}}
</div>

<span id="Description"></span>
==Descrizione==

Questa macro scarica una serie di sistemi di classificazione BIM da https://github.com/Moult/IfcClassification e li inserisce nella cartella appropriata sul computer in modo che possano essere trovati dallo strumento [[BIM_Classification/it|Classificazione di BIM]].

<span id="Usage"></span>
==Utilizzo==

Eseguire la macro. Dopo l'esecuzione, i nuovi sistemi di classificazione saranno disponibili nello strumento [[BIM_Classification/it|Classificazione di BIM]]. Dopo l'esecuzione della macro e l'installazione dei sistemi di classificazione, Ã¨ possibile eliminarla in tutta sicurezza.

<span id="Install"></span>
==Installazione==

Tramite il [[Std_AddonMgr|Gestore componenti aggiuntivi]].

<span id="Code"></span>
==Codice==

'''Macro_Download_Classifications.FCMacro'''

{{MacroCode|code=
import os
import FreeCAD
import requests
import json

target = os.path.join(FreeCAD.getUserAppDataDir(), "BIM", "Classification")
apireq = "https://api.github.com/repos/Moult/IfcClassification/contents/xml"

r = requests.get(apireq)
if r.ok:
    j = json.loads(r.content)
    print("Installing to", target", ...")
    for f in j:
        df = requests.get(f["download_url"])
        with open(os.path.join(target, f["name"]), 'wb') as tf:
            tf.write(df.content)
            print("Downloaded", f["name"])
else:
    print("error getting repo contents")
}}