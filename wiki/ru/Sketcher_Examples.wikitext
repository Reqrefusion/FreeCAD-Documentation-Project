{{UnfinishedDocu{{#translation:}}}}
<languages/>

{{TOCright}}

<span id="Introduction"></span>
== Введение ==

Я думаю, что [[Image:Workbench_Sketcher.svg|24px]] [[Sketcher_Workbench/ru|Верстак Sketcher]] нуждается в некоторых примерах, которые не являются подробными руководствами или видео...

<span id="Film_hinge"></span>
== Плёночный шарнир ==

Плёночный шарнир - это крошечный кусочек гнущегося пластика, который соединяет две стороны предмета, изготовленного методом литья под давлением, например, ёмкость с крышкой или две половинки корпуса пылезащитной пробки.

В этом примере используется некий мастер-эскиз, на который накладываются несколько зависимых эскизов. Он также показывает, как прикрепить и анимировать простой зажим на основе функций верстака [[Image:Workbench_PartDesign.svg|16px]] [[PartDesign_Workbench/ru| PartDesign (ПроектнаяДеталь)]] и ограничений из верстака [[Image:Workbench_Sketcher.svg|16px]] [[Sketcher_Workbench/ru|Sketcher (Скетчер)]]. Использование [[Image:Bound-expression.svg|16px]] [[Expressions/ru|выражений]], как описано ниже, требует FreeCAD '''V 0.21 или выше'''.

<span id="Basic_sketch"></span>
===Базовый эскиз===

Обычно объект моделируется в закрытом состоянии. Позже подвижную часть необходимо развернуть на 180° для формовки в открытом состоянии.<br>Сгибаемая полоса представлена круговой дугой для закрытого состояния и прямой линией для открытого состояния, обе имеют одну и ту же начальную точку.<br>Средняя точка линии, соединяющей обе конечные точки, указывает положение оси переворота, нормальной к плоскости эскиза. (Она помещается в начало эскиза, чтобы глобальная ось, нормальная к плоскости эскиза, могла использоваться в качестве оси вращения)

 <div class="mw-collapsible mw-collapsed">
(Некоторые скрытые дополнительные пояснения и описание рабочего процесса можно найти здесь --> 

[[Image:Sketcher_ExampleHinge-01.gif|400px]]
{{Caption|Мастер-эскиз и анимированная петля плёночного шарнира (щёлкните по изображению, если анимация остановилась после нескольких повторов)}}

<div class="mw-collapsible-content toccolours">

Для полуокружности длина дуги равна радиусу, умноженному на Pi ('''l = r * Pi'''). Радиус называется NeutralRadius (НейтральныйРадиус), а линия - DevelopedLength (ДлинаРазвёртки). Выражение для DevelopedLength связывает оба значения: {{incode|.Constraints.NeutralRadius * pi}}
: В пределах одного эскиза выражение начинается с {{incode|.}}, за которым следует ValueType.ValueName для обращения к другому значению.

</div> <!-- End of collapsible element for content section. Do not remove! -->

<span id="Intermediate_sketch"></span>
===Промежуточный эскиз===

Дуга этого плёночного шарнира имеет постоянную длину и переменный радиус. Одним из исходных данных является NeutralRadius базового эскиза; чтобы иметь его под рукой в этом эскизе, он связан как [[Image:Sketcher_External.svg|16px]] [[Sketcher_External/ru|внешняя геометрия]], имеющая опорный размер ReferenceRadius

<div class="mw-collapsible-content toccolours">

Круговой сегмент вспомогательной геометрии показывает соотношение между дугой и радиусом для заданного угла.<br>
'''InputLength = ReferenceRadius * Pi''' <br>
и<br>
'''ArcLength = DynamicRadius * Pi * ArcAngle / 180°''' <br>
при постоянной длине это приводит к:<br>
'''ReferenceRadius * Pi = DynamicRadius * Pi * ArcAngle / 180°''' <br>
И, исключив Pi, получаем:<br>
'''ReferenceRadius  = DynamicRadius * ArcAngle / 180°''' или '''DynamicRadius  = ReferenceRadius  * 180° / ArcAngle'''
: [[Image:Bound-expression.svg|16px]] [[Expressions/ru|Выражение]] для значения DynamicRadius : {{incode|.Constraints.ReferenceRadius * 180 ° / .Constraints.ArcAngle}}

Плёночный шарнир обычно симметричен, поэтому для вывода используется другая дуга с той же центральной точкой, называемая HalfArc и представляющая собой половину дуги шарнира.
: [[Image:Bound-expression.svg|16px]] [[Expressions/ru|Выражение]] для значения HalfArc : {{incode|.Constraints.ArcAngle / 2}}

</div> <!-- End of collapsible element for content section. Do not remove! -->

[[Image:Sketcher_ExampleHinge-02.png|400px]]
{{Caption|Промежуточный эскиз, показывающий DynamicRadius дуги шарнира 4 (мм) при заданном угле 45° (и полудуги для вывода)}}

<span id="Film_hinge_sketch"></span>
=== Эскиз петли для крепления плёнки ===

Этот эскиз определяет толщину и прилегающую геометрию плёночного шарнира. Поэтому мы загружаем полудугу промежуточного эскиза как внешнюю геометрию, чтобы использовать её в качестве основы для плёночной части. (в данном случае это доля 180°)

Эта плёночная петля предназначена для того, чтобы соединённые части не касались друг друга в закрытом состоянии. Этого можно добиться, рассчитав круговую дугу нужной длины, затем создав полоску постоянной толщины и, наконец, наложив галтели в местах соприкосновения полоски с половинками объекта. Последний шаг укорачивает петлю, но в реальном мире это не проблема, поскольку дуга никогда не будет круглой, а галтели влияют на кривизну дуги, но не на её функциональность.

[[Image:Sketcher_ExampleHinge-03.png|400px]]
{{Caption|Эскиз шарнира, показывающий очертания шарнира на основе внешней геометрии по полудуге промежуточного эскиза}}


[[Image:Sketcher_ExampleHinge-04.png|300px]] 
[[Image:Sketcher_ExampleHinge-05.png|300px]]
{{Caption|Слева: [[Image:PartDesign_Pad.svg|16px]] [[PartDesign_Pad/ru|выдавленная]] половинка петли с видимым эскизом. Справа: полупетля с добавленым [[Image:PartDesign_Fillet.svg|16px]] [[PartDesign_Fillet/ru|скруглением]]}}


[[Image:Sketcher_ExampleHinge-06.png|300px]] [[Image:Button_right.svg|16px|link=]] 
[[Image:Sketcher_ExampleHinge-07.png|300px]]
{{Caption|Полупетля с выделенной зеркальной плоскостью → [[Image:PartDesign_Mirrored.svg|16px]] [[PartDesign_Mirrored/ru|зеркальная]] плёночная петля}}


Подсказка: Функция [[Image:Part_Mirror.svg|16px]] [[Part_Mirror/ru|Part Зеркально]] принимает только три основные плоскости и поэтому не может быть использована в данном случае.
: (Оглядываясь назад, можно сказать, что было мудрым решением начать этот пример с комбинации PartDesign (ПроектнаяДетаь) и Sketcher (Скетчер)).


Наконец, два параметра определяют размер плёночного шарнира:
* NeutralRadius основного эскиза
* значение толщины плёнки в эскизе петли

<span id="Bending_the_film_hinge"></span>
===Сгибание плёночного шарнира===

Угол изгиба контролируется ограничением ArcAngle промежуточного эскиза и может быть изменён в его редакторе свойств.<br> Но мы же с вами - правильные дизайнеры и правильно назвали ограничения и размеры наших эскизов, поэтому можем обратиться к контрольному углу через Python.<br> Несколько основных строк кода для встраивания в контекст GUI могут выглядеть следующим образом:

{{Code|code=
doc=App.ActiveDocument
sketch=doc.getObjectsByLabel('IntermediateSketch')[0]
 ...
sketch.getDatum('ArcAngle')
 ...
sketch.setDatum('ArcAngle',App.Units.Quantity('50.000000 deg'))
doc.recompute(None,True,True)
}}  

<div class="mw-collapsible-content toccolours">

Краткое объяснение:
* {{Incode|doc {{=}} App.ActiveDocument}}: Чтобы обратиться к активному документу по псевдониму, называемому '''doc'''
*{{Incode|sketch {{=}} doc.getObjectsByLabel('IntermediateSketch')[0]}}: Чтобы обратиться к соответствующему эскизу под псевдонимом '''sketch'''.
*: Метод '''getObjectsByLabel()''' возвращает список объектов, и мы должны использовать суффиксный индекс {{value|0}}, чтобы выбрать первый объект в списке. (Мы не ожидаем появления другого объекта с такой же меткой и поэтому не должны заботиться о других элементах в списке.)
* {{Incode|sketch.getDatum('ArcAngle')}}: Возвращает текущее значение размерного ограничения '''ArcAngle''' (в режим просмотра отчета)
* {{Incode|sketch.setDatum('ArcAngle', App.Units.Quantity('50.0 deg'))}}: Устанавливает значение '''ArcAngle''' {{value|50°}} 
* {{Incode|doc.recompute(None,True,True)}}: Чтобы обновить весь документ и показать изменения зависимой геометрии.

</div> <!-- End of collapsible element for content section. Do not remove! -->

<span id="Connecting_geometry"></span>
===Присоединяем геометрию===

Две половинки клипсы ждут своего часа, чтобы быть прикреплёнными к шарниру: одна на неподвижной стороне, другая - на подвижной.

[[Image:Sketcher_ExampleHinge-08.png|300px]]
{{Caption|Две половинки простого зажима}}

<div class="mw-collapsible-content toccolours">

Статическая сторона проста: 
# Активируйте тело и настройте свойства положения и ориентации в редакторе свойств так, чтобы они совпадали с плёночным шарниром.
# Активируйте тело шарнира.
# Выберите инструмент 
[[Image:PartDesign_Boolean.svg|16px]] [[PartDesign_Boolean/ru|PartDesign Булевы]] с опцией (по умолчанию) Слияние.
# В диалоговом окне нажмите кнопку {{Button|Добавить тело (Add body)}}.
# Выберите '''тело''' статичной половины клипсы.
# Нажмите OK, чтобы закончить и закрыть диалог.

</div> <!-- End of collapsible element for content section. Do not remove! -->

[[Image:Sketcher_ExampleHinge-09.png|300px]] [[Image:Button_right.svg|16px|link=]] 
[[Image:Sketcher_ExampleHinge-10.png|300px]]
{{Caption|Плёночный шарнир и статичная половина в положении для моделирования → Плёночный шарнир с перемещённой и [[Image:PartDesign_Boolean.svg|16px]] [[PartDesign_Boolean/ru|объединённой]] статической половинкой}}

<div class="mw-collapsible-content toccolours">

Но на подвижной стороне всё иначе: связанная половина геометрии зажима должна переместиться в нужное положение, прежде чем начнётся (повторный) расчёт операции Соединения (Fuse).

На данный момент мне не хватает функции "Присоединение со смещением", как в верстаке Assembly3, чтобы прикрепить геометрию зажима к одной из движущихся граней. Но после некоторых экспериментов и настроек я нашёл решение:

* Контейнеры [[Image:Std_Part.svg|16px]] [[Std_Part/ru|Деталь (Std Part)]] и [[Image:PartDesign_Body.svg|16px]] [[PartDesign_Body/ru|ПроектнаяДеталь Тело (PartDesign Body)]] не поддерживаются [[Image:Part_EditAttachment.svg|16px]] [[Part_EditAttachment/ru#Limitations|Деталь Присоединение (Part Attachment)]]. 
Хотя для их выравнивания можно использовать Присоединение, но оно не будет параметрически связано.
* Присоединение может быть применено к элементу ПроектнаяДеталь (PartDesign). Этот элемент и элементы, зависящие от него, будут перепозиционированы в соответствии с базовой геометрией. Но!
** Независимые элементы ПроектнойДетали (PartDesign) не будут перемещаться, что приведёт к изменению итоговой формы и её разрушению.
** Нам рекомендуется сохранять независимость функций, чтобы избежать воздействия из-за [[Topological_naming_problem/ru|Проблемы топологического именования]].
* [[File:PartDesign_Clone.svg|16px]] [[PartDesign_Clone|ПроектнаяДеталь Клонировать (PartDesign Clone)]] создаёт тело как единую часть, которая может быть использована с Присоединением (Attachment).


Исходя из этого, рабочий процесс может выглядить следующим образом:

# Выберите подвижную половинку зажима.
# Используйте команду [[File:PartDesign_Clone.svg|16px]] [[PartDesign_Clone/ru|Создать клон]].
# В этом новом теле выберите объект Clone в Дереве Проекта.
# Используйте инструмент [[Image:Part_EditAttachment.svg|16px]] [[Part_EditAttachment/ru|Деталь Присоединить (Part Attachment)]], чтобы добавить свойства присоединения к объекту Clone.
# Откроется диалог  Присоединения.
#* Выберите вершину для начала координат.
#* Выберите ребро для первого направления.
#* Выберите ребро для второго направления.
#* Попробуйте различные режимы прикрепления, чтобы найти наиболее подходящий.
#* Настройте значения поворота и координат, пока геометрия снова не окажется в положении для построения модели.
# Нажмите OK, чтобы закрыть диалог.
# При активном состоянии тела шарнира выберите инструмент [[Image:PartDesign_Boolean.svg|16px]] [[PartDesign_Boolean/ru|ПроектнаяДеталь Булевы операции (PartDesign Boolean)]].
# В диалоге нажмите кнопку {{Button|Добавить тело}}.
# выберите тело подвижной половины.
# Нажмите OK, чтобы закончить и закрыть диалог.

</div> <!-- End of collapsible element for content section. Do not remove! -->
</div> <!-- End of collapsible element for ... section. Do not remove! -->

[[Image:Sketcher_ExampleHinge-14.png|300px]]
{{Caption|Подвижная половина будет [[Image:Part_EditAttachment.svg|16px]] [[Part_EditAttachment/ru|прикреплена]] к углу подвижной стороны шарнира (режим привязки OXZ: вершина, ребро, ребро)}}

Оглядываясь назад, можно сказать, что было бы разумнее снабдить геометрию вложения промежуточным эскизом, чтобы избежать ещё одного источника [[Topological_naming_problem/ru|Проблем топологического именования]].

[[Image:Sketcher_ExampleHinge-11.png|300px]] [[Image:Button_right.svg|16px|link=]] 
[[Image:Sketcher_ExampleHinge-12.png|300px]]
{{Caption|Зажим на данный момент и подвижная половина в положении для моделирования → готовый зажим с [[Image:Part_EditAttachment.svg|16px]] [[Part_EditAttachment/ru|присоединённой]] и [[Image:PartDesign_Boolean.svg|16px]] [[PartDesign_Boolean/ru|объединённой]] подвижной половинкой}}

Теперь в результате должен получиться один сплошной зажим, который можно закрывать и открывать, изменяя ArcAngle плёночного шарнира. Допустимые углы: от 0,1° до 180°, при этом участок плёнки не должен становиться прямым, а больше, чем закрытый, не имеет смысла. (При 180° объект может слиться по касательной или в местах перекрытия, но небольшой дополнительный зазор может помочь, если это неприемлемо).

[[Image:Sketcher_ExampleHinge-13.png|200px]] [[Image:Button_right.svg|16px|link=]] 
[[Image:Sketcher_ExampleHinge-15.png|200px]] [[Image:Button_right.svg|16px|link=]] 
[[Image:Sketcher_ExampleHinge-16.png|200px]]
{{Caption|Клипса почти закрыта → Клипса закрыта наполовину → Клипса в положении для отливки в пресс-форме}}

{{PartDesign Tools navi{{#translation:}}}}
{{Sketcher Tools navi{{#translation:}}}}
{{Userdocnavi{{#translation:}}}}