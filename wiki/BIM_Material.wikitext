<languages/>
<translate>

<!--T:1-->
{{Docnav
|[[BIM_Layers|Layers]]
|[[Arch_Schedule|Schedule]]
|[[BIM_Workbench|BIM]]
|IconL=BIM_Layers.svg
|IconR=Arch_Schedule.svg
|IconC=Workbench_BIM.svg
}}

<!--T:2-->
{{GuiCommand
|Name=BIM Material
|MenuLocation=Manage → Material
|Workbenches=[[BIM_Workbench|BIM]]
}}

==Description== <!--T:3-->

<!--T:4-->
Shows the '''BIM Material''' dialog. The dialog allows to quickly and easily perform material-related operations, with extra focus on efficient working with many objects and many materials.

<!--T:5-->
# Create new [[Arch_SetMaterial|material]] or [[Arch MultiMaterial|multi-material]].
# Attribute an existing material or multi-material to selected object(s).

</translate>
[[File:BIM_Material_Manager.png]]
<translate>
<!--T:14-->
{{Caption|The BIM Material Manager}}

==Usage== <!--T:7-->

<!--T:8-->
# Optionally select one or more BIM objects whose [[Arch_Component#Data|{{PropertyData|Material}}]] property you want to change. Objects without this property can also be selected, but will be ignored.
# Press the {{Button|[[Image:BIM_Material.svg|16px]] [[BIM_Material|Material]]}} button in the toolbar.
# One of the following happens:
#* If there is no material in the active document:
#*# The Material Manager dialog is not displayed. Instead the [[Arch_SetMaterial|Arch SetMaterial]] tool is started to create a material.
#*# If objects have been selected the created material is assigned to them if possible.
#* If there is at least one material or multi-material in the active document:
#*# The Material Manager dialog opens. See [[#Material_Manager_tools|Material Manager tools]].
#*# Optionally select a material or multi-material from the list.
#*# Press the {{Button|OK}} button.
#*# If objects have been selected the selected material is assigned to them if possible.

==Material Manager tools== <!--T:10-->

<!--T:11-->
The materials Manager allows you to:

<!--T:15-->
[[File:BIM_Material_Manager_New.png|thumb|The New Material task panel.]]
[[File:BIM_Material_Manager_New_Multi.png|thumb|The New Multi-material task panel.]]

<!--T:12-->
* '''Search materials by name''': Use the search box.
* '''Assign a material to the selected objects''': Pressing {{Button|OK}} with a material selected will assign it to the selected objects.
* '''Create a [[Arch_SetMaterial|material]]''': Press the {{Button|New Material}} button.
* '''Create a [[Arch_MultiMaterial|multi-material]]''': Press the {{Button|New Multi-Material}} button.
* '''Delete a material''': Right-click a material and choose "Delete".
* '''Delete unused materials''': Press the {{Button|Delete Unused}} button. All materials that are not used by any object will be removed.
* '''Merge duplicate materials''': Press the {{Button|Merge Duplicates}} button. Merges the materials with exact same names (ex. Concrete and Concrete) or exact same names with a numeric suffix (ex. Concrete and Concrete001) together.
* '''Rename a material''': Right-click a material and choose "Rename".
* '''Duplicate a material''': Right-click a material and choose "Duplicate". This will create an independent copy of the material.
* '''Merge two materials together''': Right-click a material and choose "Merge To…", then select another material. The first one will be removed, and all objects that were using the first one will be assigned the second one.

=== New material === <!--T:16-->

<!--T:17-->
TBD

==== Material properties ==== <!--T:18-->

<!--T:19-->
An Arch Material object will have the following properties

==== Data ==== <!--T:20-->

<!--T:21-->
{{Properties_Title|Material}}

<!--T:22-->
* {{PropertyData|Description|String}}: A description for this material.
* {{PropertyData|Standard Code|String}}: A standard code (MasterFormat, OmniClass, …).
* {{PropertyData|Product URL|String}}: A URL where to find information about this material.
* {{PropertyData|Transparency|Percent}}: The transparency value of this material.
* {{PropertyData|Color|Color}}: The color of this material.
* {{PropertyData|Section Color|Color}}: The color of this material when cut.

=== New multi-material === <!--T:23-->

<!--T:24-->
TBD

== Relationship between BIM and Core material systems == <!--T:25-->

<!--T:26-->
Since version 1.0, FreeCAD contains two distinct and parallel systems for managing materials: a legacy, Python-based system primarily used by the BIM workbench, and a modern, C++ based system intended for global use in any workbench.

=== Core material system === <!--T:27-->

<!--T:28-->
* '''Architecture:''' This system is designed around a centralized library model. The primary definition of a material is stored externally in files (e.g., {{FileName|.FCMat}} format) located in system-wide or user-specific directories. The [[Material_Workbench|Material Workbench]] documents this system in more detail.
* '''Data Linking:''' When a material is assigned to an object, the object does not store a full copy of the material's data. Instead, a hidden property named {{PropertyData|Shape Material}} is added to the object. This property holds a complete material object in memory, and upon saving the document, it serializes either a reference to an external library material using the material's object UUID property, or embeds a full copy of the material's data if it has no external source.
* '''Workflow:''' This approach ensures a single source of truth; updates to the central library file will propagate to all documents that link to it. However, it means document portability can be compromised if the corresponding material libraries are not present on another system. The materials themselves are not directly visible as objects within the document's Tree View.

=== BIM material system === <!--T:29-->

<!--T:30-->
* '''Architecture:''' This system is designed around a document-centric model. A material is a standalone object within the document itself, an instance of {{Incode|App::MaterialObjectPython}}.
* '''Data Storage:''' The full definition of the material, including its properties like color and description, is stored directly within this object inside the {{FileName|.FCStd}} file. These material objects are visible in the Tree View, collected within a "Materials" group. When assigned, an object's {{PropertyData|Material}} property holds a direct link to this in-document material object.
* '''Workflow:''' This approach ensures document portability, as all material definitions are embedded. It also provides discoverability, as the materials used in a project are explicitly listed in the Tree View. However, it can result in data duplication and lacks a mechanism for centrally updating materials across multiple projects.

=== Point of interaction: one-way import === <!--T:31-->

<!--T:32-->
The two systems do not have a deep or persistent integration. Their interaction is limited to a one-way data import initiated from the BIM system.

<!--T:33-->
* '''Mechanism:''' The BIM/Arch material editor UI is capable of scanning the directories that contain the core system's {{FileName|.FCMat}} library files. It presents these external materials to the user as available templates in the material task panel, when choosing a preset.
* '''Process:''' When a user selects an {{FileName|.FCMat}} material from this list, the BIM system performs the following actions:
# It reads the data from the selected {{FileName|.FCMat}} file.
# It uses this data to populate the fields for a new, native {{Incode|App::MaterialObjectPython}}.
# This new object is then created within the active document.

<!--T:34-->
Once this import process is complete, there is no further link between the newly created Arch/BIM material and the original {{FileName|.FCMat}} file. It is a one-time copy of the data at that specific moment. Subsequent changes to the source material in the core library will have no effect on the Arch/BIM materials that were created from it.

=== Physical vs. appearance properties === <!--T:35-->

<!--T:36-->
The FreeCAD material systems are designed with a distinction between a material's physical characteristics and its visual appearance. However, these properties differ significantly between the core Material system and the legacy BIM system.

==== Core material system ==== <!--T:37-->

<!--T:38-->
The core, C++-based system provides an extensible framework for defining a wide range of material properties. It is organized into "Models," which are schemas that group related properties.

<!--T:39-->
* '''Physical Properties:''' These define the engineering characteristics required for simulation and analysis. The system supports numerous models, including: Mechanical (e.g., {{Incode|Density}}, {{Incode|YoungsModulus}}, {{Incode|PoissonRatio}}), Thermal, Electromagnetic.
* '''Appearance Properties:''' These define the visual look for rendering. Multiple rendering models are supported, defining properties such as: {{Incode|DiffuseColor}}, {{Incode|SpecularColor}} {{Incode|Shininess}}, {{Incode|Transparency}}, Texture image paths and scaling.
* '''Extensibility:''' The model-based architecture is designed to be extensible. Add-on workbenches or future FreeCAD versions can introduce new models to support additional physical domains or render engines without altering the core framework.

==== BIM material system ==== <!--T:40-->

<!--T:41-->
This legacy, Python-based system has a fixed and more limited set of properties, focusing primarily on visual representation and basic metadata for BIM workflows.

<!--T:42-->
* '''Physical Properties:''' This system does not have a formal concept of physical properties for engineering analysis. It does not manage data like density or Young's Modulus.
* '''Appearance Properties:''' The properties are hard-coded and limited to a basic set necessary for architectural visualization and metadata, consisting of 6 properties: {{PropertyData|Color}}, {{PropertyData|Section Color}}, {{PropertyData|Transparency}} (appearance), {{PropertyData|Description}}, {{PropertyData|Standard Code}}, {{PropertyData|Product URL}} (metadata).
* '''Extensibility:''' The property set is fixed within the Python code and is not designed to be extended.

<!--T:43-->
This distinction is critical: the core system is necessary for any engineering analysis (like FEM), while the BIM system is tailored for architectural visualization and IFC compatibility.

=== Coexistence and interoperability of material systems === <!--T:44-->

<!--T:45-->
While the long-term goal is full migration of the BIM workbench to the core Materials system, a transition period requires understanding how they can coexist on a single object.

==== Can both systems be assigned to one object? ==== <!--T:46-->

<!--T:47-->
It is technically possible to assign a material from both systems to the same object (e.g., an [[Arch_Wall|Arch Wall]]). The two systems use different, non-conflicting properties to store their data:

<!--T:48-->
* '''Core System:''' Uses the hidden {{PropertyData|Shape Material}} property.
* '''BIM System:''' Uses the visible {{PropertyData|Material}} property.

<!--T:49-->
An object can have both of these properties simultaneously.

==== Dual-assignment workflow for maximum compatibility ==== <!--T:50-->

<!--T:51-->
For users who require both advanced engineering analysis and correct BIM data exchange (specifically IFC export), a "dual-assignment" workflow is currently the only viable approach.

<!--T:52-->
'''Why it is necessary:'''
The tools for different domains are coded to look for different properties.
* Workbenches like FEM read physical data exclusively from the Core material assigned to the {{PropertyData|Shape Material}} property.
* The IFC exporter is part of the BIM workbench and reads material information exclusively from the BIM material assigned to the {{PropertyData|Material}} property.

<!--T:53-->
'''Recommended Workflow:'''
Users who require physical and appearance material properties, and to ensure an object is fully functional across both domains, can perform the following two steps:
# '''Assign the Core Material:''' Select the {{MenuCommand|[[Image:Std_SetMaterial.svg|16px]] [[Std_SetMaterial|Material]]}} option from the object's [[Tree_View|Tree View]] or [[3D_View|3D View]] context menu to assign the desired material. This makes the object's physical data available for analysis.
# '''Assign the BIM Material:''' With the same object selected, use the [[Image:BIM_Material.svg|16px]] [[BIM_Material|BIM Material]] tool described on this page to assign a corresponding BIM material. This ensures the object will be exported to IFC with the correct material information.

<!--T:54-->
'''Caveats and Risks:'''
This workaround introduces a significant risk of '''data desynchronization'''. The two material assignments are completely independent. If you update the name or color of the BIM material, it will not affect the Core material, and vice-versa. Users must manually ensure that the two assigned materials are kept consistent to avoid conflicting information between their internal analyses and their external BIM deliverables. The BIM system's multi-material object, which has no equivalent in the Core system, must still be used and managed exclusively with BIM materials.


<!--T:13-->
{{Docnav
|[[BIM_Layers|Layers]]
|[[Arch_Schedule|Schedule]]
|[[BIM_Workbench|BIM]]
|IconL=BIM_Layers.svg
|IconR=Arch_Schedule.svg
|IconC=Workbench_BIM.svg
}}

</translate>
{{BIM_Tools_navi{{#translation:}}}}
{{Userdocnavi{{#translation:}}}}